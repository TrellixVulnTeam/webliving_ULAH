{"version":3,"file":"main.iife.js","sources":["../../../node_modules/.pnpm/vanilla-lazyload@17.5.0/node_modules/vanilla-lazyload/dist/lazyload.esm.js","../../../node_modules/.pnpm/mimic-fn@3.1.0/node_modules/mimic-fn/index.js","../../../node_modules/.pnpm/debounce-fn@5.0.0/node_modules/debounce-fn/index.js","../../../node_modules/.pnpm/side-effect-manager@0.1.5/node_modules/side-effect-manager/dist/side-effect-manager.es.js","../src/DocsViewer/icons/sidebar.ts","../src/DocsViewer/icons/arrow-left.ts","../src/DocsViewer/icons/arrow-right.ts","../src/DocsViewer/icons/play.ts","../src/DocsViewer/icons/pause.ts","../src/DocsViewer/index.ts","../src/utils/helpers.ts","../src/StaticDocsViewer/index.ts","../src/DynamicDocsViewer/index.ts","../src/index.ts","../src/constants.ts"],"sourcesContent":["const runningOnBrowser = typeof window !== \"undefined\";\r\n\r\nconst isBot =\r\n    (runningOnBrowser && !(\"onscroll\" in window)) ||\r\n    (typeof navigator !== \"undefined\" && /(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent));\r\n\r\nconst supportsIntersectionObserver = runningOnBrowser && \"IntersectionObserver\" in window;\r\n\r\nconst supportsClassList = runningOnBrowser && \"classList\" in document.createElement(\"p\");\r\n\r\nconst isHiDpi = runningOnBrowser && window.devicePixelRatio > 1;\r\n\r\nconst defaultSettings = {\r\n    elements_selector: \".lazy\",\r\n    container: isBot || runningOnBrowser ? document : null,\r\n    threshold: 300,\r\n    thresholds: null,\r\n    data_src: \"src\",\r\n    data_srcset: \"srcset\",\r\n    data_sizes: \"sizes\",\r\n    data_bg: \"bg\",\r\n    data_bg_hidpi: \"bg-hidpi\",\r\n    data_bg_multi: \"bg-multi\",\r\n    data_bg_multi_hidpi: \"bg-multi-hidpi\",\r\n    data_poster: \"poster\",\r\n    class_applied: \"applied\",\r\n    class_loading: \"loading\",\r\n    class_loaded: \"loaded\",\r\n    class_error: \"error\",\r\n    class_entered: \"entered\",\r\n    class_exited: \"exited\",\r\n    unobserve_completed: true,\r\n    unobserve_entered: false,\r\n    cancel_on_exit: true,\r\n    callback_enter: null,\r\n    callback_exit: null,\r\n    callback_applied: null,\r\n    callback_loading: null,\r\n    callback_loaded: null,\r\n    callback_error: null,\r\n    callback_finish: null,\r\n    callback_cancel: null,\r\n    use_native: false\r\n};\r\n\r\nconst getExtendedSettings = (customSettings) => {\r\n    return Object.assign({}, defaultSettings, customSettings);\r\n};\r\n\r\n/* Creates instance and notifies it through the window element */\r\nconst createInstance = function(classObj, options) {\r\n    let event;\r\n    const eventString = \"LazyLoad::Initialized\";\r\n    const instance = new classObj(options);\r\n    try {\r\n        // Works in modern browsers\r\n        event = new CustomEvent(eventString, { detail: { instance } });\r\n    } catch (err) {\r\n        // Works in Internet Explorer (all versions)\r\n        event = document.createEvent(\"CustomEvent\");\r\n        event.initCustomEvent(eventString, false, false, { instance });\r\n    }\r\n    window.dispatchEvent(event);\r\n};\r\n\r\n/* Auto initialization of one or more instances of lazyload, depending on the \r\n    options passed in (plain object or an array) */\r\nconst autoInitialize = (classObj, options) => {\r\n    if (!options) {\r\n        return;\r\n    }\r\n    if (!options.length) {\r\n        // Plain object\r\n        createInstance(classObj, options);\r\n    } else {\r\n        // Array of objects\r\n        for (let i = 0, optionsItem; (optionsItem = options[i]); i += 1) {\r\n            createInstance(classObj, optionsItem);\r\n        }\r\n    }\r\n};\r\n\r\nconst SRC = \"src\";\r\nconst SRCSET = \"srcset\";\r\nconst SIZES = \"sizes\";\r\nconst POSTER = \"poster\";\r\nconst ORIGINALS = \"llOriginalAttrs\";\r\n\r\nconst statusLoading = \"loading\";\r\nconst statusLoaded = \"loaded\";\r\nconst statusApplied = \"applied\";\r\nconst statusEntered = \"entered\";\r\nconst statusError = \"error\";\r\nconst statusNative = \"native\";\r\n\r\nconst dataPrefix = \"data-\";\r\nconst statusDataName = \"ll-status\";\r\n\r\nconst getData = (element, attribute) => {\r\n    return element.getAttribute(dataPrefix + attribute);\r\n};\r\n\r\nconst setData = (element, attribute, value) => {\r\n    var attrName = dataPrefix + attribute;\r\n    if (value === null) {\r\n        element.removeAttribute(attrName);\r\n        return;\r\n    }\r\n    element.setAttribute(attrName, value);\r\n};\r\n\r\nconst getStatus = (element) => getData(element, statusDataName);\r\nconst setStatus = (element, status) => setData(element, statusDataName, status);\r\nconst resetStatus = (element) => setStatus(element, null);\r\n\r\nconst hasEmptyStatus = (element) => getStatus(element) === null;\r\nconst hasStatusLoading = (element) => getStatus(element) === statusLoading;\r\nconst hasStatusError = (element) => getStatus(element) === statusError;\r\nconst hasStatusNative = (element) => getStatus(element) === statusNative;\r\n\r\nconst statusesAfterLoading = [statusLoading, statusLoaded, statusApplied, statusError];\r\nconst hadStartedLoading = (element) => statusesAfterLoading.indexOf(getStatus(element)) >= 0;\r\n\r\nconst safeCallback = (callback, arg1, arg2, arg3) => {\r\n\tif (!callback) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (arg3 !== undefined) {\r\n\t\tcallback(arg1, arg2, arg3);\r\n\t\treturn;\r\n\t}\r\n\tif (arg2 !== undefined) {\r\n\t\tcallback(arg1, arg2);\r\n\t\treturn;\r\n\t}\r\n\tcallback(arg1);\r\n};\r\n\r\nconst addClass = (element, className) => {\r\n\tif (supportsClassList) {\r\n\t\telement.classList.add(className);\r\n\t\treturn;\r\n\t}\r\n\telement.className += (element.className ? \" \" : \"\") + className;\r\n};\r\n\r\nconst removeClass = (element, className) => {\r\n\tif (supportsClassList) {\r\n\t\telement.classList.remove(className);\r\n\t\treturn;\r\n\t}\r\n\telement.className = element.className.\r\n\t\treplace(new RegExp(\"(^|\\\\s+)\" + className + \"(\\\\s+|$)\"), \" \").\r\n\t\treplace(/^\\s+/, \"\").\r\n\t\treplace(/\\s+$/, \"\");\r\n};\r\n\r\nconst addTempImage = (element) => {\r\n    element.llTempImage = document.createElement(\"IMG\");\r\n};\r\n\r\nconst deleteTempImage = (element) => {\r\n    delete element.llTempImage;\r\n};\r\n\r\nconst getTempImage = (element) => element.llTempImage;\r\n\r\nconst unobserve = (element, instance) => {\r\n    if (!instance) return;\r\n    const observer = instance._observer;\r\n    if (!observer) return;\r\n    observer.unobserve(element);\r\n};\r\n\r\nconst resetObserver = (observer) => {\r\n    observer.disconnect();\r\n};\r\n\r\nconst unobserveEntered = (element, settings, instance) => {\r\n    if (settings.unobserve_entered) unobserve(element, instance);\r\n};\r\n\r\nconst updateLoadingCount = (instance, delta) => {\r\n    if (!instance) return;\r\n    instance.loadingCount += delta;\r\n};\r\n\r\nconst decreaseToLoadCount = (instance) => {\r\n    if (!instance) return;\r\n    instance.toLoadCount -= 1;\r\n};\r\n\r\nconst setToLoadCount = (instance, value) => {\r\n    if (!instance) return;\r\n    instance.toLoadCount = value;\r\n};\r\n\r\nconst isSomethingLoading = (instance) => instance.loadingCount > 0;\r\n\r\nconst haveElementsToLoad = (instance) => instance.toLoadCount > 0;\r\n\r\nconst getSourceTags = (parentTag) => {\r\n  let sourceTags = [];\r\n  for (let i = 0, childTag; (childTag = parentTag.children[i]); i += 1) {\r\n      if (childTag.tagName === \"SOURCE\") {\r\n          sourceTags.push(childTag);\r\n      }\r\n  }\r\n  return sourceTags;\r\n};\r\n\r\nconst forEachPictureSource = (element, fn) => {\r\n  const parent = element.parentNode;\r\n  if (!parent || parent.tagName !== \"PICTURE\") {\r\n      return;\r\n  }\r\n  let sourceTags = getSourceTags(parent);\r\n  sourceTags.forEach(fn);\r\n};\r\n\r\nconst forEachVideoSource = (element, fn) => {\r\n  let sourceTags = getSourceTags(element);\r\n  sourceTags.forEach(fn);\r\n};\r\n\r\nconst attrsSrc = [SRC];\r\nconst attrsSrcPoster = [SRC, POSTER];\r\nconst attrsSrcSrcsetSizes = [SRC, SRCSET, SIZES];\r\n\r\nconst hasOriginalAttrs = (element) => !!element[ORIGINALS];\r\nconst getOriginalAttrs = (element) => element[ORIGINALS];\r\nconst deleteOriginalAttrs = (element) => delete element[ORIGINALS];\r\n\r\n// ## SAVE ##\r\n\r\nconst setOriginalsObject = (element, attributes) => {\r\n    if (hasOriginalAttrs(element)) {\r\n        return;\r\n    }\r\n    const originals = {};\r\n    attributes.forEach((attribute) => {\r\n        originals[attribute] = element.getAttribute(attribute);\r\n    });\r\n    element[ORIGINALS] = originals;\r\n};\r\n\r\nconst saveOriginalBackgroundStyle = (element) => {\r\n    if (hasOriginalAttrs(element)) {\r\n        return;\r\n    }\r\n    element[ORIGINALS] = { backgroundImage: element.style.backgroundImage };\r\n};\r\n\r\n// ## RESTORE ##\r\n\r\nconst setOrResetAttribute = (element, attrName, value) => {\r\n    if (!value) {\r\n        element.removeAttribute(attrName);\r\n        return;\r\n    }\r\n    element.setAttribute(attrName, value);\r\n};\r\n\r\nconst restoreOriginalAttrs = (element, attributes) => {\r\n    if (!hasOriginalAttrs(element)) {\r\n        return;\r\n    }\r\n    const originals = getOriginalAttrs(element);\r\n    attributes.forEach((attribute) => {\r\n        setOrResetAttribute(element, attribute, originals[attribute]);\r\n    });\r\n};\r\n\r\nconst restoreOriginalBgImage = (element) => {\r\n    if (!hasOriginalAttrs(element)) {\r\n        return;\r\n    }\r\n    const originals = getOriginalAttrs(element);    \r\n    element.style.backgroundImage = originals.backgroundImage;\r\n};\r\n\r\nconst manageApplied = (element, settings, instance) => {\r\n    addClass(element, settings.class_applied);\r\n    setStatus(element, statusApplied);\r\n    // Instance is not provided when loading is called from static class\r\n    if (!instance) return;\r\n    if (settings.unobserve_completed) {\r\n        // Unobserve now because we can't do it on load\r\n        unobserve(element, settings);\r\n    }\r\n    safeCallback(settings.callback_applied, element, instance);\r\n};\r\n\r\nconst manageLoading = (element, settings, instance) => {\r\n    addClass(element, settings.class_loading);\r\n    setStatus(element, statusLoading);\r\n    // Instance is not provided when loading is called from static class\r\n    if (!instance) return;\r\n    updateLoadingCount(instance, +1);\r\n    safeCallback(settings.callback_loading, element, instance);\r\n};\r\n\r\nconst setAttributeIfValue = (element, attrName, value) => {\r\n    if (!value) {\r\n        return;\r\n    }\r\n    element.setAttribute(attrName, value);\r\n};\r\n\r\nconst setImageAttributes = (element, settings) => {\r\n    setAttributeIfValue(element, SIZES, getData(element, settings.data_sizes));\r\n    setAttributeIfValue(element, SRCSET, getData(element, settings.data_srcset));\r\n    setAttributeIfValue(element, SRC, getData(element, settings.data_src));\r\n};\r\n\r\nconst setSourcesImg = (imgEl, settings) => {\r\n    forEachPictureSource(imgEl, (sourceTag) => {\r\n        setOriginalsObject(sourceTag, attrsSrcSrcsetSizes);\r\n        setImageAttributes(sourceTag, settings);\r\n    });\r\n    setOriginalsObject(imgEl, attrsSrcSrcsetSizes);\r\n    setImageAttributes(imgEl, settings);\r\n};\r\n\r\nconst setSourcesIframe = (iframe, settings) => {\r\n    setOriginalsObject(iframe, attrsSrc);\r\n    setAttributeIfValue(iframe, SRC, getData(iframe, settings.data_src));\r\n};\r\n\r\nconst setSourcesVideo = (videoEl, settings) => {\r\n    forEachVideoSource(videoEl, (sourceEl) => {\r\n        setOriginalsObject(sourceEl, attrsSrc);\r\n        setAttributeIfValue(sourceEl, SRC, getData(sourceEl, settings.data_src));\r\n    });\r\n    setOriginalsObject(videoEl, attrsSrcPoster);\r\n\r\n    setAttributeIfValue(videoEl, POSTER, getData(videoEl, settings.data_poster));\r\n    setAttributeIfValue(videoEl, SRC, getData(videoEl, settings.data_src));\r\n    videoEl.load();\r\n};\r\n\r\nconst setBackground = (element, settings, instance) => {\r\n    const bg1xValue = getData(element, settings.data_bg);\r\n    const bgHiDpiValue = getData(element, settings.data_bg_hidpi);\r\n    const bgDataValue = isHiDpi && bgHiDpiValue ? bgHiDpiValue : bg1xValue;\r\n    if (!bgDataValue) return;\r\n    element.style.backgroundImage = `url(\"${bgDataValue}\")`;\r\n    getTempImage(element).setAttribute(SRC, bgDataValue);\r\n    manageLoading(element, settings, instance);\r\n};\r\n\r\n// NOTE: THE TEMP IMAGE TRICK CANNOT BE DONE WITH data-multi-bg\r\n// BECAUSE INSIDE ITS VALUES MUST BE WRAPPED WITH URL() AND ONE OF THEM\r\n// COULD BE A GRADIENT BACKGROUND IMAGE\r\nconst setMultiBackground = (element, settings, instance) => {\r\n    const bg1xValue = getData(element, settings.data_bg_multi);\r\n    const bgHiDpiValue = getData(element, settings.data_bg_multi_hidpi);\r\n    const bgDataValue = isHiDpi && bgHiDpiValue ? bgHiDpiValue : bg1xValue;\r\n    if (!bgDataValue) {\r\n        return;\r\n    }\r\n    element.style.backgroundImage = bgDataValue;\r\n    manageApplied(element, settings, instance);\r\n};\r\n\r\nconst setSourcesFunctions = {\r\n    IMG: setSourcesImg,\r\n    IFRAME: setSourcesIframe,\r\n    VIDEO: setSourcesVideo\r\n};\r\n\r\nconst setSourcesNative = (element, settings) => {\r\n    const setSourcesFunction = setSourcesFunctions[element.tagName];\r\n    if (!setSourcesFunction) {\r\n        return;\r\n    }\r\n    setSourcesFunction(element, settings);\r\n};\r\n\r\nconst setSources = (element, settings, instance) => {\r\n    const setSourcesFunction = setSourcesFunctions[element.tagName];\r\n    if (!setSourcesFunction) {\r\n        return;\r\n    }\r\n    setSourcesFunction(element, settings);\r\n    manageLoading(element, settings, instance);\r\n};\r\n\r\nconst elementsWithLoadEvent = [\"IMG\", \"IFRAME\", \"VIDEO\"];\r\nconst hasLoadEvent = (element) => elementsWithLoadEvent.indexOf(element.tagName) > -1;\r\n\r\nconst checkFinish = (settings, instance) => {\r\n    if (instance && !isSomethingLoading(instance) && !haveElementsToLoad(instance)) {\r\n        safeCallback(settings.callback_finish, instance);\r\n    }\r\n};\r\n\r\nconst addEventListener = (element, eventName, handler) => {\r\n    element.addEventListener(eventName, handler);\r\n    element.llEvLisnrs[eventName] = handler;\r\n};\r\n\r\nconst removeEventListener = (element, eventName, handler) => {\r\n    element.removeEventListener(eventName, handler);\r\n};\r\n\r\nconst hasEventListeners = (element) => {\r\n    return !!element.llEvLisnrs;\r\n};\r\n\r\nconst addEventListeners = (element, loadHandler, errorHandler) => {\r\n    if (!hasEventListeners(element)) element.llEvLisnrs = {};\r\n    const loadEventName = element.tagName === \"VIDEO\" ? \"loadeddata\" : \"load\";\r\n    addEventListener(element, loadEventName, loadHandler);\r\n    addEventListener(element, \"error\", errorHandler);\r\n};\r\n\r\nconst removeEventListeners = (element) => {\r\n    if (!hasEventListeners(element)) {\r\n        return;\r\n    }\r\n    const eventListeners = element.llEvLisnrs;\r\n    for (let eventName in eventListeners) {\r\n        const handler = eventListeners[eventName];\r\n        removeEventListener(element, eventName, handler);\r\n    }\r\n    delete element.llEvLisnrs;\r\n};\r\n\r\nconst doneHandler = (element, settings, instance) => {\r\n    deleteTempImage(element);\r\n    updateLoadingCount(instance, -1);\r\n    decreaseToLoadCount(instance);\r\n    removeClass(element, settings.class_loading);\r\n    if (settings.unobserve_completed) {\r\n        unobserve(element, instance);\r\n    }\r\n};\r\n\r\nconst loadHandler = (event, element, settings, instance) => {\r\n    const goingNative = hasStatusNative(element);\r\n    doneHandler(element, settings, instance);\r\n    addClass(element, settings.class_loaded);\r\n    setStatus(element, statusLoaded);\r\n    safeCallback(settings.callback_loaded, element, instance);\r\n    if (!goingNative) checkFinish(settings, instance);\r\n};\r\n\r\nconst errorHandler = (event, element, settings, instance) => {\r\n    const goingNative = hasStatusNative(element);\r\n    doneHandler(element, settings, instance);\r\n    addClass(element, settings.class_error);\r\n    setStatus(element, statusError);\r\n    safeCallback(settings.callback_error, element, instance);\r\n    if (!goingNative) checkFinish(settings, instance);\r\n};\r\n\r\nconst addOneShotEventListeners = (element, settings, instance) => {\r\n    const elementToListenTo = getTempImage(element) || element;\r\n    if (hasEventListeners(elementToListenTo)) {\r\n        // This happens when loading is retried twice\r\n        return;\r\n    }\r\n    const _loadHandler = (event) => {\r\n        loadHandler(event, element, settings, instance);\r\n        removeEventListeners(elementToListenTo);\r\n    };\r\n    const _errorHandler = (event) => {\r\n        errorHandler(event, element, settings, instance);\r\n        removeEventListeners(elementToListenTo);\r\n    };\r\n    addEventListeners(elementToListenTo, _loadHandler, _errorHandler);\r\n};\r\n\r\nconst loadBackground = (element, settings, instance) => {\r\n    addTempImage(element);\r\n    addOneShotEventListeners(element, settings, instance);\r\n    saveOriginalBackgroundStyle(element);\r\n    setBackground(element, settings, instance);\r\n    setMultiBackground(element, settings, instance);\r\n};\r\n\r\nconst loadRegular = (element, settings, instance) => {\r\n    addOneShotEventListeners(element, settings, instance);\r\n    setSources(element, settings, instance);\r\n};\r\n\r\nconst load = (element, settings, instance) => {\r\n    if (hasLoadEvent(element)) {\r\n        loadRegular(element, settings, instance);\r\n    } else {\r\n        loadBackground(element, settings, instance);\r\n    }\r\n};\r\n\r\nconst loadNative = (element, settings, instance) => {\r\n    element.setAttribute(\"loading\", \"lazy\");\r\n    addOneShotEventListeners(element, settings, instance);\r\n    setSourcesNative(element, settings);\r\n    setStatus(element, statusNative);\r\n};\r\n\r\nconst removeImageAttributes = (element) => {\r\n    element.removeAttribute(SRC);\r\n    element.removeAttribute(SRCSET);\r\n    element.removeAttribute(SIZES);\r\n};\r\n\r\nconst resetSourcesImg = (element) => {\r\n    forEachPictureSource(element, (sourceTag) => {\r\n        removeImageAttributes(sourceTag);\r\n    });\r\n    removeImageAttributes(element);\r\n};\r\n\r\nconst restoreImg = (imgEl) => {\r\n    forEachPictureSource(imgEl, (sourceEl) => {\r\n        restoreOriginalAttrs(sourceEl, attrsSrcSrcsetSizes);\r\n    });\r\n    restoreOriginalAttrs(imgEl, attrsSrcSrcsetSizes);\r\n};\r\n\r\nconst restoreVideo = (videoEl) => {\r\n    forEachVideoSource(videoEl, (sourceEl) => {\r\n        restoreOriginalAttrs(sourceEl, attrsSrc);\r\n    });\r\n    restoreOriginalAttrs(videoEl, attrsSrcPoster);\r\n    videoEl.load();\r\n};\r\n\r\nconst restoreIframe = (iframeEl) => {\r\n    restoreOriginalAttrs(iframeEl, attrsSrc);\r\n};\r\n\r\nconst restoreFunctions = {\r\n    IMG: restoreImg,\r\n    IFRAME: restoreIframe,\r\n    VIDEO: restoreVideo\r\n};\r\n\r\nconst restoreAttributes = (element) => {\r\n    const restoreFunction = restoreFunctions[element.tagName];\r\n    if (!restoreFunction) {\r\n        restoreOriginalBgImage(element);\r\n        return;\r\n    }\r\n    restoreFunction(element);\r\n};\r\n\r\nconst resetClasses = (element, settings) => {\r\n    if (hasEmptyStatus(element) || hasStatusNative(element)) {\r\n        return;\r\n    }\r\n    removeClass(element, settings.class_entered);\r\n    removeClass(element, settings.class_exited);\r\n    removeClass(element, settings.class_applied);\r\n    removeClass(element, settings.class_loading);\r\n    removeClass(element, settings.class_loaded);\r\n    removeClass(element, settings.class_error);\r\n};\r\n\r\nconst restore = (element, settings) => {\r\n    restoreAttributes(element);\r\n    resetClasses(element, settings);\r\n    resetStatus(element);\r\n    deleteOriginalAttrs(element);\r\n};\r\n\r\nconst cancelLoading = (element, entry, settings, instance) => {\r\n    if (!settings.cancel_on_exit) return;\r\n    if (!hasStatusLoading(element)) return;\r\n    if (element.tagName !== \"IMG\") return; //Works only on images\r\n    removeEventListeners(element);\r\n    resetSourcesImg(element);\r\n    restoreImg(element);\r\n    removeClass(element, settings.class_loading);\r\n    updateLoadingCount(instance, -1);\r\n    resetStatus(element);\r\n    safeCallback(settings.callback_cancel, element, entry, instance);\r\n};\r\n\r\nconst onEnter = (element, entry, settings, instance) => {\r\n    const dontLoad = hadStartedLoading(element); /* Save status \r\n        before setting it, to prevent loading it again. Fixes #526. */\r\n    setStatus(element, statusEntered);\r\n    addClass(element, settings.class_entered);\r\n    removeClass(element, settings.class_exited);\r\n    unobserveEntered(element, settings, instance);\r\n    safeCallback(settings.callback_enter, element, entry, instance);\r\n    if (dontLoad) return;\r\n    load(element, settings, instance);\r\n};\r\n\r\nconst onExit = (element, entry, settings, instance) => {\r\n    if (hasEmptyStatus(element)) return; //Ignore the first pass, at landing\r\n    addClass(element, settings.class_exited);\r\n    cancelLoading(element, entry, settings, instance);\r\n    safeCallback(settings.callback_exit, element, entry, instance);\r\n};\r\n\r\nconst tagsWithNativeLazy = [\"IMG\", \"IFRAME\", \"VIDEO\"];\r\n\r\nconst shouldUseNative = (settings) =>\r\n    settings.use_native && \"loading\" in HTMLImageElement.prototype;\r\n\r\nconst loadAllNative = (elements, settings, instance) => {\r\n    elements.forEach((element) => {\r\n        if (tagsWithNativeLazy.indexOf(element.tagName) === -1) {\r\n            return;\r\n        }\r\n        loadNative(element, settings, instance);\r\n    });\r\n    setToLoadCount(instance, 0);\r\n};\r\n\r\nconst isIntersecting = (entry) => entry.isIntersecting || entry.intersectionRatio > 0;\r\n\r\nconst getObserverSettings = (settings) => ({\r\n    root: settings.container === document ? null : settings.container,\r\n    rootMargin: settings.thresholds || settings.threshold + \"px\"\r\n});\r\n\r\nconst intersectionHandler = (entries, settings, instance) => {\r\n    entries.forEach((entry) =>\r\n        isIntersecting(entry)\r\n            ? onEnter(entry.target, entry, settings, instance)\r\n            : onExit(entry.target, entry, settings, instance)\r\n    );\r\n};\r\n\r\nconst observeElements = (observer, elements) => {\r\n    elements.forEach((element) => {\r\n        observer.observe(element);\r\n    });\r\n};\r\n\r\nconst updateObserver = (observer, elementsToObserve) => {\r\n    resetObserver(observer);\r\n    observeElements(observer, elementsToObserve);\r\n};\r\n\r\nconst setObserver = (settings, instance) => {\r\n    if (!supportsIntersectionObserver || shouldUseNative(settings)) {\r\n        return;\r\n    }\r\n    instance._observer = new IntersectionObserver((entries) => {\r\n        intersectionHandler(entries, settings, instance);\r\n    }, getObserverSettings(settings));\r\n};\r\n\r\nconst toArray = (nodeSet) => Array.prototype.slice.call(nodeSet);\r\n\r\nconst queryElements = (settings) =>\r\n    settings.container.querySelectorAll(settings.elements_selector);\r\n\r\nconst excludeManagedElements = (elements) => toArray(elements).filter(hasEmptyStatus);\r\n\r\nconst hasError = (element) => hasStatusError(element);\r\nconst filterErrorElements = (elements) => toArray(elements).filter(hasError);\r\n\r\nconst getElementsToLoad = (elements, settings) =>\r\n    excludeManagedElements(elements || queryElements(settings));\r\n\r\nconst retryLazyLoad = (settings, instance) => {\r\n    const errorElements = filterErrorElements(queryElements(settings));\r\n    errorElements.forEach(element => {\r\n        removeClass(element, settings.class_error);\r\n        resetStatus(element);\r\n    });\r\n    instance.update();\r\n};\r\n\r\nconst setOnlineCheck = (settings, instance) => {\r\n    if (!runningOnBrowser) {\r\n        return;\r\n    }\r\n    window.addEventListener(\"online\", () => {\r\n        retryLazyLoad(settings, instance);\r\n    });\r\n};\r\n\r\nconst LazyLoad = function (customSettings, elements) {\r\n    const settings = getExtendedSettings(customSettings);\r\n    this._settings = settings;\r\n    this.loadingCount = 0;\r\n    setObserver(settings, this);\r\n    setOnlineCheck(settings, this);\r\n    this.update(elements);\r\n};\r\n\r\nLazyLoad.prototype = {\r\n    update: function (givenNodeset) {\r\n        const settings = this._settings;\r\n        const elementsToLoad = getElementsToLoad(givenNodeset, settings);\r\n        setToLoadCount(this, elementsToLoad.length);\r\n\r\n        if (isBot || !supportsIntersectionObserver) {\r\n            this.loadAll(elementsToLoad);\r\n            return;\r\n        }\r\n        if (shouldUseNative(settings)) {\r\n            loadAllNative(elementsToLoad, settings, this);\r\n            return;\r\n        }\r\n\r\n        updateObserver(this._observer, elementsToLoad);\r\n    },\r\n\r\n    destroy: function () {\r\n        // Observer\r\n        if (this._observer) {\r\n            this._observer.disconnect();\r\n        }\r\n        // Clean custom attributes on elements\r\n        queryElements(this._settings).forEach((element) => {\r\n            deleteOriginalAttrs(element);\r\n        });\r\n        // Delete all internal props\r\n        delete this._observer;\r\n        delete this._settings;\r\n        delete this.loadingCount;\r\n        delete this.toLoadCount;\r\n    },\r\n\r\n    loadAll: function (elements) {\r\n        const settings = this._settings;\r\n        const elementsToLoad = getElementsToLoad(elements, settings);\r\n        elementsToLoad.forEach((element) => {\r\n            unobserve(element, this);\r\n            load(element, settings, this);\r\n        });\r\n    },\r\n\r\n    restoreAll: function() {\r\n        const settings = this._settings;\r\n        queryElements(settings).forEach((element) => {\r\n            restore(element, settings);\r\n        });\r\n    }\r\n};\r\n\r\nLazyLoad.load = (element, customSettings) => {\r\n    const settings = getExtendedSettings(customSettings);\r\n    load(element, settings);\r\n};\r\n\r\nLazyLoad.resetStatus = (element) => {\r\n    resetStatus(element);\r\n};\r\n\r\n// Automatic instances creation if required (useful for async script loading)\r\nif (runningOnBrowser) {\r\n    autoInitialize(LazyLoad, window.lazyLoadOptions);\r\n}\r\n\r\nexport { LazyLoad as default };\r\n","'use strict';\n\nconst copyProperty = (to, from, property, ignoreNonConfigurable) => {\n\t// `Function#length` should reflect the parameters of `to` not `from` since we keep its body.\n\t// `Function#prototype` is non-writable and non-configurable so can never be modified.\n\tif (property === 'length' || property === 'prototype') {\n\t\treturn;\n\t}\n\n\t// `Function#arguments` and `Function#caller` should not be copied. They were reported to be present in `Reflect.ownKeys` for some devices in React Native (#41), so we explicitly ignore them here.\n\tif (property === 'arguments' || property === 'caller') {\n\t\treturn;\n\t}\n\n\tconst toDescriptor = Object.getOwnPropertyDescriptor(to, property);\n\tconst fromDescriptor = Object.getOwnPropertyDescriptor(from, property);\n\n\tif (!canCopyProperty(toDescriptor, fromDescriptor) && ignoreNonConfigurable) {\n\t\treturn;\n\t}\n\n\tObject.defineProperty(to, property, fromDescriptor);\n};\n\n// `Object.defineProperty()` throws if the property exists, is not configurable and either:\n//  - one its descriptors is changed\n//  - it is non-writable and its value is changed\nconst canCopyProperty = function (toDescriptor, fromDescriptor) {\n\treturn toDescriptor === undefined || toDescriptor.configurable || (\n\t\ttoDescriptor.writable === fromDescriptor.writable &&\n\t\ttoDescriptor.enumerable === fromDescriptor.enumerable &&\n\t\ttoDescriptor.configurable === fromDescriptor.configurable &&\n\t\t(toDescriptor.writable || toDescriptor.value === fromDescriptor.value)\n\t);\n};\n\nconst changePrototype = (to, from) => {\n\tconst fromPrototype = Object.getPrototypeOf(from);\n\tif (fromPrototype === Object.getPrototypeOf(to)) {\n\t\treturn;\n\t}\n\n\tObject.setPrototypeOf(to, fromPrototype);\n};\n\nconst wrappedToString = (withName, fromBody) => `/* Wrapped ${withName}*/\\n${fromBody}`;\n\nconst toStringDescriptor = Object.getOwnPropertyDescriptor(Function.prototype, 'toString');\nconst toStringName = Object.getOwnPropertyDescriptor(Function.prototype.toString, 'name');\n\n// We call `from.toString()` early (not lazily) to ensure `from` can be garbage collected.\n// We use `bind()` instead of a closure for the same reason.\n// Calling `from.toString()` early also allows caching it in case `to.toString()` is called several times.\nconst changeToString = (to, from, name) => {\n\tconst withName = name === '' ? '' : `with ${name.trim()}() `;\n\tconst newToString = wrappedToString.bind(null, withName, from.toString());\n\t// Ensure `to.toString.toString` is non-enumerable and has the same `same`\n\tObject.defineProperty(newToString, 'name', toStringName);\n\tObject.defineProperty(to, 'toString', {...toStringDescriptor, value: newToString});\n};\n\nconst mimicFn = (to, from, {ignoreNonConfigurable = false} = {}) => {\n\tconst {name} = to;\n\n\tfor (const property of Reflect.ownKeys(from)) {\n\t\tcopyProperty(to, from, property, ignoreNonConfigurable);\n\t}\n\n\tchangePrototype(to, from);\n\tchangeToString(to, from, name);\n\n\treturn to;\n};\n\nmodule.exports = mimicFn;\n","import mimicFn from 'mimic-fn';\n\nconst debounceFn = (inputFunction, options = {}) => {\n\tif (typeof inputFunction !== 'function') {\n\t\tthrow new TypeError(`Expected the first argument to be a function, got \\`${typeof inputFunction}\\``);\n\t}\n\n\tconst {\n\t\twait = 0,\n\t\tmaxWait = Number.Infinity,\n\t\tbefore = false,\n\t\tafter = true\n\t} = options;\n\n\tif (!before && !after) {\n\t\tthrow new Error('Both `before` and `after` are false, function wouldn\\'t be called.');\n\t}\n\n\tlet timeout;\n\tlet maxTimeout;\n\tlet result;\n\n\tconst debouncedFunction = function (...arguments_) {\n\t\tconst context = this;\n\n\t\tconst later = () => {\n\t\t\ttimeout = undefined;\n\n\t\t\tif (maxTimeout) {\n\t\t\t\tclearTimeout(maxTimeout);\n\t\t\t\tmaxTimeout = undefined;\n\t\t\t}\n\n\t\t\tif (after) {\n\t\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t\t}\n\t\t};\n\n\t\tconst maxLater = () => {\n\t\t\tmaxTimeout = undefined;\n\n\t\t\tif (timeout) {\n\t\t\t\tclearTimeout(timeout);\n\t\t\t\ttimeout = undefined;\n\t\t\t}\n\n\t\t\tif (after) {\n\t\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t\t}\n\t\t};\n\n\t\tconst shouldCallNow = before && !timeout;\n\t\tclearTimeout(timeout);\n\t\ttimeout = setTimeout(later, wait);\n\n\t\tif (maxWait > 0 && maxWait !== Number.Infinity && !maxTimeout) {\n\t\t\tmaxTimeout = setTimeout(maxLater, maxWait);\n\t\t}\n\n\t\tif (shouldCallNow) {\n\t\t\tresult = inputFunction.apply(context, arguments_);\n\t\t}\n\n\t\treturn result;\n\t};\n\n\tmimicFn(debouncedFunction, inputFunction);\n\n\tdebouncedFunction.cancel = () => {\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = undefined;\n\t\t}\n\n\t\tif (maxTimeout) {\n\t\t\tclearTimeout(maxTimeout);\n\t\t\tmaxTimeout = undefined;\n\t\t}\n\t};\n\n\treturn debouncedFunction;\n};\n\nexport default debounceFn;\n","const e=\"!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",s=e.length,t=Array(20),r=()=>{for(let r=0;r<20;r++)t[r]=e.charAt(Math.random()*s);return t.join(\"\")};class o{constructor(){this.disposers=new Map}add(e,s=r()){return this.flush(s),this.disposers.set(s,e()),s}addDisposer(e,s=r()){return this.flush(s),this.disposers.set(s,e),s}addEventListener(e,s,t,o,i=r()){return this.add((()=>(e.addEventListener(s,t,o),()=>e.removeEventListener(s,t,o))),i),i}setTimeout(e,s,t=r()){return this.add((()=>{const r=window.setTimeout((()=>{this.remove(t),e()}),s);return()=>window.clearTimeout(r)}),t)}setInterval(e,s,t=r()){return this.add((()=>{const t=window.setInterval(e,s);return()=>window.clearInterval(t)}),t)}remove(e){const s=this.disposers.get(e);return this.disposers.delete(e),s}flush(e){const s=this.remove(e);if(s)try{s()}catch(t){console.error(t)}}flushAll(){this.disposers.forEach((e=>{try{e()}catch(s){console.error(s)}})),this.disposers.clear()}}export{o as SideEffectManager,r as genUID};\n//# sourceMappingURL=side-effect-manager.es.js.map\n","export function sidebarSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-sidebar`);\n  $svg.setAttribute(\"viewBox\", \"0 0 64 64\");\n\n  const $path = document.createElementNS(NS, \"path\");\n  $path.setAttribute(\"fill\", \"currentColor\");\n  $path.setAttribute(\n    \"d\",\n    \"M50 8H14c-3.309 0-6 2.691-6 6v36c0 3.309 2.691 6 6 6h36c3.309 0 6-2.691 6-6V14c0-3.309-2.691-6-6-6zM12 50V14c0-1.103.897-2 2-2h8v40h-8c-1.103 0-2-.897-2-2zm40 0c0 1.103-.897 2-2 2H26V12h24c1.103 0 2 .897 2 2z\"\n  );\n\n  $svg.appendChild($path);\n\n  return $svg;\n}\n","export function arrowLeftSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-arrow-left`);\n  $svg.setAttribute(\"viewBox\", \"0 0 500 500\");\n\n  const $path = document.createElementNS(NS, \"path\");\n  $path.setAttribute(\"fill\", \"currentColor\");\n  $path.setAttribute(\n    \"d\",\n    \"M177.81 249.959L337.473 90.295c2.722-2.865 2.651-7.378-.143-10.1-2.793-2.65-7.163-2.65-9.956 0l-164.75 164.75c-2.793 2.793-2.793 7.306 0 10.1l164.75 164.75c2.865 2.722 7.378 2.65 10.099-.143 2.651-2.794 2.651-7.163 0-9.957L177.809 249.959z\"\n  );\n\n  $svg.appendChild($path);\n\n  return $svg;\n}\n","export function arrowRightSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-arrow-right`);\n  $svg.setAttribute(\"viewBox\", \"0 0 500 500\");\n\n  const $path = document.createElementNS(NS, \"path\");\n  $path.setAttribute(\"fill\", \"currentColor\");\n  $path.setAttribute(\n    \"d\",\n    \"M322.19 250.041L162.527 409.705c-2.722 2.865-2.651 7.378.143 10.1 2.793 2.65 7.163 2.65 9.956 0l164.75-164.75c2.793-2.793 2.793-7.306 0-10.1l-164.75-164.75c-2.865-2.722-7.378-2.65-10.099.143-2.651 2.794-2.651 7.163 0 9.957l159.664 159.736z\"\n  );\n\n  $svg.appendChild($path);\n\n  return $svg;\n}\n","export function playSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-play`);\n  $svg.setAttribute(\"viewBox\", \"0 0 500 500\");\n\n  const $path = document.createElementNS(NS, \"path\");\n  $path.setAttribute(\"fill\", \"currentColor\");\n  $path.setAttribute(\n    \"d\",\n    \"M418.158 257.419L174.663 413.33c-6.017 3.919-15.708 3.772-21.291-.29-2.791-2.018-4.295-4.483-4.295-7.084V94.109c0-5.65 6.883-10.289 15.271-10.289 4.298 0 8.391 1.307 11.181 3.332l242.629 155.484c6.016 3.917 6.451 10.292.649 14.491-.216.154-.432.154-.649.292zM170.621 391.288l223.116-141.301L170.71 107.753l-.089 283.535z\"\n  );\n\n  $svg.appendChild($path);\n\n  return $svg;\n}\n","export function pauseSVG(namespace: string): SVGElement {\n  const NS = \"http://www.w3.org/2000/svg\";\n\n  const $svg = document.createElementNS(NS, \"svg\");\n  $svg.setAttribute(\"class\", `${namespace}-footer-icon-pause`);\n  $svg.setAttribute(\"viewBox\", \"0 0 500 500\");\n\n  const $path = document.createElementNS(NS, \"path\");\n  $path.setAttribute(\"fill\", \"currentColor\");\n  $path.setAttribute(\n    \"d\",\n    \"M312.491 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261zM165.257 78.261c0-6.159 4.893-11.213 11.04-11.213 6.158 0 11.211 5.054 11.211 11.213v343.478c0 6.159-5.053 11.213-11.211 11.213-6.147 0-11.04-5.054-11.04-11.213V78.261z\"\n  );\n\n  $svg.appendChild($path);\n\n  return $svg;\n}\n","import { sidebarSVG } from \"./icons/sidebar\";\nimport { arrowLeftSVG } from \"./icons/arrow-left\";\nimport { arrowRightSVG } from \"./icons/arrow-right\";\nimport { playSVG } from \"./icons/play\";\nimport { pauseSVG } from \"./icons/pause\";\n\nimport type { ReadonlyTeleBox } from \"@netless/window-manager\";\nimport LazyLoad from \"vanilla-lazyload\";\nimport { SideEffectManager } from \"side-effect-manager\";\n\nexport interface DocsViewerPage {\n  src: string;\n  height: number;\n  width: number;\n  thumbnail?: string;\n}\n\nexport interface DocsViewerConfig {\n  readonly: boolean;\n  box: ReadonlyTeleBox;\n  pages: DocsViewerPage[];\n  onNewPageIndex: (index: number) => void;\n  onPlay?: () => void;\n}\n\nexport class DocsViewer {\n  public constructor({ readonly, box, pages, onNewPageIndex, onPlay }: DocsViewerConfig) {\n    if (pages.length <= 0) {\n      throw new Error(\"[DocsViewer] Empty pages.\");\n    }\n\n    this.readonly = readonly;\n    this.box = box;\n    this.pages = pages;\n    this.onNewPageIndex = onNewPageIndex;\n    this.onPlay = onPlay;\n\n    this.render();\n  }\n\n  protected readonly: boolean;\n  protected pages: DocsViewerPage[];\n  protected box: ReadonlyTeleBox;\n  protected onNewPageIndex: (index: number) => void;\n  protected onPlay?: () => void;\n\n  public $content!: HTMLElement;\n  public $preview!: HTMLElement;\n  public $previewMask!: HTMLElement;\n  public $footer!: HTMLElement;\n  public $pageNumberInput!: HTMLInputElement;\n\n  public pageIndex = 0;\n\n  public mount(): void {\n    this.box.mountContent(this.$content);\n    this.box.mountFooter(this.$footer);\n\n    this.sideEffect.add(() => {\n      const previewLazyLoad = new LazyLoad({\n        container: this.$preview,\n        elements_selector: `.${this.wrapClassName(\"preview-page>img\")}`,\n      });\n      return () => previewLazyLoad.destroy();\n    }, \"preview-lazyload\");\n  }\n\n  public unmount(): void {\n    this.$content.remove();\n    this.$footer.remove();\n  }\n\n  public setReadonly(readonly: boolean): void {\n    if (this.readonly !== readonly) {\n      this.readonly = readonly;\n\n      this.$content.classList.toggle(this.wrapClassName(\"readonly\"), readonly);\n\n      this.$footer.classList.toggle(this.wrapClassName(\"readonly\"), readonly);\n\n      this.$pageNumberInput.disabled = readonly;\n    }\n  }\n\n  public destroy(): void {\n    this.sideEffect.flushAll();\n    this.unmount();\n  }\n\n  public setPageIndex(pageIndex: number): void {\n    if (!Number.isNaN(pageIndex)) {\n      this.pageIndex = pageIndex;\n      this.$pageNumberInput.value = String(pageIndex + 1);\n    }\n  }\n\n  public setSmallBox(isSmallBox: boolean): void {\n    if (this.isSmallBox !== isSmallBox) {\n      this.isSmallBox = isSmallBox;\n      this.$footer.classList.toggle(this.wrapClassName(\"float-footer\"), isSmallBox);\n    }\n  }\n\n  public render(): HTMLElement {\n    this.renderContent();\n    this.renderFooter();\n    return this.$content;\n  }\n\n  protected renderContent(): HTMLElement {\n    if (!this.$content) {\n      const $content = document.createElement(\"div\");\n      $content.className = this.wrapClassName(\"content\");\n      this.$content = $content;\n\n      if (this.readonly) {\n        $content.classList.add(this.wrapClassName(\"readonly\"));\n      }\n\n      $content.appendChild(this.renderPreviewMask());\n      $content.appendChild(this.renderPreview());\n    }\n    return this.$content;\n  }\n\n  protected renderPreview(): HTMLElement {\n    if (!this.$preview) {\n      const $preview = document.createElement(\"div\");\n      $preview.className = this.wrapClassName(\"preview\") + \" tele-fancy-scrollbar\";\n      this.$preview = $preview;\n\n      const pageClassName = this.wrapClassName(\"preview-page\");\n      const pageNameClassName = this.wrapClassName(\"preview-page-name\");\n      this.pages.forEach((page, i) => {\n        const previewSRC = page.thumbnail ?? (page.src.startsWith(\"ppt\") ? void 0 : page.src);\n        if (!previewSRC) {\n          return;\n        }\n\n        const pageIndex = String(i);\n\n        const $page = document.createElement(\"a\");\n        $page.className = pageClassName + \" \" + this.wrapClassName(`preview-page-${i}`);\n        $page.setAttribute(\"href\", \"#\");\n        $page.dataset.pageIndex = pageIndex;\n\n        const $name = document.createElement(\"span\");\n        $name.className = pageNameClassName;\n        $name.textContent = String(i + 1);\n        $name.dataset.pageIndex = pageIndex;\n\n        const $img = document.createElement(\"img\");\n        $img.width = page.width;\n        $img.height = page.height;\n        $img.dataset.src = previewSRC;\n        $img.dataset.pageIndex = pageIndex;\n\n        $page.appendChild($img);\n        $page.appendChild($name);\n        $preview.appendChild($page);\n      });\n\n      this.sideEffect.addEventListener($preview, \"click\", ev => {\n        if (this.readonly) {\n          return;\n        }\n        const pageIndex = (ev.target as HTMLElement).dataset?.pageIndex;\n        if (pageIndex) {\n          ev.preventDefault();\n          ev.stopPropagation();\n          ev.stopImmediatePropagation();\n          this.onNewPageIndex(Number(pageIndex));\n          this.togglePreview(false);\n        }\n      });\n    }\n\n    return this.$preview;\n  }\n\n  protected renderPreviewMask(): HTMLElement {\n    if (!this.$previewMask) {\n      this.$previewMask = document.createElement(\"div\");\n      this.$previewMask.className = this.wrapClassName(\"preview-mask\");\n      this.sideEffect.addEventListener(this.$previewMask, \"click\", ev => {\n        if (this.readonly) {\n          return;\n        }\n        if (ev.target === this.$previewMask) {\n          this.togglePreview(false);\n        }\n      });\n    }\n    return this.$previewMask;\n  }\n\n  protected renderFooter(): HTMLElement {\n    if (!this.$footer) {\n      const $footer = document.createElement(\"div\");\n      $footer.className = this.wrapClassName(\"footer\");\n      this.$footer = $footer;\n\n      if (this.readonly) {\n        $footer.classList.add(this.wrapClassName(\"readonly\"));\n      }\n\n      if (this.isSmallBox) {\n        $footer.classList.add(this.wrapClassName(\"float-footer\"));\n      }\n\n      if (this.pages.some(page => page.thumbnail || !page.src.startsWith(\"ppt\"))) {\n        const $btnSidebar = this.renderFooterBtn(\"btn-sidebar\", sidebarSVG(this.namespace));\n        this.sideEffect.addEventListener($btnSidebar, \"click\", () => {\n          if (this.readonly) {\n            return;\n          }\n          this.togglePreview();\n        });\n        this.$footer.appendChild($btnSidebar);\n      }\n\n      const $pageJumps = document.createElement(\"div\");\n      $pageJumps.className = this.wrapClassName(\"page-jumps\");\n\n      const $btnPageBack = this.renderFooterBtn(\"btn-page-back\", arrowLeftSVG(this.namespace));\n      this.sideEffect.addEventListener($btnPageBack, \"click\", () => {\n        if (this.readonly) {\n          return;\n        }\n        this.onNewPageIndex(this.pageIndex - 1);\n      });\n      $pageJumps.appendChild($btnPageBack);\n\n      if (this.onPlay) {\n        const $btnPlay = this.renderFooterBtn(\n          \"btn-page-play\",\n          playSVG(this.namespace),\n          pauseSVG(this.namespace)\n        );\n        const returnPlay = (): void => {\n          this.sideEffect.setTimeout(\n            () => {\n              $btnPlay.classList.toggle(this.wrapClassName(\"footer-btn-playing\"), false);\n            },\n            500,\n            \"returnPlay\"\n          );\n        };\n        this.sideEffect.addEventListener($btnPlay, \"click\", () => {\n          if (this.readonly) {\n            return;\n          }\n          $btnPlay.classList.toggle(this.wrapClassName(\"footer-btn-playing\"), true);\n          if (this.onPlay) {\n            this.onPlay();\n          }\n          returnPlay();\n        });\n\n        $pageJumps.appendChild($btnPlay);\n      }\n\n      const $btnPageNext = this.renderFooterBtn(\"btn-page-next\", arrowRightSVG(this.namespace));\n      this.sideEffect.addEventListener($btnPageNext, \"click\", () => {\n        if (this.readonly) {\n          return;\n        }\n        this.onNewPageIndex(this.pageIndex + 1);\n      });\n      $pageJumps.appendChild($btnPageNext);\n\n      const $pageNumber = document.createElement(\"div\");\n      $pageNumber.className = this.wrapClassName(\"page-number\");\n\n      const $pageNumberInput = document.createElement(\"input\");\n      $pageNumberInput.className = this.wrapClassName(\"page-number-input\");\n      $pageNumberInput.value = String(this.pageIndex + 1);\n      if (this.readonly) {\n        $pageNumberInput.disabled = true;\n      }\n      this.$pageNumberInput = $pageNumberInput;\n      this.sideEffect.addEventListener($pageNumberInput, \"change\", () => {\n        if (this.readonly) {\n          return;\n        }\n        if ($pageNumberInput.value) {\n          this.onNewPageIndex(Number($pageNumberInput.value) - 1);\n        }\n      });\n\n      const $totalPage = document.createElement(\"span\");\n      $totalPage.textContent = \" / \" + this.pages.length;\n\n      $pageNumber.appendChild($pageNumberInput);\n      $pageNumber.appendChild($totalPage);\n\n      this.$footer.appendChild($pageJumps);\n      this.$footer.appendChild($pageNumber);\n    }\n    return this.$footer;\n  }\n\n  protected renderFooterBtn(\n    className: string,\n    $icon: SVGElement,\n    $iconActive?: SVGElement\n  ): HTMLButtonElement {\n    const $btn = document.createElement(\"button\");\n    $btn.className = this.wrapClassName(\"footer-btn\") + \" \" + this.wrapClassName(className);\n\n    $btn.appendChild($icon);\n\n    if ($iconActive) {\n      $btn.appendChild($iconActive);\n    }\n\n    return $btn;\n  }\n\n  protected togglePreview(isShowPreview?: boolean): void {\n    this.isShowPreview = isShowPreview ?? !this.isShowPreview;\n    this.$content.classList.toggle(this.wrapClassName(\"preview-active\"), this.isShowPreview);\n    if (this.isShowPreview) {\n      const $previewPage = this.$preview.querySelector<HTMLElement>(\n        \".\" + this.wrapClassName(`preview-page-${this.pageIndex}`)\n      );\n      if ($previewPage) {\n        this.$preview.scrollTo({\n          top: $previewPage.offsetTop - 16,\n        });\n      }\n    }\n  }\n\n  protected wrapClassName(className: string): string {\n    return `${this.namespace}-${className}`;\n  }\n\n  protected namespace = \"netless-app-docs-viewer\";\n\n  protected isShowPreview = false;\n\n  protected isSmallBox = false;\n\n  protected sideEffect = new SideEffectManager();\n}\n","export function clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(value, min), max);\n}\n\nexport function flattenEvent(ev: MouseEvent | TouchEvent): MouseEvent | Touch {\n  return (ev as TouchEvent).touches ? (ev as TouchEvent).touches[0] : (ev as MouseEvent);\n}\n\nexport function preventEvent(ev: Event): void {\n  ev.stopPropagation();\n  if (ev.cancelable) {\n    ev.preventDefault();\n  }\n}\n","import type { AnimationMode, ReadonlyTeleBox } from \"@netless/window-manager\";\nimport type { View, Size, Camera } from \"white-web-sdk\";\nimport LazyLoad from \"vanilla-lazyload\";\nimport type { DebouncedFunction, Options } from \"debounce-fn\";\nimport debounceFn from \"debounce-fn\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport type { DocsViewerPage } from \"../DocsViewer\";\nimport { DocsViewer } from \"../DocsViewer\";\nimport { clamp, flattenEvent, preventEvent } from \"../utils/helpers\";\n\nconst SCROLLBAR_MIN_HEIGHT = 30;\n\nconst RATIO_BASE_CONTAINER_HEIGHT = 640;\n\nexport interface StaticDocsViewerConfig {\n  whiteboardView: View;\n  readonly: boolean;\n  box: ReadonlyTeleBox;\n  pages: DocsViewerPage[];\n  pagesSize: { width: number; height: number };\n  mountWhiteboard: (dom: HTMLDivElement) => void;\n  /** Scroll Top of the original page */\n  pageScrollTop?: number;\n  onUserScroll?: (pageScrollTop: number) => void;\n}\n\nexport class StaticDocsViewer {\n  public constructor({\n    whiteboardView,\n    readonly,\n    box,\n    pages,\n    pagesSize,\n    pageScrollTop = 0,\n    mountWhiteboard,\n    onUserScroll,\n  }: StaticDocsViewerConfig) {\n    this.whiteboardView = whiteboardView;\n    this.readonly = readonly;\n    this.box = box;\n    this.pages = pages;\n    this.pageScrollTop = pageScrollTop;\n    this.pagesSize = pagesSize;\n    this.mountWhiteboard = mountWhiteboard;\n    this.onUserScroll = onUserScroll;\n\n    this.viewer = new DocsViewer({\n      readonly,\n      box,\n      pages,\n      onNewPageIndex: this.onNewPageIndex,\n    });\n\n    this.render();\n  }\n\n  protected readonly: boolean;\n  protected pages: DocsViewerPage[];\n  protected box: ReadonlyTeleBox;\n  protected whiteboardView: View;\n  protected mountWhiteboard: (dom: HTMLDivElement) => void;\n\n  public pageScrollTop: number;\n  public pagesSize: { width: number; height: number };\n  public onUserScroll?: (pageScrollTop: number) => void;\n\n  public viewer: DocsViewer;\n\n  public $pages!: HTMLElement;\n  public $whiteboardView!: HTMLDivElement;\n  public $scrollbar!: HTMLElement;\n\n  public mount(): this {\n    this.viewer.mount();\n\n    this.sideEffect.add(() => {\n      const contentLazyLoad = new LazyLoad({\n        container: this.$pages,\n        elements_selector: `.${this.wrapClassName(\"page\")}`,\n      });\n      return () => contentLazyLoad.destroy();\n    }, \"page-lazyload\");\n\n    this.setupWhiteboardCamera();\n\n    this.sideEffect.setTimeout(() => {\n      if (this.pageScrollTop !== 0) {\n        this.pageScrollTo(this.pageScrollTop);\n      }\n    }, 1000);\n\n    // add event listener after scrollTop is set\n    this.setupScrollTopEvent();\n\n    this.sideEffect.add(() => {\n      const handler = this.renderRatioHeight.bind(this);\n      this.box.events.on(\"visual_resize\", handler);\n      return () => this.box.events.off(\"visual_resize\", handler);\n    });\n\n    return this;\n  }\n\n  public unmount(): this {\n    this.viewer.unmount();\n    return this;\n  }\n\n  public setReadonly(readonly: boolean): void {\n    if (this.readonly !== readonly) {\n      this.readonly = readonly;\n      this.viewer.setReadonly(readonly);\n    }\n  }\n\n  public destroy(): void {\n    this.sideEffect.flushAll();\n    this.onUserScroll = void 0;\n    this.unmount();\n    this.viewer.destroy();\n  }\n\n  /** Sync scrollTop from writable user */\n  public syncPageScrollTop(pageScrollTop: number): void {\n    if (pageScrollTop >= 0 && Math.abs(this.pageScrollTop - pageScrollTop) > 10) {\n      this.pageScrollTo(pageScrollTop);\n    }\n  }\n\n  public render(): void {\n    this.viewer.$content.appendChild(this.renderPages());\n    this.viewer.$content.appendChild(this.renderWhiteboardView());\n    this.viewer.$content.appendChild(this.renderScrollbar());\n    this.renderRatioHeight();\n  }\n\n  protected renderRatioHeight(): void {\n    const boxHeight = this.box.absoluteHeight;\n    const isSmallBox = boxHeight <= RATIO_BASE_CONTAINER_HEIGHT;\n\n    this.viewer.setSmallBox(isSmallBox);\n\n    if (isSmallBox) {\n      const titleBarSupposedHeight = 26 / RATIO_BASE_CONTAINER_HEIGHT;\n      const titleBarActualHeight = 26 / boxHeight;\n      const footerSupposedHeight = 26 / RATIO_BASE_CONTAINER_HEIGHT;\n      const footerActualHeight = 0;\n\n      const emptySpace = Math.max(\n        (titleBarSupposedHeight +\n          footerSupposedHeight -\n          (titleBarActualHeight + footerActualHeight)) /\n          2,\n        0\n      );\n\n      if (this.box.$titleBar) {\n        const titleBarHeight = titleBarActualHeight + emptySpace;\n        this.box.$titleBar.style.height = `${titleBarHeight * 100}%`;\n      }\n\n      if (this.box.$footer) {\n        const footerHeight = footerActualHeight + emptySpace;\n        this.box.$footer.style.height = `${footerHeight * 100}%`;\n      }\n    } else {\n      if (this.box.$titleBar) {\n        const titleBarHeight = Math.max(26 / RATIO_BASE_CONTAINER_HEIGHT, 26 / boxHeight);\n        this.box.$titleBar.style.height = `${titleBarHeight * 100}%`;\n      }\n\n      if (this.box.$footer) {\n        const footerHeight = Math.max(26 / RATIO_BASE_CONTAINER_HEIGHT, 26 / boxHeight);\n        this.box.$footer.style.height = `${footerHeight * 100}%`;\n      }\n    }\n  }\n\n  protected renderPages(): HTMLElement {\n    if (!this.$pages) {\n      const $pages = document.createElement(\"div\");\n      $pages.className = this.wrapClassName(\"pages\");\n      this.$pages = $pages;\n\n      const pageClassName = this.wrapClassName(\"page\");\n      this.pages.forEach((page, i) => {\n        const $img = document.createElement(\"img\");\n        $img.className = pageClassName + \" \" + this.wrapClassName(`page-${i}`);\n        $img.draggable = false;\n        $img.width = page.width;\n        $img.height = page.height;\n        $img.dataset.src = page.src;\n        $img.dataset.pageIndex = String(i);\n\n        $pages.appendChild($img);\n      });\n    }\n    return this.$pages;\n  }\n\n  protected renderWhiteboardView(): HTMLDivElement {\n    if (!this.$whiteboardView) {\n      this.$whiteboardView = document.createElement(\"div\");\n      this.$whiteboardView.className = this.wrapClassName(\"wb-view\");\n      this.mountWhiteboard(this.$whiteboardView);\n      this.sideEffect.addEventListener(\n        this.$whiteboardView,\n        \"wheel\",\n        ev => {\n          preventEvent(ev);\n          if (!this.readonly) {\n            this.pageScrollTo(this.pageScrollTop + ev.deltaY);\n            this.updateUserScroll();\n          }\n        },\n        { passive: false, capture: true }\n      );\n      this.sideEffect.addEventListener(\n        this.$whiteboardView,\n        \"touchmove\",\n        ev => {\n          if (this.readonly || ev.touches.length <= 1) {\n            return;\n          }\n          this.updateUserScroll();\n        },\n        { passive: true, capture: true }\n      );\n    }\n    return this.$whiteboardView;\n  }\n\n  protected renderScrollbar(): HTMLElement {\n    if (!this.$scrollbar) {\n      const $scrollbar = document.createElement(\"button\");\n      this.$scrollbar = $scrollbar;\n      $scrollbar.className = this.wrapClassName(\"scrollbar\");\n      $scrollbar.style.minHeight = `${SCROLLBAR_MIN_HEIGHT}px`;\n\n      const trackStart = (ev: MouseEvent | TouchEvent): void => {\n        if (this.readonly) {\n          return;\n        }\n\n        if ((ev as MouseEvent).button != null && (ev as MouseEvent).button !== 0) {\n          // Not left mouse\n          return;\n        }\n\n        preventEvent(ev);\n\n        this.$scrollbar.classList.toggle(this.wrapClassName(\"scrollbar-dragging\"), true);\n\n        const startTop = this.scrollTopPageToEl(this.pageScrollTop);\n        const elScrollHeight =\n          (this.whiteboardView.size.width / this.pagesSize.width) * this.pagesSize.height;\n        const { clientY: startY } = flattenEvent(ev);\n\n        const tracking = (ev: MouseEvent | TouchEvent): void => {\n          const { clientY } = flattenEvent(ev);\n          const { height: wbHeight } = this.whiteboardView.size;\n          this.elScrollTo(startTop + (clientY - startY) * (elScrollHeight / wbHeight));\n        };\n\n        const trackEnd = (): void => {\n          this.$scrollbar.classList.toggle(this.wrapClassName(\"scrollbar-dragging\"), false);\n          window.removeEventListener(\"mousemove\", tracking, true);\n          window.removeEventListener(\"touchmove\", tracking, true);\n          window.removeEventListener(\"mouseup\", trackEnd, true);\n          window.removeEventListener(\"touchend\", trackEnd, true);\n          window.removeEventListener(\"touchcancel\", trackEnd, true);\n        };\n\n        window.addEventListener(\"mousemove\", tracking, true);\n        window.addEventListener(\"touchmove\", tracking, true);\n        window.addEventListener(\"mouseup\", trackEnd, true);\n        window.addEventListener(\"touchend\", trackEnd, true);\n        window.addEventListener(\"touchcancel\", trackEnd, true);\n      };\n      this.sideEffect.addEventListener($scrollbar, \"mousedown\", trackStart);\n      this.sideEffect.addEventListener($scrollbar, \"touchstart\", trackStart);\n    }\n    return this.$scrollbar;\n  }\n\n  protected scrollTopPageToEl(pageScrollTop: number): number {\n    return pageScrollTop * (this.whiteboardView.size.width / this.pagesSize.width);\n  }\n\n  protected scrollTopElToPage(elScrollTop: number): number {\n    return elScrollTop / (this.whiteboardView.size.width / this.pagesSize.width);\n  }\n\n  /** Scroll base on DOM rect */\n  protected elScrollTo(elScrollTop: number): void {\n    this.pageScrollTo(this.scrollTopElToPage(elScrollTop));\n  }\n\n  /** Scroll base on docs size */\n  protected pageScrollTo(pageScrollTop: number): void {\n    const halfWbHeight = this.scrollTopElToPage(this.whiteboardView.size.height / 2);\n    this.whiteboardView.moveCamera({\n      centerY: clamp(\n        pageScrollTop + halfWbHeight,\n        halfWbHeight,\n        this.pagesSize.height - halfWbHeight\n      ),\n      animationMode: \"immediately\" as AnimationMode,\n    });\n  }\n\n  protected scrollToPage(index: number): void {\n    if (!this.readonly && this.$pages && !Number.isNaN(index)) {\n      index = clamp(index, 0, this.pages.length - 1);\n      const $page = this.$pages.querySelector<HTMLElement>(\n        \".\" + this.wrapClassName(`page-${index}`)\n      );\n      if ($page) {\n        const elOffsetTop = $page.offsetTop + 5;\n        this.elScrollTo(elOffsetTop);\n        this.updateUserScroll();\n      }\n    }\n  }\n\n  protected setupScrollTopEvent(): void {\n    const updatePageIndex = this.debounce(\n      () => {\n        if (this.pages.length > 0 && this.$pages) {\n          const pagesWidth = this.$pages.getBoundingClientRect().width;\n          if (pagesWidth > 0) {\n            let pageTop = 0;\n            for (let i = 0; i < this.pages.length; i += 1) {\n              pageTop += this.pages[i].height;\n              if (this.pageScrollTop <= pageTop) {\n                this.viewer.setPageIndex(i);\n                return;\n              }\n            }\n            this.viewer.setPageIndex(this.pages.length - 1);\n          }\n        }\n      },\n      { wait: 5, maxWait: 100 },\n      \"debounce-updatePageIndex\"\n    );\n\n    this.sideEffect.add(() => {\n      const handleCameraUpdate = (camera: Camera) => {\n        const { width: wbWidth, height: wbHeight } = this.whiteboardView.size;\n        const { width: pageWidth, height: pageHeight } = this.pagesSize;\n        const elScrollHeight = (wbWidth / pageWidth) * pageHeight;\n\n        const elScrollTop = this.scrollTopPageToEl(camera.centerY) - wbHeight / 2;\n        const pageScrollTop = this.scrollTopElToPage(elScrollTop);\n        this.pageScrollTop = pageScrollTop;\n\n        this.$pages.scrollTo({ top: elScrollTop });\n\n        this.setScrollbarHeight((wbHeight / elScrollHeight) * wbHeight);\n        this.$scrollbar.style.transform = `translateY(${\n          (elScrollTop / (elScrollHeight - wbHeight)) * (wbHeight - this.scrollbarHeight)\n        }px)`;\n\n        updatePageIndex();\n      };\n      this.whiteboardView.callbacks.on(\"onCameraUpdated\", handleCameraUpdate);\n      return () => this.whiteboardView.callbacks.off(\"onCameraUpdated\", handleCameraUpdate);\n    });\n  }\n\n  protected setupWhiteboardCamera(): void {\n    this.sideEffect.add(() => {\n      const handleSizeUpdate = ({ width, height }: Size): void => {\n        if (width > 0 && height > 0) {\n          const elScrollTop = this.$pages.scrollTop;\n          const pageWidth = this.pagesSize.width;\n          const ratio = pageWidth / width;\n          this.whiteboardView.moveCameraToContain({\n            originX: 0,\n            originY: elScrollTop * ratio,\n            width: pageWidth,\n            height: height * ratio,\n            animationMode: \"immediately\" as AnimationMode,\n          });\n          this.whiteboardView.setCameraBound({\n            damping: 1,\n            maxContentMode: () => width / pageWidth,\n            minContentMode: () => width / pageWidth,\n            centerX: this.pagesSize.width / 2,\n            centerY: this.pagesSize.height / 2,\n            width: this.pagesSize.width,\n            height: this.pagesSize.height,\n          });\n          this.elScrollTo(elScrollTop);\n        }\n      };\n      this.whiteboardView.callbacks.on(\"onSizeUpdated\", handleSizeUpdate);\n      return () => {\n        this.whiteboardView.callbacks.off(\"onSizeUpdated\", handleSizeUpdate);\n      };\n    }, \"whiteboard-size-update\");\n  }\n\n  protected updateUserScroll(): void {\n    window.requestAnimationFrame(() => {\n      if (this.onUserScroll) {\n        this.onUserScroll(this.pageScrollTop);\n      }\n    });\n  }\n\n  protected debounce<ArgumentsType extends unknown[], ReturnType>(\n    fn: (...args: ArgumentsType) => ReturnType,\n    options: Options,\n    disposerID?: string\n  ): DebouncedFunction<ArgumentsType, ReturnType | undefined> {\n    const dFn = debounceFn(fn, options);\n    this.sideEffect.add(() => () => dFn.cancel(), disposerID);\n    return dFn;\n  }\n\n  protected wrapClassName(className: string): string {\n    return \"netless-app-docs-viewer-static-\" + className;\n  }\n\n  protected onNewPageIndex = (index: number): void => {\n    this.scrollToPage(index);\n  };\n\n  protected sideEffect = new SideEffectManager();\n\n  protected scrollbarHeight = SCROLLBAR_MIN_HEIGHT;\n\n  protected setScrollbarHeight(elScrollbarHeight: number): void {\n    elScrollbarHeight = clamp(\n      elScrollbarHeight,\n      SCROLLBAR_MIN_HEIGHT,\n      this.whiteboardView.size.height\n    );\n    if (this.scrollbarHeight !== elScrollbarHeight) {\n      this.scrollbarHeight = elScrollbarHeight;\n      this.$scrollbar.style.height = `${elScrollbarHeight}px`;\n    }\n  }\n}\n","import type {\n  ReadonlyTeleBox,\n  View,\n  Displayer,\n  Room,\n  AnimationMode,\n} from \"@netless/window-manager\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport type { DocsViewerPage } from \"../DocsViewer\";\nimport { DocsViewer } from \"../DocsViewer\";\nimport { clamp } from \"../utils/helpers\";\n\nexport interface DynamicDocsViewerConfig {\n  displayer: Displayer;\n  whiteboardView: View;\n  getRoom(): Room | undefined;\n  readonly: boolean;\n  box: ReadonlyTeleBox;\n  pages: DocsViewerPage[];\n  mountWhiteboard: (dom: HTMLDivElement) => void;\n}\n\nexport class DynamicDocsViewer {\n  public constructor({\n    displayer,\n    whiteboardView,\n    getRoom,\n    readonly,\n    box,\n    pages,\n    mountWhiteboard,\n  }: DynamicDocsViewerConfig) {\n    this.whiteboardView = whiteboardView;\n    this.readonly = readonly;\n    this.box = box;\n    this.pages = pages;\n    this.displayer = displayer;\n    this.getWhiteboardRoom = getRoom;\n    this.mountWhiteboard = mountWhiteboard;\n\n    this.viewer = new DocsViewer({\n      readonly,\n      box,\n      pages,\n      onNewPageIndex: this.onNewPageIndex,\n      onPlay: this.onPlayPPT,\n    });\n\n    this.render();\n  }\n\n  protected sideEffect = new SideEffectManager();\n\n  protected readonly: boolean;\n  protected pages: DocsViewerPage[];\n  protected box: ReadonlyTeleBox;\n  protected whiteboardView: View;\n  protected displayer: Displayer;\n  protected getWhiteboardRoom: () => Room | undefined;\n  protected mountWhiteboard: (dom: HTMLDivElement) => void;\n\n  public viewer: DocsViewer;\n\n  public $mask!: HTMLElement;\n  public $whiteboardView!: HTMLDivElement;\n\n  public mount(): this {\n    this.viewer.mount();\n\n    const pageIndex = this.getPageIndex();\n    if (pageIndex !== 0) {\n      this.jumpToPage(pageIndex);\n    }\n\n    this.scaleDocsToFit();\n    this.sideEffect.add(() => {\n      this.whiteboardView.callbacks.on(\"onSizeUpdated\", this.scaleDocsToFit);\n      return () => {\n        this.whiteboardView.callbacks.off(\"onSizeUpdated\", this.scaleDocsToFit);\n      };\n    });\n\n    return this;\n  }\n\n  public unmount(): this {\n    this.viewer.unmount();\n    return this;\n  }\n\n  public setReadonly(readonly: boolean): void {\n    if (this.readonly !== readonly) {\n      this.readonly = readonly;\n\n      this.viewer.setReadonly(readonly);\n    }\n  }\n\n  public destroy(): void {\n    this.sideEffect.flushAll();\n    this.unmount();\n    this.viewer.destroy();\n  }\n\n  public getPageIndex(): number {\n    return this.displayer.state.sceneState.index;\n  }\n\n  public jumpToPage(index: number, reset?: boolean): void {\n    index = clamp(index, 0, this.pages.length - 1);\n    if (index !== this.getPageIndex()) {\n      const room = this.getWhiteboardRoom();\n      if (room) {\n        room.setSceneIndex(index);\n        this.scaleDocsToFit();\n      }\n    }\n    if (index !== this.viewer.pageIndex) {\n      this.viewer.setPageIndex(index);\n    }\n    if (reset) {\n      const room = this.getWhiteboardRoom();\n      if (room) {\n        room.setGlobalState({ __pptState: undefined });\n      }\n    }\n  }\n\n  public onPlayPPT = (): void => {\n    const room = this.getWhiteboardRoom();\n    if (room) {\n      room.pptNextStep();\n    }\n  };\n\n  public render(): void {\n    this.viewer.$content.appendChild(this.renderMask());\n    this.viewer.$content.appendChild(this.renderWhiteboardView());\n    this.sideEffect.addEventListener(window, \"keydown\", ev => {\n      if (this.box.focus) {\n        switch (ev.key) {\n          case \"ArrowUp\":\n          case \"ArrowLeft\": {\n            this.jumpToPage(this.getPageIndex() - 1, true);\n            break;\n          }\n          case \"ArrowRight\":\n          case \"ArrowDown\": {\n            this.getWhiteboardRoom()?.pptNextStep();\n            break;\n          }\n          default: {\n            break;\n          }\n        }\n      }\n    });\n  }\n\n  protected renderMask(): HTMLElement {\n    if (!this.$mask) {\n      const $mask = document.createElement(\"div\");\n      $mask.className = this.wrapClassName(\"mask\");\n      this.$mask = $mask;\n\n      const $back = document.createElement(\"button\");\n      $back.className = this.wrapClassName(\"back\");\n\n      const $next = document.createElement(\"button\");\n      $next.className = this.wrapClassName(\"next\");\n\n      // this.$mask.appendChild($back)\n      // this.$mask.appendChild($next)\n    }\n    return this.$mask;\n  }\n\n  protected renderWhiteboardView(): HTMLDivElement {\n    if (!this.$whiteboardView) {\n      this.$whiteboardView = document.createElement(\"div\");\n      this.$whiteboardView.className = this.wrapClassName(\"wb-view\");\n      this.sideEffect.addEventListener(this.$whiteboardView, \"click\", ev => {\n        const room = this.getWhiteboardRoom();\n        if (room && room.state.memberState.currentApplianceName === \"clicker\") {\n          for (let el = ev.target as HTMLElement | null; el; el = el.parentElement) {\n            if (el.classList?.contains(\"ppt-event-source\")) {\n              return;\n            }\n          }\n          room.pptNextStep();\n        }\n      });\n      this.mountWhiteboard(this.$whiteboardView);\n    }\n    return this.$whiteboardView;\n  }\n\n  protected _scaleDocsToFitImpl = (): void => {\n    const page = this.pages[this.getPageIndex()];\n    if (page) {\n      this.whiteboardView.moveCameraToContain({\n        originX: -page.width / 2,\n        originY: -page.height / 2,\n        width: page.width,\n        height: page.height,\n        animationMode: \"immediately\" as AnimationMode,\n      });\n    }\n  };\n\n  protected _scaleDocsToFitDebounced = (): void => {\n    this.sideEffect.setTimeout(this._scaleDocsToFitImpl, 1000, \"_scaleDocsToFitDebounced\");\n  };\n\n  protected scaleDocsToFit = (): void => {\n    this._scaleDocsToFitImpl();\n    this._scaleDocsToFitDebounced();\n  };\n\n  protected onNewPageIndex = (index: number): void => {\n    this.jumpToPage(index, true);\n  };\n\n  protected wrapClassName(className: string): string {\n    return \"netless-app-docs-viewer-dynamic-\" + className;\n  }\n}\n","import styles from \"./style.scss?inline\";\n\nimport type { NetlessApp, AppContext, ReadonlyTeleBox, Room } from \"@netless/window-manager\";\nimport type { View, Size } from \"white-web-sdk\";\nimport { StaticDocsViewer } from \"./StaticDocsViewer\";\nimport type { DocsViewerPage } from \"./DocsViewer\";\nimport { DynamicDocsViewer } from \"./DynamicDocsViewer\";\nimport { kind } from \"./constants\";\n\nexport type { DocsViewerPage } from \"./DocsViewer\";\n\nexport interface NetlessAppStaticDocsViewerAttributes {\n  /** ScrollTop base on the real page size */\n  pageScrollTop?: number;\n}\n\nexport interface NetlessAppDynamicDocsViewerAttributes {}\n\nconst NetlessAppDocsViewer: NetlessApp<\n  NetlessAppStaticDocsViewerAttributes | NetlessAppDynamicDocsViewerAttributes\n> = {\n  kind,\n  setup(context) {\n    const box = context.getBox();\n\n    const scenes = context.getScenes();\n    if (!scenes) {\n      throw new Error(\"[Docs Viewer]: scenes not found.\");\n    }\n\n    const whiteboardView = context.getView();\n    if (!whiteboardView) {\n      throw new Error(\"[Docs Viewer]: no whiteboard view.\");\n    }\n\n    const pages = scenes\n      .map(({ ppt }): DocsViewerPage | null =>\n        ppt\n          ? {\n              width: ppt.width,\n              height: ppt.height,\n              src: ppt.src,\n              thumbnail: ppt.previewURL,\n            }\n          : null\n      )\n      .filter((page): page is DocsViewerPage => Boolean(page));\n\n    if (pages.length <= 0) {\n      throw new Error(\"[Docs Viewer]: empty scenes.\");\n    }\n\n    box.mountStyles(styles);\n\n    if (pages[0].src.startsWith(\"ppt\")) {\n      setupDynamicDocsViewer(\n        context as AppContext<NetlessAppDynamicDocsViewerAttributes>,\n        whiteboardView,\n        box,\n        pages\n      );\n    } else {\n      setupStaticDocsViewer(\n        context as AppContext<NetlessAppStaticDocsViewerAttributes>,\n        whiteboardView,\n        box,\n        pages\n      );\n    }\n  },\n};\n\nexport default NetlessAppDocsViewer;\n\nfunction setupStaticDocsViewer(\n  context: AppContext<NetlessAppStaticDocsViewerAttributes>,\n  whiteboardView: View,\n  box: ReadonlyTeleBox,\n  pages: DocsViewerPage[]\n): void {\n  const pagesSize = {\n    width: pages[0].width,\n    height: pages.reduce((height, page) => height + page.height * (pages[0].width / page.width), 0),\n  };\n\n  const docsViewer = new StaticDocsViewer({\n    whiteboardView,\n    readonly: box.readonly,\n    box,\n    pages: pages,\n    pagesSize,\n    pageScrollTop: context.getAttributes()?.pageScrollTop,\n    mountWhiteboard: context.mountView.bind(context),\n    onUserScroll: pageScrollTop => {\n      if (context.getAttributes()?.pageScrollTop !== pageScrollTop && !box.readonly) {\n        context.updateAttributes([\"pageScrollTop\"], pageScrollTop);\n      }\n    },\n  }).mount();\n\n  if (import.meta.env.DEV) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).docsViewer = docsViewer;\n  }\n\n  context.emitter.on(\"attributesUpdate\", attributes => {\n    if (attributes) {\n      if (attributes.pageScrollTop != null) {\n        docsViewer.syncPageScrollTop(attributes.pageScrollTop);\n      }\n    }\n  });\n\n  box.events.on(\"readonly\", readonly => {\n    docsViewer.setReadonly(readonly);\n  });\n}\n\nfunction setupDynamicDocsViewer(\n  context: AppContext<NetlessAppDynamicDocsViewerAttributes>,\n  whiteboardView: View,\n  box: ReadonlyTeleBox,\n  pages: DocsViewerPage[]\n): void {\n  whiteboardView.disableCameraTransform = true;\n\n  const displayer = context.getDisplayer();\n\n  const docsViewer = new DynamicDocsViewer({\n    displayer,\n    whiteboardView,\n    getRoom: () => (context.getIsWritable() ? (context.getDisplayer() as Room) : undefined),\n    readonly: box.readonly,\n    box,\n    pages,\n    mountWhiteboard: context.mountView.bind(context),\n  }).mount();\n\n  context.mountView(docsViewer.$whiteboardView);\n\n  if (context.isAddApp) {\n    whiteboardView.callbacks.once(\n      \"onSizeUpdated\",\n      ({ width: contentWidth, height: contentHeight }: Size) => {\n        if (pages.length > 0 && box.state !== \"maximized\") {\n          const { width: pageWidth, height: pageHeight } = pages[0];\n          const preferHeight = (pageHeight / pageWidth) * contentWidth;\n          const diff = preferHeight - contentHeight;\n          if (diff !== 0 && context.getIsWritable()) {\n            context.emitter.emit(\"setBoxSize\", {\n              width: box.width,\n              height: box.height + diff / box.containerRect.height,\n            });\n          }\n        }\n      }\n    );\n  }\n\n  if (import.meta.env.DEV) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (window as any).docsViewer = docsViewer;\n  }\n\n  context.emitter.on(\"sceneStateChange\", sceneState => {\n    docsViewer.jumpToPage(sceneState.index);\n  });\n\n  box.events.on(\"readonly\", readonly => {\n    docsViewer.setReadonly(readonly);\n  });\n}\n","export const kind = \"DocsViewer\";\n"],"names":["mimicFn","SideEffectManager"],"mappings":"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"}