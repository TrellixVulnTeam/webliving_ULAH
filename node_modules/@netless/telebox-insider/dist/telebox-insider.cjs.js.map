{"version":3,"file":"telebox-insider.cjs.js","sources":["../node_modules/eventemitter3/index.js","../node_modules/stylefire/node_modules/tslib/tslib.es6.js","../node_modules/framesync/dist/framesync.es.js","../node_modules/style-value-types/node_modules/tslib/tslib.es6.js","../node_modules/style-value-types/dist/style-value-types.es.js","../node_modules/stylefire/dist/stylefire.es.js","../node_modules/shallowequal/index.js","../node_modules/side-effect-manager/dist/side-effect-manager.es.js","../node_modules/value-enhancer/dist/value-enhancer.es.js","../src/TeleBox/constants.ts","../src/utils.ts","../src/TeleTitleBar/DefaultTitleBar/index.ts","../src/TeleBox/index.ts","../src/TeleBoxReact/utils.ts","../src/TeleBoxManager/constants.ts","../src/TeleBoxCollector/index.ts","../src/TeleBoxManager/MaxTitleBar/index.ts","../src/TeleBoxManager/index.ts","../src/TeleBoxReact/index.tsx"],"sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { invariant } from 'hey-listen';\n\nvar prevTime = 0;\nvar onNextFrame = typeof window !== 'undefined' && window.requestAnimationFrame !== undefined ? function (callback) {\n    return window.requestAnimationFrame(callback);\n} : function (callback) {\n    var timestamp = Date.now();\n    var timeToCall = Math.max(0, 16.7 - (timestamp - prevTime));\n    prevTime = timestamp + timeToCall;\n    setTimeout(function () {\n        return callback(prevTime);\n    }, timeToCall);\n};\n\nvar createStep = function (setRunNextFrame) {\n    var processToRun = [];\n    var processToRunNextFrame = [];\n    var numThisFrame = 0;\n    var isProcessing = false;\n    var i = 0;\n    var cancelled = new WeakSet();\n    var toKeepAlive = new WeakSet();\n    var renderStep = {\n        cancel: function (process) {\n            var indexOfCallback = processToRunNextFrame.indexOf(process);\n            cancelled.add(process);\n            if (indexOfCallback !== -1) {\n                processToRunNextFrame.splice(indexOfCallback, 1);\n            }\n        },\n        process: function (frame) {\n            var _a;\n            isProcessing = true;\n            _a = [processToRunNextFrame, processToRun], processToRun = _a[0], processToRunNextFrame = _a[1];\n            processToRunNextFrame.length = 0;\n            numThisFrame = processToRun.length;\n            if (numThisFrame) {\n                var process_1;\n                for (i = 0; i < numThisFrame; i++) {\n                    process_1 = processToRun[i];\n                    process_1(frame);\n                    if (toKeepAlive.has(process_1) === true && !cancelled.has(process_1)) {\n                        renderStep.schedule(process_1);\n                        setRunNextFrame(true);\n                    }\n                }\n            }\n            isProcessing = false;\n        },\n        schedule: function (process, keepAlive, immediate) {\n            if (keepAlive === void 0) {\n                keepAlive = false;\n            }\n            if (immediate === void 0) {\n                immediate = false;\n            }\n            invariant(typeof process === \"function\", \"Argument must be a function\");\n            var addToCurrentBuffer = immediate && isProcessing;\n            var buffer = addToCurrentBuffer ? processToRun : processToRunNextFrame;\n            cancelled.delete(process);\n            if (keepAlive) toKeepAlive.add(process);\n            if (buffer.indexOf(process) === -1) {\n                buffer.push(process);\n                if (addToCurrentBuffer) numThisFrame = processToRun.length;\n            }\n        }\n    };\n    return renderStep;\n};\n\nvar maxElapsed = 40;\nvar defaultElapsed = 1 / 60 * 1000;\nvar useDefaultElapsed = true;\nvar willRunNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n    delta: 0,\n    timestamp: 0\n};\nvar stepsOrder = [\"read\", \"update\", \"preRender\", \"render\", \"postRender\"];\nvar setWillRunNextFrame = function (willRun) {\n    return willRunNextFrame = willRun;\n};\nvar steps = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = createStep(setWillRunNextFrame);\n    return acc;\n}, {});\nvar sync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    var step = steps[key];\n    acc[key] = function (process, keepAlive, immediate) {\n        if (keepAlive === void 0) {\n            keepAlive = false;\n        }\n        if (immediate === void 0) {\n            immediate = false;\n        }\n        if (!willRunNextFrame) startLoop();\n        step.schedule(process, keepAlive, immediate);\n        return process;\n    };\n    return acc;\n}, {});\nvar cancelSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = steps[key].cancel;\n    return acc;\n}, {});\nvar processStep = function (stepId) {\n    return steps[stepId].process(frame);\n};\nvar processFrame = function (timestamp) {\n    willRunNextFrame = false;\n    frame.delta = useDefaultElapsed ? defaultElapsed : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n    if (!useDefaultElapsed) defaultElapsed = frame.delta;\n    frame.timestamp = timestamp;\n    isProcessing = true;\n    stepsOrder.forEach(processStep);\n    isProcessing = false;\n    if (willRunNextFrame) {\n        useDefaultElapsed = false;\n        onNextFrame(processFrame);\n    }\n};\nvar startLoop = function () {\n    willRunNextFrame = true;\n    useDefaultElapsed = true;\n    if (!isProcessing) onNextFrame(processFrame);\n};\nvar getFrameData = function () {\n    return frame;\n};\n\nexport default sync;\nexport { cancelSync, getFrameData };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { __assign } from 'tslib';\n\nvar clamp = function (min, max) { return function (v) {\r\n    return Math.max(Math.min(v, max), min);\r\n}; };\r\nvar sanitize = function (v) { return (v % 1 ? Number(v.toFixed(5)) : v); };\r\nvar floatRegex = /(-)?(\\d[\\d\\.]*)/g;\r\nvar colorRegex = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2,3}\\s*\\/*\\s*[\\d\\.]+%?\\))/gi;\r\nvar singleColorRegex = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2,3}\\s*\\/*\\s*[\\d\\.]+%?\\))$/i;\n\nvar number = {\r\n    test: function (v) { return typeof v === 'number'; },\r\n    parse: parseFloat,\r\n    transform: function (v) { return v; }\r\n};\r\nvar alpha = __assign(__assign({}, number), { transform: clamp(0, 1) });\r\nvar scale = __assign(__assign({}, number), { default: 1 });\n\nvar createUnitType = function (unit) { return ({\r\n    test: function (v) {\r\n        return typeof v === 'string' && v.endsWith(unit) && v.split(' ').length === 1;\r\n    },\r\n    parse: parseFloat,\r\n    transform: function (v) { return \"\" + v + unit; }\r\n}); };\r\nvar degrees = createUnitType('deg');\r\nvar percent = createUnitType('%');\r\nvar px = createUnitType('px');\r\nvar vh = createUnitType('vh');\r\nvar vw = createUnitType('vw');\r\nvar progressPercentage = __assign(__assign({}, percent), { parse: function (v) { return percent.parse(v) / 100; }, transform: function (v) { return percent.transform(v * 100); } });\n\nvar getValueFromFunctionString = function (value) {\r\n    return value.substring(value.indexOf('(') + 1, value.lastIndexOf(')'));\r\n};\r\nvar clampRgbUnit = clamp(0, 255);\r\nvar isRgba = function (v) { return v.red !== undefined; };\r\nvar isHsla = function (v) { return v.hue !== undefined; };\r\nfunction getValuesAsArray(value) {\r\n    return getValueFromFunctionString(value)\r\n        .replace(/(,|\\/)/g, ' ')\r\n        .split(/ \\s*/);\r\n}\r\nvar splitColorValues = function (terms) {\r\n    return function (v) {\r\n        if (typeof v !== 'string')\r\n            return v;\r\n        var values = {};\r\n        var valuesArray = getValuesAsArray(v);\r\n        for (var i = 0; i < 4; i++) {\r\n            values[terms[i]] =\r\n                valuesArray[i] !== undefined ? parseFloat(valuesArray[i]) : 1;\r\n        }\r\n        return values;\r\n    };\r\n};\r\nvar rgbaTemplate = function (_a) {\r\n    var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha = _b === void 0 ? 1 : _b;\r\n    return \"rgba(\" + red + \", \" + green + \", \" + blue + \", \" + alpha + \")\";\r\n};\r\nvar hslaTemplate = function (_a) {\r\n    var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha = _b === void 0 ? 1 : _b;\r\n    return \"hsla(\" + hue + \", \" + saturation + \", \" + lightness + \", \" + alpha + \")\";\r\n};\r\nvar rgbUnit = __assign(__assign({}, number), { transform: function (v) { return Math.round(clampRgbUnit(v)); } });\r\nfunction isColorString(color, colorType) {\r\n    return color.startsWith(colorType) && singleColorRegex.test(color);\r\n}\r\nvar rgba = {\r\n    test: function (v) { return (typeof v === 'string' ? isColorString(v, 'rgb') : isRgba(v)); },\r\n    parse: splitColorValues(['red', 'green', 'blue', 'alpha']),\r\n    transform: function (_a) {\r\n        var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$1 = _b === void 0 ? 1 : _b;\r\n        return rgbaTemplate({\r\n            red: rgbUnit.transform(red),\r\n            green: rgbUnit.transform(green),\r\n            blue: rgbUnit.transform(blue),\r\n            alpha: sanitize(alpha.transform(alpha$1))\r\n        });\r\n    }\r\n};\r\nvar hsla = {\r\n    test: function (v) { return (typeof v === 'string' ? isColorString(v, 'hsl') : isHsla(v)); },\r\n    parse: splitColorValues(['hue', 'saturation', 'lightness', 'alpha']),\r\n    transform: function (_a) {\r\n        var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$1 = _b === void 0 ? 1 : _b;\r\n        return hslaTemplate({\r\n            hue: Math.round(hue),\r\n            saturation: percent.transform(sanitize(saturation)),\r\n            lightness: percent.transform(sanitize(lightness)),\r\n            alpha: sanitize(alpha.transform(alpha$1))\r\n        });\r\n    }\r\n};\r\nvar hex = __assign(__assign({}, rgba), { test: function (v) { return typeof v === 'string' && isColorString(v, '#'); }, parse: function (v) {\r\n        var r = '';\r\n        var g = '';\r\n        var b = '';\r\n        if (v.length > 4) {\r\n            r = v.substr(1, 2);\r\n            g = v.substr(3, 2);\r\n            b = v.substr(5, 2);\r\n        }\r\n        else {\r\n            r = v.substr(1, 1);\r\n            g = v.substr(2, 1);\r\n            b = v.substr(3, 1);\r\n            r += r;\r\n            g += g;\r\n            b += b;\r\n        }\r\n        return {\r\n            red: parseInt(r, 16),\r\n            green: parseInt(g, 16),\r\n            blue: parseInt(b, 16),\r\n            alpha: 1\r\n        };\r\n    } });\r\nvar color = {\r\n    test: function (v) {\r\n        return (typeof v === 'string' && singleColorRegex.test(v)) ||\r\n            isRgba(v) ||\r\n            isHsla(v);\r\n    },\r\n    parse: function (v) {\r\n        if (rgba.test(v)) {\r\n            return rgba.parse(v);\r\n        }\r\n        else if (hsla.test(v)) {\r\n            return hsla.parse(v);\r\n        }\r\n        else if (hex.test(v)) {\r\n            return hex.parse(v);\r\n        }\r\n        return v;\r\n    },\r\n    transform: function (v) {\r\n        if (isRgba(v)) {\r\n            return rgba.transform(v);\r\n        }\r\n        else if (isHsla(v)) {\r\n            return hsla.transform(v);\r\n        }\r\n        return v;\r\n    }\r\n};\n\nvar COLOR_TOKEN = '${c}';\r\nvar NUMBER_TOKEN = '${n}';\r\nvar convertNumbersToZero = function (v) {\r\n    return typeof v === 'number' ? 0 : v;\r\n};\r\nvar complex = {\r\n    test: function (v) {\r\n        if (typeof v !== 'string' || !isNaN(v))\r\n            return false;\r\n        var numValues = 0;\r\n        var foundNumbers = v.match(floatRegex);\r\n        var foundColors = v.match(colorRegex);\r\n        if (foundNumbers)\r\n            numValues += foundNumbers.length;\r\n        if (foundColors)\r\n            numValues += foundColors.length;\r\n        return numValues > 0;\r\n    },\r\n    parse: function (v) {\r\n        var input = v;\r\n        var parsed = [];\r\n        var foundColors = input.match(colorRegex);\r\n        if (foundColors) {\r\n            input = input.replace(colorRegex, COLOR_TOKEN);\r\n            parsed.push.apply(parsed, foundColors.map(color.parse));\r\n        }\r\n        var foundNumbers = input.match(floatRegex);\r\n        if (foundNumbers) {\r\n            parsed.push.apply(parsed, foundNumbers.map(number.parse));\r\n        }\r\n        return parsed;\r\n    },\r\n    createTransformer: function (prop) {\r\n        var template = prop;\r\n        var token = 0;\r\n        var foundColors = prop.match(colorRegex);\r\n        var numColors = foundColors ? foundColors.length : 0;\r\n        if (foundColors) {\r\n            for (var i = 0; i < numColors; i++) {\r\n                template = template.replace(foundColors[i], COLOR_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        var foundNumbers = template.match(floatRegex);\r\n        var numNumbers = foundNumbers ? foundNumbers.length : 0;\r\n        if (foundNumbers) {\r\n            for (var i = 0; i < numNumbers; i++) {\r\n                template = template.replace(foundNumbers[i], NUMBER_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        return function (v) {\r\n            var output = template;\r\n            for (var i = 0; i < token; i++) {\r\n                output = output.replace(i < numColors ? COLOR_TOKEN : NUMBER_TOKEN, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\r\n            }\r\n            return output;\r\n        };\r\n    },\r\n    getAnimatableNone: function (target) {\r\n        var parsedTarget = complex.parse(target);\r\n        var targetTransformer = complex.createTransformer(target);\r\n        return targetTransformer(parsedTarget.map(convertNumbersToZero));\r\n    }\r\n};\n\nexport { alpha, color, complex, degrees, hex, hsla, number, percent, progressPercentage, px, rgbUnit, rgba, scale, vh, vw };\n","import { __rest, __assign } from 'tslib';\nimport sync from 'framesync';\nimport { number, color, px, degrees, scale, alpha, progressPercentage } from 'style-value-types';\nimport { invariant } from 'hey-listen';\n\nvar createStyler = function (_a) {\n    var onRead = _a.onRead,\n        onRender = _a.onRender,\n        _b = _a.uncachedValues,\n        uncachedValues = _b === void 0 ? new Set() : _b,\n        _c = _a.useCache,\n        useCache = _c === void 0 ? true : _c;\n    return function (_a) {\n        if (_a === void 0) {\n            _a = {};\n        }\n        var props = __rest(_a, []);\n        var state = {};\n        var changedValues = [];\n        var hasChanged = false;\n        function setValue(key, value) {\n            if (key.startsWith('--')) {\n                props.hasCSSVariable = true;\n            }\n            var currentValue = state[key];\n            state[key] = value;\n            if (state[key] === currentValue) return;\n            if (changedValues.indexOf(key) === -1) {\n                changedValues.push(key);\n            }\n            if (!hasChanged) {\n                hasChanged = true;\n                sync.render(styler.render);\n            }\n        }\n        var styler = {\n            get: function (key, forceRead) {\n                if (forceRead === void 0) {\n                    forceRead = false;\n                }\n                var useCached = !forceRead && useCache && !uncachedValues.has(key) && state[key] !== undefined;\n                return useCached ? state[key] : onRead(key, props);\n            },\n            set: function (values, value) {\n                if (typeof values === 'string') {\n                    setValue(values, value);\n                } else {\n                    for (var key in values) {\n                        setValue(key, values[key]);\n                    }\n                }\n                return this;\n            },\n            render: function (forceRender) {\n                if (forceRender === void 0) {\n                    forceRender = false;\n                }\n                if (hasChanged || forceRender === true) {\n                    onRender(state, props, changedValues);\n                    hasChanged = false;\n                    changedValues.length = 0;\n                }\n                return this;\n            }\n        };\n        return styler;\n    };\n};\n\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = '$1-$2';\nvar camelToDash = function (str) {\n    return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\n\nvar camelCache = /*#__PURE__*/new Map();\nvar dashCache = /*#__PURE__*/new Map();\nvar prefixes = ['Webkit', 'Moz', 'O', 'ms', ''];\nvar numPrefixes = prefixes.length;\nvar isBrowser = typeof document !== 'undefined';\nvar testElement;\nvar setDashPrefix = function (key, prefixed) {\n    return dashCache.set(key, camelToDash(prefixed));\n};\nvar testPrefix = function (key) {\n    testElement = testElement || document.createElement('div');\n    for (var i = 0; i < numPrefixes; i++) {\n        var prefix = prefixes[i];\n        var noPrefix = prefix === '';\n        var prefixedPropertyName = noPrefix ? key : prefix + key.charAt(0).toUpperCase() + key.slice(1);\n        if (prefixedPropertyName in testElement.style || noPrefix) {\n            if (noPrefix && key === 'clipPath' && dashCache.has(key)) {\n                return;\n            }\n            camelCache.set(key, prefixedPropertyName);\n            setDashPrefix(key, \"\" + (noPrefix ? '' : '-') + camelToDash(prefixedPropertyName));\n        }\n    }\n};\nvar setServerProperty = function (key) {\n    return setDashPrefix(key, key);\n};\nvar prefixer = function (key, asDashCase) {\n    if (asDashCase === void 0) {\n        asDashCase = false;\n    }\n    var cache = asDashCase ? dashCache : camelCache;\n    if (!cache.has(key)) {\n        isBrowser ? testPrefix(key) : setServerProperty(key);\n    }\n    return cache.get(key) || key;\n};\n\nvar axes = ['', 'X', 'Y', 'Z'];\nvar order = ['translate', 'scale', 'rotate', 'skew', 'transformPerspective'];\nvar transformProps = /*#__PURE__*/order.reduce(function (acc, key) {\n    return axes.reduce(function (axesAcc, axesKey) {\n        axesAcc.push(key + axesKey);\n        return axesAcc;\n    }, acc);\n}, ['x', 'y', 'z']);\nvar transformPropDictionary = /*#__PURE__*/transformProps.reduce(function (dict, key) {\n    dict[key] = true;\n    return dict;\n}, {});\nfunction isTransformProp(key) {\n    return transformPropDictionary[key] === true;\n}\nfunction sortTransformProps(a, b) {\n    return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\nvar transformOriginProps = /*#__PURE__*/new Set(['originX', 'originY', 'originZ']);\nfunction isTransformOriginProp(key) {\n    return transformOriginProps.has(key);\n}\n\nvar int = /*#__PURE__*/__assign( /*#__PURE__*/__assign({}, number), { transform: Math.round });\nvar valueTypes = {\n    color: color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    borderWidth: px,\n    borderTopWidth: px,\n    borderRightWidth: px,\n    borderBottomWidth: px,\n    borderLeftWidth: px,\n    borderRadius: px,\n    radius: px,\n    borderTopLeftRadius: px,\n    borderTopRightRadius: px,\n    borderBottomRightRadius: px,\n    borderBottomLeftRadius: px,\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    size: px,\n    top: px,\n    right: px,\n    bottom: px,\n    left: px,\n    padding: px,\n    paddingTop: px,\n    paddingRight: px,\n    paddingBottom: px,\n    paddingLeft: px,\n    margin: px,\n    marginTop: px,\n    marginRight: px,\n    marginBottom: px,\n    marginLeft: px,\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale: scale,\n    scaleX: scale,\n    scaleY: scale,\n    scaleZ: scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    translateX: px,\n    translateY: px,\n    translateZ: px,\n    x: px,\n    y: px,\n    z: px,\n    perspective: px,\n    opacity: alpha,\n    originX: progressPercentage,\n    originY: progressPercentage,\n    originZ: px,\n    zIndex: int,\n    fillOpacity: alpha,\n    strokeOpacity: alpha,\n    numOctaves: int\n};\nvar getValueType = function (key) {\n    return valueTypes[key];\n};\nvar getValueAsType = function (value, type) {\n    return type && typeof value === 'number' ? type.transform(value) : value;\n};\n\nvar SCROLL_LEFT = 'scrollLeft';\nvar SCROLL_TOP = 'scrollTop';\nvar scrollKeys = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP]);\n\nvar blacklist = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP, 'transform']);\nvar translateAlias = {\n    x: 'translateX',\n    y: 'translateY',\n    z: 'translateZ'\n};\nfunction isCustomTemplate(v) {\n    return typeof v === 'function';\n}\nfunction buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration, allowTransformNone) {\n    if (allowTransformNone === void 0) {\n        allowTransformNone = true;\n    }\n    var transformString = '';\n    var transformHasZ = false;\n    transformKeys.sort(sortTransformProps);\n    var numTransformKeys = transformKeys.length;\n    for (var i = 0; i < numTransformKeys; i++) {\n        var key = transformKeys[i];\n        transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n        transformHasZ = key === 'z' ? true : transformHasZ;\n    }\n    if (!transformHasZ && enableHardwareAcceleration) {\n        transformString += 'translateZ(0)';\n    } else {\n        transformString = transformString.trim();\n    }\n    if (isCustomTemplate(state.transform)) {\n        transformString = state.transform(transform, transformIsDefault ? '' : transformString);\n    } else if (allowTransformNone && transformIsDefault) {\n        transformString = 'none';\n    }\n    return transformString;\n}\nfunction buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase, allowTransformNone) {\n    if (enableHardwareAcceleration === void 0) {\n        enableHardwareAcceleration = true;\n    }\n    if (styles === void 0) {\n        styles = {};\n    }\n    if (transform === void 0) {\n        transform = {};\n    }\n    if (transformOrigin === void 0) {\n        transformOrigin = {};\n    }\n    if (transformKeys === void 0) {\n        transformKeys = [];\n    }\n    if (isDashCase === void 0) {\n        isDashCase = false;\n    }\n    if (allowTransformNone === void 0) {\n        allowTransformNone = true;\n    }\n    var transformIsDefault = true;\n    var hasTransform = false;\n    var hasTransformOrigin = false;\n    for (var key in state) {\n        var value = state[key];\n        var valueType = getValueType(key);\n        var valueAsType = getValueAsType(value, valueType);\n        if (isTransformProp(key)) {\n            hasTransform = true;\n            transform[key] = valueAsType;\n            transformKeys.push(key);\n            if (transformIsDefault) {\n                if (valueType.default && value !== valueType.default || !valueType.default && value !== 0) {\n                    transformIsDefault = false;\n                }\n            }\n        } else if (isTransformOriginProp(key)) {\n            transformOrigin[key] = valueAsType;\n            hasTransformOrigin = true;\n        } else if (!blacklist.has(key) || !isCustomTemplate(valueAsType)) {\n            styles[prefixer(key, isDashCase)] = valueAsType;\n        }\n    }\n    if (hasTransform || typeof state.transform === 'function') {\n        styles.transform = buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration, allowTransformNone);\n    }\n    if (hasTransformOrigin) {\n        styles.transformOrigin = (transformOrigin.originX || '50%') + \" \" + (transformOrigin.originY || '50%') + \" \" + (transformOrigin.originZ || 0);\n    }\n    return styles;\n}\nfunction createStyleBuilder(_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.enableHardwareAcceleration,\n        enableHardwareAcceleration = _c === void 0 ? true : _c,\n        _d = _b.isDashCase,\n        isDashCase = _d === void 0 ? true : _d,\n        _e = _b.allowTransformNone,\n        allowTransformNone = _e === void 0 ? true : _e;\n    var styles = {};\n    var transform = {};\n    var transformOrigin = {};\n    var transformKeys = [];\n    return function (state) {\n        transformKeys.length = 0;\n        buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase, allowTransformNone);\n        return styles;\n    };\n}\n\nfunction onRead(key, options) {\n    var element = options.element,\n        preparseOutput = options.preparseOutput;\n    var defaultValueType = getValueType(key);\n    if (isTransformProp(key)) {\n        return defaultValueType ? defaultValueType.default || 0 : 0;\n    } else if (scrollKeys.has(key)) {\n        return element[key];\n    } else {\n        var domValue = window.getComputedStyle(element, null).getPropertyValue(prefixer(key, true)) || 0;\n        return preparseOutput && defaultValueType && defaultValueType.test(domValue) && defaultValueType.parse ? defaultValueType.parse(domValue) : domValue;\n    }\n}\nfunction onRender(state, _a, changedValues) {\n    var element = _a.element,\n        buildStyles = _a.buildStyles,\n        hasCSSVariable = _a.hasCSSVariable;\n    Object.assign(element.style, buildStyles(state));\n    if (hasCSSVariable) {\n        var numChangedValues = changedValues.length;\n        for (var i = 0; i < numChangedValues; i++) {\n            var key = changedValues[i];\n            if (key.startsWith('--')) {\n                element.style.setProperty(key, state[key]);\n            }\n        }\n    }\n    if (changedValues.indexOf(SCROLL_LEFT) !== -1) {\n        element[SCROLL_LEFT] = state[SCROLL_LEFT];\n    }\n    if (changedValues.indexOf(SCROLL_TOP) !== -1) {\n        element[SCROLL_TOP] = state[SCROLL_TOP];\n    }\n}\nvar cssStyler = /*#__PURE__*/createStyler({\n    onRead: onRead,\n    onRender: onRender,\n    uncachedValues: scrollKeys\n});\nfunction createCssStyler(element, _a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var enableHardwareAcceleration = _a.enableHardwareAcceleration,\n        allowTransformNone = _a.allowTransformNone,\n        props = __rest(_a, [\"enableHardwareAcceleration\", \"allowTransformNone\"]);\n    return cssStyler(__assign({ element: element, buildStyles: createStyleBuilder({\n            enableHardwareAcceleration: enableHardwareAcceleration,\n            allowTransformNone: allowTransformNone\n        }), preparseOutput: true }, props));\n}\n\nvar camelCaseAttributes = /*#__PURE__*/new Set(['baseFrequency', 'diffuseConstant', 'kernelMatrix', 'kernelUnitLength', 'keySplines', 'keyTimes', 'limitingConeAngle', 'markerHeight', 'markerWidth', 'numOctaves', 'targetX', 'targetY', 'surfaceScale', 'specularConstant', 'specularExponent', 'stdDeviation', 'tableValues']);\n\nvar defaultOrigin = 0.5;\nvar svgAttrsTemplate = function () {\n    return {\n        style: {}\n    };\n};\nvar progressToPixels = function (progress, length) {\n    return px.transform(progress * length);\n};\nvar unmeasured = { x: 0, y: 0, width: 0, height: 0 };\nfunction calcOrigin(origin, offset, size) {\n    return typeof origin === 'string' ? origin : px.transform(offset + size * origin);\n}\nfunction calculateSVGTransformOrigin(dimensions, originX, originY) {\n    return calcOrigin(originX, dimensions.x, dimensions.width) + \" \" + calcOrigin(originY, dimensions.y, dimensions.height);\n}\nvar svgStyleConfig = {\n    enableHardwareAcceleration: false,\n    isDashCase: false\n};\nfunction buildSVGAttrs(_a, dimensions, totalPathLength, cssBuilder, attrs, isDashCase) {\n    if (dimensions === void 0) {\n        dimensions = unmeasured;\n    }\n    if (cssBuilder === void 0) {\n        cssBuilder = createStyleBuilder(svgStyleConfig);\n    }\n    if (attrs === void 0) {\n        attrs = svgAttrsTemplate();\n    }\n    if (isDashCase === void 0) {\n        isDashCase = true;\n    }\n    var attrX = _a.attrX,\n        attrY = _a.attrY,\n        originX = _a.originX,\n        originY = _a.originY,\n        pathLength = _a.pathLength,\n        _b = _a.pathSpacing,\n        pathSpacing = _b === void 0 ? 1 : _b,\n        _c = _a.pathOffset,\n        pathOffset = _c === void 0 ? 0 : _c,\n        state = __rest(_a, [\"attrX\", \"attrY\", \"originX\", \"originY\", \"pathLength\", \"pathSpacing\", \"pathOffset\"]);\n    var style = cssBuilder(state);\n    for (var key in style) {\n        if (key === 'transform') {\n            attrs.style.transform = style[key];\n        } else {\n            var attrKey = isDashCase && !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n            attrs[attrKey] = style[key];\n        }\n    }\n    if (originX !== undefined || originY !== undefined || style.transform) {\n        attrs.style.transformOrigin = calculateSVGTransformOrigin(dimensions, originX !== undefined ? originX : defaultOrigin, originY !== undefined ? originY : defaultOrigin);\n    }\n    if (attrX !== undefined) attrs.x = attrX;\n    if (attrY !== undefined) attrs.y = attrY;\n    if (totalPathLength !== undefined && pathLength !== undefined) {\n        attrs[isDashCase ? 'stroke-dashoffset' : 'strokeDashoffset'] = progressToPixels(-pathOffset, totalPathLength);\n        attrs[isDashCase ? 'stroke-dasharray' : 'strokeDasharray'] = progressToPixels(pathLength, totalPathLength) + \" \" + progressToPixels(pathSpacing, totalPathLength);\n    }\n    return attrs;\n}\nfunction createAttrBuilder(dimensions, totalPathLength, isDashCase) {\n    if (isDashCase === void 0) {\n        isDashCase = true;\n    }\n    var attrs = svgAttrsTemplate();\n    var cssBuilder = createStyleBuilder(svgStyleConfig);\n    return function (state) {\n        return buildSVGAttrs(state, dimensions, totalPathLength, cssBuilder, attrs, isDashCase);\n    };\n}\n\nvar getDimensions = function (element) {\n    return typeof element.getBBox === 'function' ? element.getBBox() : element.getBoundingClientRect();\n};\nvar getSVGElementDimensions = function (element) {\n    try {\n        return getDimensions(element);\n    } catch (e) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n};\n\nvar isPath = function (element) {\n    return element.tagName === 'path';\n};\nvar svgStyler = /*#__PURE__*/createStyler({\n    onRead: function (key, _a) {\n        var element = _a.element;\n        key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n        if (!isTransformProp(key)) {\n            return element.getAttribute(key);\n        } else {\n            var valueType = getValueType(key);\n            return valueType ? valueType.default || 0 : 0;\n        }\n    },\n    onRender: function (state, _a) {\n        var element = _a.element,\n            buildAttrs = _a.buildAttrs;\n        var attrs = buildAttrs(state);\n        for (var key in attrs) {\n            if (key === 'style') {\n                Object.assign(element.style, attrs.style);\n            } else {\n                element.setAttribute(key, attrs[key]);\n            }\n        }\n    }\n});\nvar svg = function (element) {\n    var dimensions = getSVGElementDimensions(element);\n    var pathLength = isPath(element) && element.getTotalLength ? element.getTotalLength() : undefined;\n    return svgStyler({\n        element: element,\n        buildAttrs: createAttrBuilder(dimensions, pathLength)\n    });\n};\n\nvar viewport = /*#__PURE__*/createStyler({\n    useCache: false,\n    onRead: function (key) {\n        return key === 'scrollTop' ? window.pageYOffset : window.pageXOffset;\n    },\n    onRender: function (_a) {\n        var _b = _a.scrollTop,\n            scrollTop = _b === void 0 ? 0 : _b,\n            _c = _a.scrollLeft,\n            scrollLeft = _c === void 0 ? 0 : _c;\n        return window.scrollTo(scrollLeft, scrollTop);\n    }\n});\n\nvar cache = /*#__PURE__*/new WeakMap();\nvar isHTMLElement = function (node) {\n    return node instanceof HTMLElement || typeof node.click === 'function';\n};\nvar isSVGElement = function (node) {\n    return node instanceof SVGElement || 'ownerSVGElement' in node;\n};\nvar createDOMStyler = function (node, props) {\n    var styler;\n    if (node === window) {\n        styler = viewport(node);\n    } else if (isHTMLElement(node)) {\n        styler = createCssStyler(node, props);\n    } else if (isSVGElement(node)) {\n        styler = svg(node);\n    }\n    invariant(styler !== undefined, 'No valid node provided. Node must be HTMLElement, SVGElement or window.');\n    cache.set(node, styler);\n    return styler;\n};\nvar getStyler = function (node, props) {\n    return cache.has(node) ? cache.get(node) : createDOMStyler(node, props);\n};\nfunction index(nodeOrSelector, props) {\n    var node = typeof nodeOrSelector === 'string' ? document.querySelector(nodeOrSelector) : nodeOrSelector;\n    return getStyler(node, props);\n}\n\nexport default index;\nexport { buildSVGAttrs, buildStyleProperty, createStyler as createStylerFactory, isTransformProp, transformProps };\n","//\n\nmodule.exports = function shallowEqual(objA, objB, compare, compareContext) {\n  var ret = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n  if (ret !== void 0) {\n    return !!ret;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== \"object\" || !objA || typeof objB !== \"object\" || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n\n  // Test for A's keys different from B.\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = objA[key];\n    var valueB = objB[key];\n\n    ret = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n    if (ret === false || (ret === void 0 && valueA !== valueB)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n","const e=\"!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",s=e.length,t=Array(20),r=()=>{for(let r=0;r<20;r++)t[r]=e.charAt(Math.random()*s);return t.join(\"\")};class o{constructor(){this.disposers=new Map}add(e,s=r()){return this.flush(s),this.disposers.set(s,e()),s}addDisposer(e,s=r()){return this.flush(s),this.disposers.set(s,e),s}addEventListener(e,s,t,o,i=r()){return this.add((()=>(e.addEventListener(s,t,o),()=>e.removeEventListener(s,t,o))),i),i}setTimeout(e,s,t=r()){return this.add((()=>{const r=window.setTimeout((()=>{this.remove(t),e()}),s);return()=>window.clearTimeout(r)}),t)}setInterval(e,s,t=r()){return this.add((()=>{const t=window.setInterval(e,s);return()=>window.clearInterval(t)}),t)}remove(e){const s=this.disposers.get(e);return this.disposers.delete(e),s}flush(e){const s=this.remove(e);if(s)try{s()}catch(t){console.error(t)}}flushAll(){this.disposers.forEach((e=>{try{e()}catch(s){console.error(s)}})),this.disposers.clear()}}export{o as SideEffectManager,r as genUID};\n//# sourceMappingURL=side-effect-manager.es.js.map\n","var e=Object.defineProperty,s=(\"undefined\"!=typeof require&&require,(s,r,t)=>(((s,r,t)=>{r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t})(s,\"symbol\"!=typeof r?r+\"\":r,t),t));class r{constructor(e,r){s(this,\"_value\"),s(this,\"_beforeDestroys\"),s(this,\"_subscribers\"),this._value=e,r&&(this.compare=r)}get value(){return this._value}setValue(e,s){if(!this.compare(e,this._value)){const r=this._value;this._value=e,this._subscribers&&this._subscribers.forEach((t=>t(e,r,s)))}}reaction(e){return this._subscribers||(this._subscribers=new Set),this._subscribers.add(e),()=>{this._subscribers&&this._subscribers.delete(e)}}subscribe(e,s){const r=this.reaction(e);return e(this._value,void 0,s),r}derive(e,s,t){const i=new r(e(this.value,void 0,t),s),o=this.reaction(((s,r,t)=>{i.setValue(e(s,r,t))}));return i.addBeforeDestroy(o),i}destroy(){this._beforeDestroys&&(this._beforeDestroys.forEach((e=>e())),this._beforeDestroys.clear()),this._subscribers&&this._subscribers.clear()}addBeforeDestroy(e){return this._beforeDestroys||(this._beforeDestroys=new Set),this._beforeDestroys.add(e),()=>{this._beforeDestroys&&this._beforeDestroys.delete(e)}}compare(e,s){return e===s}}function t(e,s,t,i){let o=e.map((e=>e.value));const u=new r(s(o,void 0,i),t);return e.forEach(((e,r)=>{const t=e.reaction(((e,t,i)=>{const c=o.slice();c[r]=e;const n=o;o=c,u.setValue(s(c,n,i),i)}));u.addBeforeDestroy(t)})),u}function i(e,s){Object.keys(s).forEach((r=>{u(e,r,s[r])}))}function o(e){return(s,r)=>(u(e,s,r),r)}function u(e,s,r){var t;return Object.defineProperties(e,{[s]:{get:()=>r.value},[`_${s}$`]:{value:r},[`set${t=s,t[0].toUpperCase()+t.slice(1)}`]:{value:(e,s)=>r.setValue(e,s)}}),e}function c(e){const s=s=>{const r=e.addDisposer((()=>{s.destroy()}));return s.addBeforeDestroy((()=>{e.remove(r)})),s};return{bindSideEffect:s,combine:(e,r,i,o)=>s(t(e,r,i,o)),createVal:(e,t)=>s(new r(e,t))}}export{r as Val,u as bindInstance,t as combine,o as createInstanceBinder,c as createSideEffectBinder,i as withValueEnhancer};\n//# sourceMappingURL=value-enhancer.es.js.map\n","export enum TELE_BOX_COLOR_SCHEME {\n    Light = \"light\",\n    Dark = \"dark\",\n    Auto = \"auto\",\n}\n\nexport enum TELE_BOX_STATE {\n    Normal = \"normal\",\n    Minimized = \"minimized\",\n    Maximized = \"maximized\",\n}\n\nexport enum TELE_BOX_EVENT {\n    DarkMode = \"dark_mode\",\n    PrefersColorScheme = \"prefers_color_scheme\",\n    Close = \"close\",\n    Focus = \"focus\",\n    Blur = \"blur\",\n    Move = \"move\",\n    Resize = \"resize\",\n    IntrinsicMove = \"intrinsic_move\",\n    IntrinsicResize = \"intrinsic_resize\",\n    VisualResize = \"visual_resize\",\n    State = \"state\",\n    Minimized = \"minimized\",\n    Maximized = \"maximized\",\n    Readonly = \"readonly\",\n    Destroyed = \"destroyed\",\n}\n\nexport enum TELE_BOX_DELEGATE_EVENT {\n    Close = \"close\",\n    Maximize = \"maximize\",\n    Minimize = \"minimize\",\n}\n\nexport enum TELE_BOX_RESIZE_HANDLE {\n    North = \"n\",\n    South = \"s\",\n    West = \"w\",\n    East = \"e\",\n    NorthWest = \"nw\",\n    NorthEast = \"ne\",\n    SouthEast = \"se\",\n    SouthWest = \"sw\",\n}\n\nexport const TeleBoxDragHandleType = \"dh\";\n","export function clamp(value: number, min: number, max: number): number {\n    return Math.min(Math.max(value, min), max);\n}\n\nexport function preventEvent(ev: Event): void {\n    ev.stopPropagation();\n    if (ev.cancelable) {\n        ev.preventDefault();\n    }\n}\n\nexport function flattenEvent(ev: MouseEvent | TouchEvent): MouseEvent | Touch {\n    return (ev as TouchEvent).touches\n        ? (ev as TouchEvent).touches[0]\n        : (ev as MouseEvent);\n}\n\nexport function genUniqueKey(): string {\n    return (\n        Date.now().toString().slice(6) + Math.random().toString().slice(2, 8)\n    );\n}\n\nexport function getRandomInt(min: number, max: number): number {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nlet defaultBoxCount = 1;\n\nexport function getBoxDefaultName(): string {\n    return `New Box ${defaultBoxCount++}`;\n}\n\nexport function identity<TValue>(value: TValue): TValue {\n    return value;\n}\n\nexport function isTruthy<TValue>(value: TValue): boolean {\n    return Boolean(value);\n}\n\nexport function isFalsy<TValue>(value: TValue): boolean {\n    return !value;\n}\n","import \"./style.scss\";\n\nimport { SideEffectManager } from \"side-effect-manager\";\n\nimport {\n    TeleBoxDragHandleType,\n    TELE_BOX_DELEGATE_EVENT,\n    TELE_BOX_STATE,\n} from \"../../TeleBox/constants\";\nimport type { TeleBoxState } from \"../../TeleBox/typings\";\nimport type {\n    TeleTitleBar,\n    TeleTitleBarConfig,\n    TeleTitleBarEvent,\n} from \"../typings\";\nimport { preventEvent } from \"../../utils\";\n\nexport type DefaultTitleBarButton = TeleTitleBarEvent & {\n    readonly iconClassName: string;\n    readonly isActive?: (state: TeleBoxState) => boolean;\n};\n\nexport interface DefaultTitleBarConfig extends TeleTitleBarConfig {\n    buttons?: ReadonlyArray<DefaultTitleBarButton>;\n}\n\nexport class DefaultTitleBar implements TeleTitleBar {\n    public constructor({\n        readonly = false,\n        title,\n        buttons,\n        onEvent,\n        onDragStart,\n        namespace = \"telebox\",\n        state = TELE_BOX_STATE.Normal,\n    }: DefaultTitleBarConfig = {}) {\n        this.readonly = readonly;\n        this.onEvent = onEvent;\n        this.onDragStart = onDragStart;\n        this.namespace = namespace;\n        this.title = title;\n        this.state = state;\n\n        this.buttons = buttons || [\n            {\n                type: TELE_BOX_DELEGATE_EVENT.Minimize,\n                iconClassName: this.wrapClassName(\"titlebar-icon-minimize\"),\n            },\n            {\n                type: TELE_BOX_DELEGATE_EVENT.Maximize,\n                iconClassName: this.wrapClassName(\"titlebar-icon-maximize\"),\n                isActive: (state) => state === TELE_BOX_STATE.Maximized,\n            },\n            {\n                type: TELE_BOX_DELEGATE_EVENT.Close,\n                iconClassName: this.wrapClassName(\"titlebar-icon-close\"),\n            },\n        ];\n    }\n\n    public readonly namespace: string;\n\n    public $titleBar: HTMLElement | undefined;\n\n    public $title: HTMLElement | undefined;\n\n    public setTitle(title: string): void {\n        this.title = title;\n        if (this.$title) {\n            this.$title.textContent = title;\n            this.$title.title = title;\n        }\n    }\n\n    public setState(state: TeleBoxState): void {\n        if (this.state !== state) {\n            this.state = state;\n\n            this.buttons.forEach((btn, i) => {\n                if (btn.isActive) {\n                    this.$btns[i].classList.toggle(\n                        \"is-active\",\n                        btn.isActive(state)\n                    );\n                }\n            });\n        }\n    }\n\n    public setReadonly(readonly: boolean): void {\n        if (this.readonly !== readonly) {\n            this.readonly = readonly;\n        }\n    }\n\n    public render(): HTMLElement {\n        if (!this.$titleBar) {\n            this.$titleBar = document.createElement(\"div\");\n            this.$titleBar.className = this.wrapClassName(\"titlebar\");\n            this.$titleBar.dataset.teleBoxHandle = TeleBoxDragHandleType;\n            this.sideEffect.addEventListener(\n                this.$titleBar,\n                \"mousedown\",\n                this.handleTitleBarClick\n            );\n            this.sideEffect.addEventListener(\n                this.$titleBar,\n                \"touchstart\",\n                this.handleTitleBarClick,\n                { passive: true }\n            );\n\n            this.$title = document.createElement(\"h1\");\n            this.$title.className = this.wrapClassName(\"title\");\n            this.$title.dataset.teleBoxHandle = TeleBoxDragHandleType;\n            if (this.title) {\n                this.$title.textContent = this.title;\n                this.$title.title = this.title;\n            }\n\n            const $buttonsContainer = document.createElement(\"div\");\n            $buttonsContainer.className = this.wrapClassName(\"titlebar-btns\");\n\n            this.buttons.forEach(({ iconClassName, isActive }, i) => {\n                const teleTitleBarBtnIndex = String(i);\n\n                const $btn = document.createElement(\"button\");\n                $btn.className = `${this.wrapClassName(\n                    \"titlebar-btn\"\n                )} ${iconClassName}`;\n                $btn.dataset.teleTitleBarBtnIndex = teleTitleBarBtnIndex;\n                $btn.dataset.teleTitleBarNoDblClick = \"true\";\n\n                if (isActive) {\n                    $btn.classList.toggle(\"is-active\", isActive(this.state));\n                }\n\n                this.$btns.push($btn);\n\n                $buttonsContainer.appendChild($btn);\n            });\n\n            this.sideEffect.addEventListener(\n                $buttonsContainer,\n                \"click\",\n                (ev) => {\n                    if (this.readonly) {\n                        return;\n                    }\n                    const target = ev.target as HTMLElement;\n                    const teleTitleBarBtnIndex = Number(\n                        target.dataset?.teleTitleBarBtnIndex\n                    );\n                    if (\n                        !Number.isNaN(teleTitleBarBtnIndex) &&\n                        teleTitleBarBtnIndex < this.buttons.length\n                    ) {\n                        preventEvent(ev);\n                        const btn = this.buttons[teleTitleBarBtnIndex];\n                        if (this.onEvent) {\n                            this.onEvent({\n                                type: btn.type,\n                                value: btn.value,\n                            } as TeleTitleBarEvent);\n                        }\n                    }\n                }\n            );\n\n            this.$titleBar.appendChild(this.$title);\n            this.$titleBar.appendChild($buttonsContainer);\n        }\n\n        return this.$titleBar;\n    }\n\n    public dragHandle(): HTMLElement | undefined {\n        return this.$titleBar;\n    }\n\n    public wrapClassName(className: string): string {\n        return `${this.namespace}-${className}`;\n    }\n\n    public destroy(): void {\n        this.sideEffect.flushAll();\n        if (this.$titleBar) {\n            this.$titleBar = void 0;\n            this.$title = void 0;\n            this.$btns.length = 0;\n            this.onDragStart = void 0;\n            this.onEvent = void 0;\n        }\n    }\n\n    public onEvent?: TeleTitleBarConfig[\"onEvent\"];\n\n    public onDragStart?: TeleTitleBarConfig[\"onDragStart\"];\n\n    protected readonly: boolean;\n\n    protected title?: string;\n\n    protected buttons: ReadonlyArray<DefaultTitleBarButton>;\n\n    protected state: TeleBoxState;\n\n    protected $btns: HTMLButtonElement[] = [];\n\n    protected sideEffect = new SideEffectManager();\n\n    protected lastTitleBarClick = 0;\n\n    protected handleTitleBarClick = (ev: MouseEvent | TouchEvent): void => {\n        if (this.readonly) {\n            return;\n        }\n\n        if (\n            (ev as MouseEvent).button != null &&\n            (ev as MouseEvent).button !== 0\n        ) {\n            return; // Not left mouse\n        }\n\n        if ((ev.target as HTMLElement).dataset?.teleTitleBarNoDblClick) {\n            return; // btns\n        }\n\n        preventEvent(ev);\n\n        const now = Date.now();\n        if (now - this.lastTitleBarClick <= 500) {\n            // double click\n            if (this.onEvent) {\n                this.onEvent({ type: TELE_BOX_DELEGATE_EVENT.Maximize });\n            }\n        } else if (this.onDragStart) {\n            this.onDragStart(ev);\n        }\n        this.lastTitleBarClick = now;\n    };\n}\n","import \"./style.scss\";\n\nimport EventEmitter from \"eventemitter3\";\nimport styler from \"stylefire\";\nimport shallowequal from \"shallowequal\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport {\n    createSideEffectBinder,\n    Val,\n    ValEnhancedResult,\n    ValSideEffectBinder,\n    withValueEnhancer,\n} from \"value-enhancer\";\nimport { DefaultTitleBar, TeleTitleBar } from \"../TeleTitleBar\";\nimport {\n    clamp,\n    flattenEvent,\n    genUniqueKey,\n    getBoxDefaultName,\n    isFalsy,\n    isTruthy,\n    preventEvent,\n} from \"../utils\";\nimport {\n    TELE_BOX_EVENT,\n    TELE_BOX_STATE,\n    TELE_BOX_RESIZE_HANDLE,\n    TELE_BOX_DELEGATE_EVENT,\n    TELE_BOX_COLOR_SCHEME,\n} from \"./constants\";\nimport type {\n    TeleBoxConfig,\n    TeleBoxRect,\n    TeleBoxEvents,\n    TeleBoxHandleType,\n    TeleBoxState,\n    TeleBoxDelegateEvents,\n    TeleBoxCoord,\n    TeleBoxSize,\n    TeleBoxColorScheme,\n} from \"./typings\";\n\nexport * from \"./constants\";\nexport * from \"./typings\";\n\ntype ValConfig = {\n    prefersColorScheme: Val<TeleBoxColorScheme, boolean>;\n    darkMode: Val<boolean, boolean>;\n    containerRect: Val<TeleBoxRect, boolean>;\n    collectorRect: Val<TeleBoxRect | undefined, boolean>;\n    /** Box title. Default empty. */\n    title: Val<string, boolean>;\n    /** Is box visible */\n    visible: Val<boolean, boolean>;\n    /** Is box readonly */\n    readonly: Val<boolean, boolean>;\n    /** Able to resize box window */\n    resizable: Val<boolean, boolean>;\n    /** Able to drag box window */\n    draggable: Val<boolean, boolean>;\n    /** Restrict box to always be within the containing area. */\n    fence: Val<boolean, boolean>;\n    /** Fixed width/height ratio for box window. */\n    fixRatio: Val<boolean, boolean>;\n    focus: Val<boolean, boolean>;\n    zIndex: Val<number, boolean>;\n    /** Is box minimized. Default false. */\n    minimized: Val<boolean, boolean>;\n    /** Is box maximized. Default false. */\n    maximized: Val<boolean, boolean>;\n    $userContent: Val<HTMLElement | undefined>;\n    $userFooter: Val<HTMLElement | undefined>;\n    $userStyles: Val<HTMLStyleElement | undefined>;\n};\nexport interface TeleBox extends ValEnhancedResult<ValConfig> {}\n\nexport class TeleBox {\n    public constructor({\n        id = genUniqueKey(),\n        title = getBoxDefaultName(),\n        prefersColorScheme = TELE_BOX_COLOR_SCHEME.Light,\n        darkMode,\n        visible = true,\n        width = 0.5,\n        height = 0.5,\n        minWidth = 0,\n        minHeight = 0,\n        x = 0.1,\n        y = 0.1,\n        minimized = false,\n        maximized = false,\n        readonly = false,\n        resizable = true,\n        draggable = true,\n        fence = true,\n        fixRatio = false,\n        focus = false,\n        zIndex = 100,\n        namespace = \"telebox\",\n        titleBar,\n        content,\n        footer,\n        styles,\n        containerRect = {\n            x: 0,\n            y: 0,\n            width: window.innerWidth,\n            height: window.innerHeight,\n        },\n        collectorRect,\n    }: TeleBoxConfig = {}) {\n        this._sideEffect = new SideEffectManager();\n        this._valSideEffectBinder = createSideEffectBinder(this._sideEffect);\n        const { combine, createVal } = this._valSideEffectBinder;\n\n        this.id = id;\n        this.namespace = namespace;\n        this.events = new EventEmitter();\n        this._delegateEvents = new EventEmitter();\n\n        const prefersColorScheme$ = createVal<TeleBoxColorScheme, boolean>(\n            prefersColorScheme\n        );\n        prefersColorScheme$.reaction((prefersColorScheme, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(\n                    TELE_BOX_EVENT.PrefersColorScheme,\n                    prefersColorScheme\n                );\n            }\n        });\n\n        const darkMode$ = createVal(Boolean(darkMode));\n\n        if (darkMode == null) {\n            prefersColorScheme$.subscribe(\n                (prefersColorScheme, _, skipUpdate) => {\n                    this._sideEffect.add(() => {\n                        if (prefersColorScheme === \"auto\") {\n                            const prefersDark = window.matchMedia(\n                                \"(prefers-color-scheme: dark)\"\n                            );\n                            if (prefersDark) {\n                                darkMode$.setValue(\n                                    prefersDark.matches,\n                                    skipUpdate\n                                );\n                                const handler = (\n                                    evt: MediaQueryListEvent\n                                ): void => {\n                                    darkMode$.setValue(evt.matches, skipUpdate);\n                                };\n                                prefersDark.addListener(handler);\n                                return () =>\n                                    prefersDark.removeListener(handler);\n                            } else {\n                                return noop;\n                            }\n                        } else {\n                            darkMode$.setValue(\n                                prefersColorScheme === \"dark\",\n                                skipUpdate\n                            );\n                            return noop;\n                        }\n                    }, \"prefers-color-scheme\");\n                }\n            );\n        }\n\n        darkMode$.reaction((darkMode, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.DarkMode, darkMode);\n            }\n        });\n\n        const containerRect$ = createVal(containerRect, shallowequal);\n        const collectorRect$ = createVal(collectorRect, shallowequal);\n\n        const title$ = createVal(title);\n\n        const visible$ = createVal(visible);\n        visible$.reaction((visible, _, skipUpdate) => {\n            if (!skipUpdate && !visible) {\n                this.events.emit(TELE_BOX_EVENT.Close);\n            }\n        });\n\n        const readonly$ = createVal(readonly);\n        readonly$.reaction((readonly, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.Readonly, readonly);\n            }\n        });\n\n        const resizable$ = createVal(resizable);\n        const draggable$ = createVal(draggable);\n        const fence$ = createVal(fence);\n        const fixRatio$ = createVal(fixRatio);\n        const zIndex$ = createVal(zIndex);\n\n        const focus$ = createVal(focus);\n        focus$.reaction((focus, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(\n                    focus ? TELE_BOX_EVENT.Focus : TELE_BOX_EVENT.Blur\n                );\n            }\n        });\n\n        const minimized$ = createVal(minimized);\n        minimized$.reaction((minimized, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.Minimized, minimized);\n            }\n        });\n\n        const maximized$ = createVal(maximized);\n        maximized$.reaction((maximized, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.Maximized, maximized);\n            }\n        });\n\n        const state$ = combine(\n            [minimized$, maximized$],\n            ([minimized, maximized]): TeleBoxState =>\n                minimized\n                    ? TELE_BOX_STATE.Minimized\n                    : maximized\n                    ? TELE_BOX_STATE.Maximized\n                    : TELE_BOX_STATE.Normal\n        );\n        state$.reaction((state, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.State, state);\n            }\n        });\n\n        const minSize$ = createVal(\n            {\n                width: clamp(minWidth, 0, 1),\n                height: clamp(minHeight, 0, 1),\n            },\n            shallowequal\n        );\n\n        const intrinsicSize$ = createVal(\n            {\n                width: clamp(width, minSize$.value.width, 1),\n                height: clamp(height, minSize$.value.height, 1),\n            },\n            shallowequal\n        );\n        minSize$.reaction((minSize, _, skipUpdate) => {\n            intrinsicSize$.setValue(\n                {\n                    width: clamp(width, minSize.width, 1),\n                    height: clamp(height, minSize.height, 1),\n                },\n                skipUpdate\n            );\n        });\n        intrinsicSize$.reaction((size, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.IntrinsicResize, size);\n            }\n        });\n\n        const size$ = combine(\n            [intrinsicSize$, maximized$],\n            ([intrinsicSize, maximized]) => {\n                if (maximized) {\n                    return { width: 1, height: 1 };\n                }\n                return intrinsicSize;\n            },\n            shallowequal\n        );\n        size$.reaction((size, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.Resize, size);\n            }\n        });\n\n        const visualSize$ = combine(\n            [size$, minimized$, containerRect$, collectorRect$],\n            ([size, minimized, containerRect, collectorRect]) => {\n                if (minimized && collectorRect) {\n                    return {\n                        width:\n                            collectorRect.width /\n                            size.width /\n                            containerRect.width,\n                        height:\n                            collectorRect.height /\n                            size.height /\n                            containerRect.height,\n                    };\n                }\n                return size;\n            },\n            shallowequal\n        );\n        visualSize$.reaction((size, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.VisualResize, size);\n            }\n        });\n\n        const intrinsicCoord$ = createVal(\n            { x: clamp(x, 0, 1), y: clamp(y, 0, 1) },\n            shallowequal\n        );\n        intrinsicCoord$.reaction((coord, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.IntrinsicMove, coord);\n            }\n        });\n\n        const coord$ = combine(\n            [\n                intrinsicCoord$,\n                intrinsicSize$,\n                containerRect$,\n                collectorRect$,\n                minimized$,\n                maximized$,\n            ],\n            ([\n                intrinsicCoord,\n                intrinsicSize,\n                containerRect,\n                collectorRect,\n                minimized,\n                maximized,\n            ]) => {\n                if (minimized && collectorRect) {\n                    if (maximized) {\n                        return {\n                            x:\n                                (collectorRect.x + collectorRect.width / 2) /\n                                    containerRect.width -\n                                1 / 2,\n                            y:\n                                (collectorRect.y + collectorRect.height / 2) /\n                                    containerRect.height -\n                                1 / 2,\n                        };\n                    }\n                    return {\n                        x:\n                            (collectorRect.x + collectorRect.width / 2) /\n                                containerRect.width -\n                            intrinsicSize.width / 2,\n                        y:\n                            (collectorRect.y + collectorRect.height / 2) /\n                                containerRect.height -\n                            intrinsicSize.height / 2,\n                    };\n                }\n                if (maximized) {\n                    return { x: 0, y: 0 };\n                }\n                return intrinsicCoord;\n            },\n            shallowequal\n        );\n        coord$.reaction((coord, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.Move, coord);\n            }\n        });\n\n        this.titleBar =\n            titleBar ||\n            new DefaultTitleBar({\n                readonly: readonly$.value,\n                title: title$.value,\n                namespace: this.namespace,\n                onDragStart: (event) => this._handleTrackStart?.(event),\n                onEvent: (event): void => {\n                    if (this._delegateEvents.listeners.length > 0) {\n                        this._delegateEvents.emit(event.type);\n                    } else {\n                        switch (event.type) {\n                            case TELE_BOX_DELEGATE_EVENT.Maximize: {\n                                maximized$.setValue(!maximized$.value);\n                                break;\n                            }\n                            case TELE_BOX_DELEGATE_EVENT.Minimize: {\n                                minimized$.setValue(true);\n                                break;\n                            }\n                            case TELE_BOX_DELEGATE_EVENT.Close: {\n                                visible$.setValue(false);\n                                break;\n                            }\n                            default: {\n                                console.error(\n                                    \"Unsupported titleBar event:\",\n                                    event\n                                );\n                                break;\n                            }\n                        }\n                    }\n                },\n            });\n        readonly$.reaction((readonly) => {\n            this.titleBar.setReadonly(readonly);\n        });\n\n        const $userContent$ = createVal(content);\n        const $userFooter$ = createVal(footer);\n        const $userStyles$ = createVal(styles);\n\n        const valConfig: ValConfig = {\n            prefersColorScheme: prefersColorScheme$,\n            darkMode: darkMode$,\n            containerRect: containerRect$,\n            collectorRect: collectorRect$,\n            title: title$,\n            visible: visible$,\n            readonly: readonly$,\n            resizable: resizable$,\n            draggable: draggable$,\n            fence: fence$,\n            fixRatio: fixRatio$,\n            focus: focus$,\n            zIndex: zIndex$,\n            minimized: minimized$,\n            maximized: maximized$,\n            $userContent: $userContent$,\n            $userFooter: $userFooter$,\n            $userStyles: $userStyles$,\n        };\n\n        withValueEnhancer(this, valConfig);\n\n        this._state$ = state$;\n        this._minSize$ = minSize$;\n        this._size$ = size$;\n        this._intrinsicSize$ = intrinsicSize$;\n        this._visualSize$ = visualSize$;\n        this._coord$ = coord$;\n        this._intrinsicCoord$ = intrinsicCoord$;\n\n        if (this.fixRatio) {\n            this.transform(\n                coord$.value.x,\n                coord$.value.y,\n                size$.value.width,\n                size$.value.height,\n                true\n            );\n        }\n\n        this.$box = this.render();\n    }\n\n    public readonly id: string;\n\n    /** ClassName Prefix. For CSS styling. Default \"telebox\" */\n    public readonly namespace: string;\n\n    public readonly events: TeleBoxEvents;\n\n    public readonly _delegateEvents: TeleBoxDelegateEvents;\n\n    protected _sideEffect: SideEffectManager;\n\n    protected _valSideEffectBinder: ValSideEffectBinder;\n\n    public titleBar: TeleTitleBar;\n\n    public _minSize$: Val<TeleBoxSize, boolean>;\n    public _size$: Val<TeleBoxSize, boolean>;\n    public _intrinsicSize$: Val<TeleBoxSize, boolean>;\n    public _visualSize$: Val<TeleBoxSize, boolean>;\n    public _coord$: Val<TeleBoxCoord, boolean>;\n    public _intrinsicCoord$: Val<TeleBoxCoord, boolean>;\n\n    public get darkMode(): boolean {\n        return this._darkMode$.value;\n    }\n\n    public _state$: Val<TeleBoxState, boolean>;\n\n    public get state(): TeleBoxState {\n        return this._state$.value;\n    }\n\n    /** @deprecated use setMaximized and setMinimized instead */\n    public setState(state: TeleBoxState, skipUpdate = false): this {\n        switch (state) {\n            case TELE_BOX_STATE.Maximized: {\n                this.setMinimized(false, skipUpdate);\n                this.setMaximized(true, skipUpdate);\n                break;\n            }\n            case TELE_BOX_STATE.Minimized: {\n                this.setMinimized(true, skipUpdate);\n                this.setMaximized(false, skipUpdate);\n                break;\n            }\n            default: {\n                this.setMinimized(false, skipUpdate);\n                this.setMaximized(false, skipUpdate);\n                break;\n            }\n        }\n        return this;\n    }\n\n    /** Minimum box width relative to container element. 0~1. Default 0. */\n    public get minWidth(): number {\n        return this._minSize$.value.width;\n    }\n\n    /** Minimum box height relative to container element. 0~1. Default 0. */\n    public get minHeight(): number {\n        return this._minSize$.value.height;\n    }\n\n    /**\n     * @param minWidth Minimum box width relative to container element. 0~1.\n     * @returns this\n     */\n    public setMinWidth(minWidth: number, skipUpdate = false): this {\n        this._minSize$.setValue(\n            { width: minWidth, height: this.minHeight },\n            skipUpdate\n        );\n        return this;\n    }\n\n    /**\n     * @param minHeight Minimum box height relative to container element. 0~1.\n     * @returns this\n     */\n    public setMinHeight(minHeight: number, skipUpdate = false): this {\n        this._minSize$.setValue(\n            { width: this.minWidth, height: minHeight },\n            skipUpdate\n        );\n        return this;\n    }\n\n    /** Intrinsic box width relative to container element(without counting the effect of maximization or minimization). 0~1. Default 0.5. */\n    public get intrinsicWidth(): number {\n        return this._intrinsicSize$.value.width;\n    }\n\n    /** Intrinsic box height relative to container element(without counting the effect of maximization or minimization). 0~1. Default 0.5. */\n    public get intrinsicHeight(): number {\n        return this._intrinsicSize$.value.height;\n    }\n\n    /**\n     * Resize box.\n     * @param width Box width relative to container element. 0~1.\n     * @param height Box height relative to container element. 0~1.\n     * @param skipUpdate Skip emitting event.\n     * @returns this\n     */\n    public resize(width: number, height: number, skipUpdate = false): this {\n        this._intrinsicSize$.setValue({ width, height }, skipUpdate);\n        return this;\n    }\n\n    /** Box width relative to container element. 0~1. Default 0.5. */\n    public get width(): number {\n        return this._size$.value.width;\n    }\n\n    /** Box height relative to container element. 0~1. Default 0.5. */\n    public get height(): number {\n        return this._size$.value.height;\n    }\n\n    /** Box width in pixels. */\n    public get absoluteWidth(): number {\n        return this.width * this.containerRect.width;\n    }\n\n    /** Box height in pixels. */\n    public get absoluteHeight(): number {\n        return this.height * this.containerRect.height;\n    }\n\n    /** Actual rendered box width relative to container element. 0~1. Default 0.5. */\n    public get visualWidth(): number {\n        return this._visualSize$.value.width;\n    }\n\n    /** Actual rendered box height relative to container element. 0~1. Default 0.5. */\n    public get visualHeight(): number {\n        return this._visualSize$.value.height;\n    }\n\n    /** Intrinsic box x position relative to container element(without counting the effect of maximization or minimization). 0~1. Default 0.1. */\n    public get intrinsicX(): number {\n        return this._intrinsicCoord$.value.x;\n    }\n\n    /** Intrinsic box y position relative to container element(without counting the effect of maximization or minimization). 0~1. Default 0.1. */\n    public get intrinsicY(): number {\n        return this._intrinsicCoord$.value.y;\n    }\n\n    /**\n     * Move box position.\n     * @param x x position relative to container element. 0~1.\n     * @param y y position relative to container element. 0~1.\n     * @param skipUpdate Skip emitting event.\n     * @returns this\n     */\n    public move(x: number, y: number, skipUpdate = false): this {\n        this._intrinsicCoord$.setValue({ x, y }, skipUpdate);\n        return this;\n    }\n\n    /** Box x position relative to container element. 0~1. Default 0.1. */\n    public get x(): number {\n        return this._coord$.value.x;\n    }\n\n    /** Box y position relative to container element. 0~1. Default 0.1. */\n    public get y(): number {\n        return this._coord$.value.y;\n    }\n\n    /**\n     * Resize + Move, with respect to fixed ratio.\n     * @param x x position relative to container element. 0~1.\n     * @param y y position relative to container element. 0~1.\n     * @param width Box width relative to container element. 0~1.\n     * @param height Box height relative to container element. 0~1.\n     * @param skipUpdate Skip emitting event.\n     * @returns this\n     */\n    public transform(\n        x: number,\n        y: number,\n        width: number,\n        height: number,\n        skipUpdate = false\n    ): this {\n        if (this.fixRatio) {\n            const newHeight =\n                (this.intrinsicHeight / this.intrinsicWidth) * width;\n            if (y !== this.intrinsicY) {\n                y -= newHeight - height;\n            }\n            height = newHeight;\n        }\n\n        if (y < 0) {\n            y = 0;\n            if (height > this.intrinsicHeight) {\n                height = this.intrinsicHeight;\n            }\n        }\n\n        this._intrinsicCoord$.setValue(\n            {\n                x: width >= this.minWidth ? x : this.intrinsicX,\n                y: height >= this.minHeight ? y : this.intrinsicY,\n            },\n            skipUpdate\n        );\n        this._intrinsicSize$.setValue(\n            {\n                width: clamp(width, this.minWidth, 1),\n                height: clamp(height, this.minHeight, 1),\n            },\n            skipUpdate\n        );\n\n        return this;\n    }\n\n    /**\n     * Mount box to a container element.\n     */\n    public mount(container: HTMLElement): this {\n        container.appendChild(this.render());\n        return this;\n    }\n\n    /**\n     * Unmount box from the container element.\n     */\n    public unmount(): this {\n        if (this.$box) {\n            this.$box.remove();\n        }\n        return this;\n    }\n\n    /**\n     * Mount dom to box content.\n     */\n    public mountContent(content: HTMLElement): this {\n        this.set$userContent(content);\n        return this;\n    }\n\n    /**\n     * Unmount content from the box.\n     */\n    public unmountContent(): this {\n        this.set$userContent(undefined);\n        return this;\n    }\n\n    /**\n     * Mount dom to box Footer.\n     */\n    public mountFooter(footer: HTMLElement): this {\n        this.set$userFooter(footer);\n        return this;\n    }\n\n    /**\n     * Unmount Footer from the box.\n     */\n    public unmountFooter(): this {\n        this.set$userFooter(undefined);\n        return this;\n    }\n\n    public getUserStyles(): HTMLStyleElement | undefined {\n        return this.$userStyles;\n    }\n\n    public mountStyles(styles: string | HTMLStyleElement): this {\n        let $styles: HTMLStyleElement;\n        if (typeof styles === \"string\") {\n            $styles = document.createElement(\"style\");\n            $styles.textContent = styles;\n        } else {\n            $styles = styles;\n        }\n        this.set$userStyles($styles);\n        return this;\n    }\n\n    public unmountStyles(): this {\n        this.set$userStyles(undefined);\n        return this;\n    }\n\n    /** DOM of the box */\n    public $box: HTMLElement;\n\n    /** DOM of the box content */\n    public $content!: HTMLElement;\n\n    /** DOM of the box title bar */\n    public $titleBar!: HTMLElement;\n\n    /** DOM of the box footer */\n    public $footer!: HTMLElement;\n\n    protected _renderSideEffect = new SideEffectManager();\n\n    public render(root?: HTMLElement): HTMLElement {\n        if (root) {\n            if (root === this.$box) {\n                return this.$box;\n            } else {\n                this.$box = root;\n            }\n        } else {\n            if (this.$box) {\n                return this.$box;\n            } else {\n                this.$box = document.createElement(\"div\");\n            }\n        }\n\n        this._renderSideEffect.flushAll();\n\n        this.$box.classList.add(this.wrapClassName(\"box\"));\n\n        const bindClassName = <TValue>(\n            el: Element,\n            val: Val<TValue, boolean>,\n            className: string,\n            predicate: (value: TValue) => boolean = isTruthy\n        ): string => {\n            return this._renderSideEffect.add(() => {\n                const wrappedClassName = this.wrapClassName(className);\n                return val.subscribe((value) => {\n                    el.classList.toggle(wrappedClassName, predicate(value));\n                });\n            });\n        };\n\n        bindClassName(this.$box, this._readonly$, \"readonly\");\n        bindClassName(this.$box, this._draggable$, \"no-drag\", isFalsy);\n        bindClassName(this.$box, this._resizable$, \"no-resize\", isFalsy);\n        bindClassName(this.$box, this._focus$, \"blur\", isFalsy);\n        bindClassName(this.$box, this._darkMode$, \"color-scheme-dark\");\n        bindClassName(\n            this.$box,\n            this._darkMode$,\n            \"color-scheme-light\",\n            isFalsy\n        );\n\n        this._renderSideEffect.add(() => {\n            const minimizedClassName = this.wrapClassName(\"minimized\");\n            const maximizedClassName = this.wrapClassName(\"maximized\");\n            const MAXIMIZED_TIMER_ID = \"box-maximized-timer\";\n\n            return this._state$.subscribe((state) => {\n                this.$box.classList.toggle(\n                    minimizedClassName,\n                    state === TELE_BOX_STATE.Minimized\n                );\n\n                if (state === TELE_BOX_STATE.Maximized) {\n                    this._renderSideEffect.flush(MAXIMIZED_TIMER_ID);\n                    this.$box.classList.toggle(maximizedClassName, true);\n                } else {\n                    // delay so that transition won't be triggered\n                    this._renderSideEffect.setTimeout(\n                        () => {\n                            this.$box.classList.toggle(\n                                maximizedClassName,\n                                false\n                            );\n                        },\n                        0,\n                        MAXIMIZED_TIMER_ID\n                    );\n                }\n            });\n        });\n\n        this._renderSideEffect.add(() =>\n            this._visible$.subscribe((visible) => {\n                this.$box.style.display = visible ? \"block\" : \"none\";\n            })\n        );\n\n        this._renderSideEffect.add(() =>\n            this._zIndex$.subscribe((zIndex) => {\n                this.$box.style.zIndex = String(zIndex);\n            })\n        );\n\n        const boxStyler = styler(this.$box);\n\n        this.$box.dataset.teleBoxID = this.id;\n\n        this.$box.style.width = this.absoluteWidth + \"px\";\n        this.$box.style.height = this.absoluteHeight + \"px\";\n        // Add 10px offset on first frame\n        // which creates a subtle moving effect\n        const translateX =\n            this.x * this.containerRect.width + this.containerRect.x;\n        const translateY =\n            this.y * this.containerRect.height + this.containerRect.y;\n        this.$box.style.transform = `translate(${translateX - 10}px,${\n            translateY - 10\n        }px)`;\n\n        this._valSideEffectBinder\n            .combine(\n                [\n                    this._coord$,\n                    this._size$,\n                    this._minimized$,\n                    this._containerRect$,\n                    this._collectorRect$,\n                ],\n                ([coord, size, minimized, containerRect, collectorRect]) => {\n                    const absoluteWidth = size.width * containerRect.width;\n                    const absoluteHeight = size.height * containerRect.height;\n                    return {\n                        width: absoluteWidth,\n                        height: absoluteHeight,\n                        x: coord.x * containerRect.width,\n                        y: coord.y * containerRect.height,\n                        scaleX:\n                            minimized && collectorRect\n                                ? collectorRect.width / absoluteWidth\n                                : 1,\n                        scaleY:\n                            minimized && collectorRect\n                                ? collectorRect.height / absoluteHeight\n                                : 1,\n                    };\n                },\n                shallowequal\n            )\n            .subscribe((styles) => {\n                boxStyler.set(styles);\n            });\n\n        boxStyler.set({ x: translateX, y: translateY });\n\n        const $boxMain = document.createElement(\"div\");\n        $boxMain.className = this.wrapClassName(\"box-main\");\n        this.$box.appendChild($boxMain);\n\n        const $titleBar = document.createElement(\"div\");\n        $titleBar.className = this.wrapClassName(\"titlebar-wrap\");\n        $titleBar.appendChild(this.titleBar.render());\n        this.$titleBar = $titleBar;\n\n        const $contentWrap = document.createElement(\"div\");\n        $contentWrap.className = this.wrapClassName(\"content-wrap\");\n\n        const $content = document.createElement(\"div\");\n        $content.className =\n            this.wrapClassName(\"content\") + \" tele-fancy-scrollbar\";\n        this.$content = $content;\n\n        this._renderSideEffect.add(() => {\n            let last$userStyles: HTMLStyleElement | undefined;\n            return this._$userStyles$.subscribe(($userStyles) => {\n                if (last$userStyles) {\n                    last$userStyles.remove();\n                }\n                last$userStyles = $userStyles;\n                if ($userStyles) {\n                    $content.appendChild($userStyles);\n                }\n            });\n        });\n\n        this._renderSideEffect.add(() => {\n            let last$userContent: HTMLElement | undefined;\n            return this._$userContent$.subscribe(($userContent) => {\n                if (last$userContent) {\n                    last$userContent.remove();\n                }\n                last$userContent = $userContent;\n                if ($userContent) {\n                    $content.appendChild($userContent);\n                }\n            });\n        });\n\n        $contentWrap.appendChild($content);\n\n        const $footer = document.createElement(\"div\");\n        $footer.className = this.wrapClassName(\"footer-wrap\");\n        this.$footer = $footer;\n\n        this._renderSideEffect.add(() => {\n            let last$userFooter: HTMLElement | undefined;\n            return this._$userFooter$.subscribe(($userFooter) => {\n                if (last$userFooter) {\n                    last$userFooter.remove();\n                }\n                last$userFooter = $userFooter;\n                if ($userFooter) {\n                    $footer.appendChild($userFooter);\n                }\n            });\n        });\n\n        $boxMain.appendChild($titleBar);\n        $boxMain.appendChild($contentWrap);\n        $boxMain.appendChild($footer);\n\n        this._renderResizeHandlers();\n\n        return this.$box;\n    }\n\n    protected _handleTrackStart?: (ev: MouseEvent | TouchEvent) => void;\n\n    public handleTrackStart: (ev: MouseEvent | TouchEvent) => void = (ev) => {\n        return this._handleTrackStart?.(ev);\n    };\n\n    protected _renderResizeHandlers(): void {\n        const $resizeHandles = document.createElement(\"div\");\n        $resizeHandles.className = this.wrapClassName(\"resize-handles\");\n\n        Object.values(TELE_BOX_RESIZE_HANDLE).forEach((handleType) => {\n            const $handle = document.createElement(\"div\");\n            $handle.className =\n                this.wrapClassName(handleType) +\n                \" \" +\n                this.wrapClassName(\"resize-handle\");\n            $handle.dataset.teleBoxHandle = handleType;\n\n            $resizeHandles.appendChild($handle);\n        });\n\n        this.$box.appendChild($resizeHandles);\n\n        const TRACKING_DISPOSER_ID = \"handle-tracking-listener\";\n        const transformingClassName = this.wrapClassName(\"transforming\");\n\n        let $trackMask: HTMLElement | undefined;\n\n        let trackStartX = 0;\n        let trackStartY = 0;\n\n        let trackStartWidth = 0;\n        let trackStartHeight = 0;\n\n        let trackStartPageX = 0;\n        let trackStartPageY = 0;\n\n        let trackingHandle: TeleBoxHandleType | undefined;\n\n        const handleTracking = (ev: MouseEvent | TouchEvent): void => {\n            if (this.state !== TELE_BOX_STATE.Normal) {\n                return;\n            }\n\n            preventEvent(ev);\n\n            let { pageX, pageY } = flattenEvent(ev);\n            if (pageY < 0) {\n                pageY = 0;\n            }\n\n            const offsetX =\n                (pageX - trackStartPageX) / this.containerRect.width;\n            const offsetY =\n                (pageY - trackStartPageY) / this.containerRect.height;\n\n            switch (trackingHandle) {\n                case TELE_BOX_RESIZE_HANDLE.North: {\n                    this.transform(\n                        this.x,\n                        trackStartY + offsetY,\n                        this.width,\n                        trackStartHeight - offsetY\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.South: {\n                    this.transform(\n                        this.x,\n                        this.y,\n                        this.width,\n                        trackStartHeight + offsetY\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.West: {\n                    this.transform(\n                        trackStartX + offsetX,\n                        this.y,\n                        trackStartWidth - offsetX,\n                        this.height\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.East: {\n                    this.transform(\n                        this.x,\n                        this.y,\n                        trackStartWidth + offsetX,\n                        this.height\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.NorthWest: {\n                    this.transform(\n                        trackStartX + offsetX,\n                        trackStartY + offsetY,\n                        trackStartWidth - offsetX,\n                        trackStartHeight - offsetY\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.NorthEast: {\n                    this.transform(\n                        this.x,\n                        trackStartY + offsetY,\n                        trackStartWidth + offsetX,\n                        trackStartHeight - offsetY\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.SouthEast: {\n                    this.transform(\n                        this.x,\n                        this.y,\n                        trackStartWidth + offsetX,\n                        trackStartHeight + offsetY\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.SouthWest: {\n                    this.transform(\n                        trackStartX + offsetX,\n                        this.y,\n                        trackStartWidth - offsetX,\n                        trackStartHeight + offsetY\n                    );\n                    break;\n                }\n                default: {\n                    if (this.fence) {\n                        this.move(\n                            clamp(trackStartX + offsetX, 0, 1 - this.width),\n                            clamp(trackStartY + offsetY, 0, 1 - this.height)\n                        );\n                    } else {\n                        const xOverflowOffset = 20 / this.containerRect.width;\n                        const yOverflowOffset = 20 / this.containerRect.height;\n                        this.move(\n                            clamp(\n                                trackStartX + offsetX,\n                                xOverflowOffset - this.width,\n                                1 - xOverflowOffset\n                            ),\n                            clamp(trackStartY + offsetY, 0, 1 - yOverflowOffset)\n                        );\n                    }\n                    break;\n                }\n            }\n        };\n\n        const handleTrackEnd = (ev: MouseEvent | TouchEvent): void => {\n            trackingHandle = void 0;\n\n            if (!$trackMask) {\n                return;\n            }\n\n            preventEvent(ev);\n\n            this.$box.classList.toggle(transformingClassName, false);\n\n            this._sideEffect.flush(TRACKING_DISPOSER_ID);\n\n            $trackMask.remove();\n        };\n\n        const handleTrackStart = (ev: MouseEvent | TouchEvent): void => {\n            if (this.readonly) {\n                return;\n            }\n\n            if (\n                (ev as MouseEvent).button != null &&\n                (ev as MouseEvent).button !== 0\n            ) {\n                // Not left mouse\n                return;\n            }\n\n            if (\n                !this.draggable ||\n                trackingHandle ||\n                this.state !== TELE_BOX_STATE.Normal\n            ) {\n                return;\n            }\n\n            const target = ev.target as HTMLElement;\n            if (target.dataset?.teleBoxHandle) {\n                preventEvent(ev);\n\n                trackStartX = this.x;\n                trackStartY = this.y;\n                trackStartWidth = this.width;\n                trackStartHeight = this.height;\n\n                ({ pageX: trackStartPageX, pageY: trackStartPageY } =\n                    flattenEvent(ev));\n\n                trackingHandle = target.dataset\n                    .teleBoxHandle as TELE_BOX_RESIZE_HANDLE;\n\n                if (!$trackMask) {\n                    $trackMask = document.createElement(\"div\");\n                }\n\n                const cursor = trackingHandle\n                    ? this.wrapClassName(`cursor-${trackingHandle}`)\n                    : \"\";\n\n                $trackMask.className = this.wrapClassName(\n                    `track-mask${cursor ? ` ${cursor}` : \"\"}`\n                );\n\n                this.$box.appendChild($trackMask);\n\n                this.$box.classList.add(transformingClassName);\n\n                this._sideEffect.add(() => {\n                    window.addEventListener(\"mousemove\", handleTracking);\n                    window.addEventListener(\"touchmove\", handleTracking, {\n                        passive: false,\n                    });\n                    window.addEventListener(\"mouseup\", handleTrackEnd);\n                    window.addEventListener(\"touchend\", handleTrackEnd, {\n                        passive: false,\n                    });\n                    window.addEventListener(\"touchcancel\", handleTrackEnd, {\n                        passive: false,\n                    });\n\n                    return () => {\n                        window.removeEventListener(\"mousemove\", handleTracking);\n                        window.removeEventListener(\"touchmove\", handleTracking);\n                        window.removeEventListener(\"mouseup\", handleTrackEnd);\n                        window.removeEventListener(\"touchend\", handleTrackEnd);\n                        window.removeEventListener(\n                            \"touchcancel\",\n                            handleTrackEnd\n                        );\n                    };\n                }, TRACKING_DISPOSER_ID);\n            }\n        };\n\n        this._handleTrackStart = handleTrackStart;\n\n        this._sideEffect.addEventListener(\n            $resizeHandles,\n            \"mousedown\",\n            handleTrackStart,\n            {},\n            \"box-resizeHandles-mousedown\"\n        );\n\n        this._sideEffect.addEventListener(\n            $resizeHandles,\n            \"touchstart\",\n            handleTrackStart,\n            { passive: false },\n            \"box-resizeHandles-touchstart\"\n        );\n    }\n\n    public destroy(): void {\n        this.$box.remove();\n        this.events.emit(TELE_BOX_EVENT.Destroyed);\n\n        this._sideEffect.flushAll();\n        this._renderSideEffect.flushAll();\n        this.events.removeAllListeners();\n        this._delegateEvents.removeAllListeners();\n    }\n\n    /**\n     * Wrap a className with namespace\n     */\n    public wrapClassName(className: string): string {\n        return `${this.namespace}-${className}`;\n    }\n}\n\nfunction noop(): void {\n    return;\n}\n\ntype PropKeys<K = keyof TeleBox> = K extends keyof TeleBox\n    ? TeleBox[K] extends Function\n        ? never\n        : K\n    : never;\n\nexport type ReadonlyTeleBox = Pick<\n    TeleBox,\n    | PropKeys\n    | \"wrapClassName\"\n    | \"mountContent\"\n    | \"mountFooter\"\n    | \"mountStyles\"\n    | \"handleTrackStart\"\n>;\n","import { useEffect, useRef } from \"react\";\n\nexport const useUpdateEffect: typeof useEffect = (effect, deps) => {\n    const isFirst = useRef(true);\n\n    useEffect(() => {\n        if (isFirst.current) {\n            isFirst.current = false;\n            return;\n        }\n        return effect();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, deps);\n};\n","export enum TELE_BOX_MANAGER_EVENT {\n    Focused = \"focused\",\n    Created = \"created\",\n    Removed = \"removed\",\n    State = \"state\",\n    Maximized = \"maximized\",\n    Minimized = \"minimized\",\n    Move = \"move\",\n    Resize = \"resize\",\n    IntrinsicMove = \"intrinsic_move\",\n    IntrinsicResize = \"intrinsic_resize\",\n    VisualResize = \"visual_resize\",\n    PrefersColorScheme = \"prefers_color_scheme\",\n    DarkMode = \"dark_mode\",\n}\n","import \"./style.scss\";\nimport collectorSVG from \"./icons/collector.svg\";\nimport { TeleStyles } from \"../typings\";\n\nexport interface TeleBoxCollectorConfig {\n    visible?: boolean;\n    readonly?: boolean;\n    darkMode?: boolean;\n    namespace?: string;\n    styles?: TeleStyles;\n    onClick?: () => void;\n}\n\nexport class TeleBoxCollector {\n    public constructor({\n        visible = true,\n        readonly = false,\n        darkMode = false,\n        namespace = \"telebox\",\n        styles = {},\n        onClick,\n    }: TeleBoxCollectorConfig = {}) {\n        this._visible = visible;\n        this._readonly = readonly;\n        this._darkMode = darkMode;\n        this.namespace = namespace;\n        this.styles = styles;\n        this.onClick = onClick;\n    }\n\n    public readonly styles: TeleStyles;\n\n    public readonly namespace: string;\n\n    public get visible(): boolean {\n        return this._visible;\n    }\n\n    public get readonly(): boolean {\n        return this._readonly;\n    }\n\n    public get darkMode(): boolean {\n        return this._darkMode;\n    }\n\n    public onClick: (() => void) | undefined;\n\n    public $collector: HTMLElement | undefined;\n\n    /**\n     * Mount collector to a root element.\n     */\n    public mount(root: HTMLElement): this {\n        root.appendChild(this.render());\n        return this;\n    }\n\n    /**\n     * Unmount collector from the root element.\n     */\n    public unmount(): this {\n        if (this.$collector) {\n            this.$collector.remove();\n        }\n        return this;\n    }\n\n    public setVisible(visible: boolean): this {\n        if (this._visible !== visible) {\n            this._visible = visible;\n            if (this.$collector) {\n                this.$collector.classList.toggle(\n                    this.wrapClassName(\"collector-visible\"),\n                    visible\n                );\n            }\n        }\n        return this;\n    }\n\n    public setReadonly(readonly: boolean): this {\n        if (this._readonly !== readonly) {\n            this._readonly = readonly;\n            if (this.$collector) {\n                this.$collector.classList.toggle(\n                    this.wrapClassName(\"collector-readonly\"),\n                    readonly\n                );\n            }\n        }\n        return this;\n    }\n\n    public setDarkMode(darkMode: boolean): this {\n        if (this._darkMode !== darkMode) {\n            this._darkMode = darkMode;\n            if (this.$collector) {\n                this.$collector.classList.toggle(\n                    this.wrapClassName(\"color-scheme-dark\"),\n                    darkMode\n                );\n                this.$collector.classList.toggle(\n                    this.wrapClassName(\"color-scheme-light\"),\n                    !darkMode\n                );\n            }\n        }\n        return this;\n    }\n\n    public setStyles(styles: TeleStyles): this {\n        Object.assign(this.styles, styles);\n        if (this.$collector) {\n            const $collector = this.$collector;\n            Object.keys(styles).forEach((key) => {\n                const value = styles[key as keyof TeleStyles] as string;\n                if (value != null) {\n                    $collector.style[key as keyof TeleStyles] = value;\n                }\n            });\n        }\n        return this;\n    }\n\n    public render(): HTMLElement {\n        if (!this.$collector) {\n            this.$collector = document.createElement(\"button\");\n            this.$collector.className = this.wrapClassName(\"collector\");\n            this.$collector.style.backgroundImage = `url('${collectorSVG}')`;\n            this.$collector.addEventListener(\n                \"click\",\n                this.handleCollectorClick\n            );\n\n            if (this._visible) {\n                this.$collector.classList.add(\n                    this.wrapClassName(\"collector-visible\")\n                );\n            }\n\n            if (this._readonly) {\n                this.$collector.classList.add(\n                    this.wrapClassName(\"collector-readonly\")\n                );\n            }\n\n            this.$collector.classList.add(\n                this.wrapClassName(\n                    this._darkMode ? \"color-scheme-dark\" : \"color-scheme-light\"\n                )\n            );\n\n            this.setStyles(this.styles);\n        }\n\n        return this.$collector;\n    }\n\n    public destroy(): void {\n        if (this.$collector) {\n            this.$collector.removeEventListener(\n                \"click\",\n                this.handleCollectorClick\n            );\n            this.$collector.remove();\n            this.$collector = void 0;\n        }\n        this.onClick = void 0;\n    }\n\n    public wrapClassName(className: string): string {\n        return `${this.namespace}-${className}`;\n    }\n\n    protected _visible: boolean;\n\n    protected _readonly: boolean;\n\n    protected _darkMode: boolean;\n\n    protected handleCollectorClick = (): void => {\n        if (!this._readonly && this.onClick) {\n            this.onClick();\n        }\n    };\n}\n","import \"./style.scss\";\n\nimport type { TeleBox } from \"../../TeleBox\";\nimport { DefaultTitleBar, DefaultTitleBarConfig } from \"../../TeleTitleBar\";\nimport { TELE_BOX_STATE } from \"../../TeleBox/constants\";\nimport { TeleBoxRect, TeleBoxState } from \"../../TeleBox/typings\";\n\nexport type MaxTitleBarTeleBox = Pick<TeleBox, \"id\" | \"title\" | \"readonly\">;\n\nexport interface MaxTitleBarConfig extends DefaultTitleBarConfig {\n    darkMode: boolean;\n    boxes: MaxTitleBarTeleBox[];\n    containerRect: TeleBoxRect;\n    focusedBox?: MaxTitleBarTeleBox;\n}\n\nexport class MaxTitleBar extends DefaultTitleBar {\n    public constructor(config: MaxTitleBarConfig) {\n        super(config);\n\n        this.boxes = config.boxes;\n        this.focusedBox = config.focusedBox;\n        this.containerRect = config.containerRect;\n        this.darkMode = config.darkMode;\n    }\n\n    public focusBox(box?: MaxTitleBarTeleBox): void {\n        if (!box) {\n            box = this.boxes[this.boxes.length - 1];\n        }\n\n        if (this.focusedBox && this.focusedBox === box) {\n            return;\n        }\n\n        if (this.$titles && this.state === TELE_BOX_STATE.Maximized) {\n            const { children } = this.$titles.firstElementChild as HTMLElement;\n            for (let i = children.length - 1; i >= 0; i -= 1) {\n                const $tab = children[i] as HTMLElement;\n                const id = $tab.dataset?.teleBoxID;\n                if (id) {\n                    if (box && id === box.id) {\n                        $tab.classList.toggle(\n                            this.wrapClassName(\"titles-tab-focus\"),\n                            true\n                        );\n                    } else if (this.focusedBox && id === this.focusedBox.id) {\n                        $tab.classList.toggle(\n                            this.wrapClassName(\"titles-tab-focus\"),\n                            false\n                        );\n                    }\n                }\n            }\n        }\n        this.focusedBox = box;\n    }\n\n    public setContainerRect(rect: TeleBoxRect): void {\n        this.containerRect = rect;\n        if (this.$titleBar) {\n            const { x, y, width } = rect;\n            this.$titleBar.style.transform = `translate(${x}px, ${y}px)`;\n            this.$titleBar.style.width = width + \"px\";\n        }\n    }\n\n    public setBoxes(boxes: MaxTitleBarTeleBox[]): void {\n        this.boxes = boxes;\n        this.updateTitles();\n    }\n\n    public setState(state: TeleBoxState): void {\n        super.setState(state);\n        if (this.$titleBar) {\n            this.$titleBar.classList.toggle(\n                this.wrapClassName(\"max-titlebar-maximized\"),\n                state === TELE_BOX_STATE.Maximized\n            );\n        }\n        this.updateTitles();\n    }\n\n    public setReadonly(readonly: boolean): void {\n        super.setReadonly(readonly);\n        if (this.$titleBar) {\n            this.$titleBar.classList.toggle(\n                this.wrapClassName(\"readonly\"),\n                this.readonly\n            );\n        }\n    }\n\n    public setDarkMode(darkMode: boolean): void {\n        if (darkMode !== this.darkMode) {\n            this.darkMode = darkMode;\n            if (this.$titleBar) {\n                this.$titleBar.classList.toggle(\n                    this.wrapClassName(\"color-scheme-dark\"),\n                    darkMode\n                );\n                this.$titleBar.classList.toggle(\n                    this.wrapClassName(\"color-scheme-light\"),\n                    !darkMode\n                );\n            }\n        }\n    }\n\n    public render(): HTMLElement {\n        const $titleBar = super.render();\n        const { x, y, width } = this.containerRect;\n        $titleBar.style.transform = `translate(${x}px, ${y}px)`;\n        $titleBar.style.width = width + \"px\";\n\n        $titleBar.classList.add(this.wrapClassName(\"max-titlebar\"));\n        $titleBar.classList.toggle(\n            this.wrapClassName(\"max-titlebar-maximized\"),\n            this.state === TELE_BOX_STATE.Maximized\n        );\n        $titleBar.classList.toggle(\n            this.wrapClassName(\"readonly\"),\n            this.readonly\n        );\n        $titleBar.classList.add(\n            this.wrapClassName(\n                this.darkMode ? \"color-scheme-dark\" : \"color-scheme-light\"\n            )\n        );\n\n        this.updateTitles();\n\n        return $titleBar;\n    }\n\n    public destroy(): void {\n        super.destroy();\n        this.$titles = void 0;\n        this.boxes.length = 0;\n        this.focusedBox = void 0;\n    }\n\n    public updateTitles(): void {\n        if (this.$titleBar && this.state === TELE_BOX_STATE.Maximized) {\n            if (this.boxes.length === 1) {\n                if (this.$title) {\n                    this.$title.textContent = this.boxes[0].title;\n                    this.$titleBar.replaceChild(\n                        this.$title,\n                        this.$titleBar.firstElementChild as HTMLElement\n                    );\n                }\n            } else {\n                this.$titleBar.replaceChild(\n                    this.renderTitles(),\n                    this.$titleBar.firstElementChild as HTMLElement\n                );\n            }\n        }\n    }\n\n    protected renderTitles(): HTMLElement {\n        this.$titles = document.createElement(\"div\");\n        this.$titles.className = this.wrapClassName(\"titles\");\n        this.$titles.addEventListener(\n            \"wheel\",\n            (ev) => {\n                (ev.currentTarget as HTMLElement).scrollBy({\n                    left: ev.deltaY > 0 ? 250 : -250,\n                    behavior: \"smooth\",\n                });\n            },\n            { passive: false }\n        );\n\n        const $content = document.createElement(\"div\");\n        $content.className = this.wrapClassName(\"titles-content\");\n        this.$titles.appendChild($content);\n\n        this.boxes.forEach((box) => {\n            const $tab = document.createElement(\"button\");\n            $tab.className = this.wrapClassName(\"titles-tab\");\n            $tab.textContent = box.title;\n            $tab.dataset.teleBoxID = box.id;\n            $tab.dataset.teleTitleBarNoDblClick = \"true\";\n\n            if (this.focusedBox && box.id === this.focusedBox.id) {\n                $tab.classList.add(this.wrapClassName(\"titles-tab-focus\"));\n            }\n\n            $content.appendChild($tab);\n        });\n\n        return this.$titles;\n    }\n\n    protected darkMode: boolean;\n\n    protected $titles: HTMLElement | undefined;\n\n    protected boxes: MaxTitleBarTeleBox[];\n\n    protected focusedBox: MaxTitleBarTeleBox | undefined;\n\n    protected containerRect: TeleBoxRect;\n}\n","import EventEmitter from \"eventemitter3\";\nimport shallowequal from \"shallowequal\";\nimport type {\n    TeleBoxConfig,\n    TeleBoxRect,\n    TeleBoxState,\n} from \"../TeleBox/typings\";\nimport { TeleBoxCollector } from \"../TeleBoxCollector\";\nimport { ReadonlyTeleBox, TeleBox } from \"../TeleBox\";\nimport { TELE_BOX_EVENT, TELE_BOX_STATE } from \"../TeleBox/constants\";\nimport { TELE_BOX_MANAGER_EVENT } from \"./constants\";\nimport type {\n    TeleBoxManagerConfig,\n    TeleBoxManagerCreateConfig,\n    TeleBoxManagerEvents,\n    TeleBoxManagerQueryConfig,\n    TeleBoxManagerUpdateConfig,\n} from \"./typings\";\nimport { MaxTitleBar } from \"./MaxTitleBar\";\nimport {\n    TeleBoxColorScheme,\n    TELE_BOX_COLOR_SCHEME,\n    TELE_BOX_DELEGATE_EVENT,\n} from \"..\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport {\n    createSideEffectBinder,\n    Val,\n    ValEnhancedResult,\n    withValueEnhancer,\n} from \"value-enhancer\";\n\nexport * from \"./typings\";\nexport * from \"./constants\";\n\ntype ValConfig = {\n    prefersColorScheme: Val<TeleBoxColorScheme, boolean>;\n    containerRect: Val<TeleBoxRect, boolean>;\n    collector: Val<TeleBoxCollector | null>;\n    readonly: Val<boolean, boolean>;\n    minimized: Val<boolean, boolean>;\n    maximized: Val<boolean, boolean>;\n    fence: Val<boolean, boolean>;\n};\nexport interface TeleBoxManager extends ValEnhancedResult<ValConfig> {}\n\nexport class TeleBoxManager {\n    public constructor({\n        root = document.body,\n        prefersColorScheme = TELE_BOX_COLOR_SCHEME.Light,\n        minimized = false,\n        maximized = false,\n        fence = true,\n        containerRect = {\n            x: 0,\n            y: 0,\n            width: window.innerWidth,\n            height: window.innerHeight,\n        },\n        collector,\n        namespace = \"telebox\",\n        zIndex = 100,\n        readonly = false,\n    }: TeleBoxManagerConfig = {}) {\n        this._sideEffect = new SideEffectManager();\n        const { combine, createVal } = createSideEffectBinder(this._sideEffect);\n\n        this.root = root;\n        this.namespace = namespace;\n        this.zIndex = zIndex;\n\n        const prefersDark = window.matchMedia(\"(prefers-color-scheme: dark)\");\n        const prefersDark$ = createVal(false);\n\n        if (prefersDark) {\n            prefersDark$.setValue(prefersDark.matches);\n            this._sideEffect.add(() => {\n                const handler = (evt: MediaQueryListEvent): void => {\n                    prefersDark$.setValue(evt.matches);\n                };\n                prefersDark.addListener(handler);\n                return () => prefersDark.removeListener(handler);\n            });\n        }\n\n        const prefersColorScheme$ = createVal(prefersColorScheme);\n        prefersColorScheme$.reaction((prefersColorScheme, _, skipUpdate) => {\n            this.boxes.forEach((box) =>\n                box.setPrefersColorScheme(prefersColorScheme, skipUpdate)\n            );\n            if (!skipUpdate) {\n                this.events.emit(\n                    TELE_BOX_MANAGER_EVENT.PrefersColorScheme,\n                    prefersColorScheme\n                );\n            }\n        });\n\n        this._darkMode$ = combine(\n            [prefersDark$, prefersColorScheme$],\n            ([prefersDark, prefersColorScheme]) =>\n                prefersColorScheme === \"auto\"\n                    ? prefersDark\n                    : prefersColorScheme === \"dark\"\n        );\n        this._darkMode$.reaction((darkMode, _, skipUpdate) => {\n            this.boxes.forEach((box) => box.setDarkMode(darkMode, skipUpdate));\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.DarkMode, darkMode);\n            }\n        });\n\n        const readonly$ = createVal(readonly);\n        readonly$.reaction((readonly, _, skipUpdate) => {\n            this.boxes.forEach((box) => box.setReadonly(readonly, skipUpdate));\n        });\n\n        const minimized$ = createVal(minimized);\n\n        const maximized$ = createVal(maximized);\n        maximized$.reaction((maximized, _, skipUpdate) => {\n            this.boxes.forEach((box) =>\n                box.setMaximized(maximized, skipUpdate)\n            );\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.Maximized, maximized);\n            }\n        });\n\n        const state$ = combine(\n            [minimized$, maximized$],\n            ([minimized, maximized]): TeleBoxState =>\n                minimized\n                    ? TELE_BOX_STATE.Minimized\n                    : maximized\n                    ? TELE_BOX_STATE.Maximized\n                    : TELE_BOX_STATE.Normal\n        );\n        state$.reaction((state, _, skipUpdate) => {\n            this.maxTitleBar.setState(state);\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.State, state);\n            }\n        });\n\n        const fence$ = createVal(fence);\n        fence$.subscribe((fence, _, skipUpdate) => {\n            this.boxes.forEach((box) => box.setFence(fence, skipUpdate));\n        });\n\n        const containerRect$ = createVal(containerRect, shallowequal);\n        containerRect$.reaction((containerRect, _, skipUpdate) => {\n            this.boxes.forEach((box) =>\n                box.setContainerRect(containerRect, skipUpdate)\n            );\n            this.maxTitleBar.setContainerRect(containerRect);\n        });\n\n        const collector$ = createVal(\n            collector === null\n                ? null\n                : collector ||\n                      new TeleBoxCollector({\n                          visible: minimized,\n                          readonly: readonly,\n                          namespace,\n                      }).mount(root)\n        );\n        collector$.subscribe((collector) => {\n            if (collector) {\n                collector.setVisible(minimized$.value);\n                collector.setReadonly(readonly$.value);\n                collector.setDarkMode(this._darkMode$.value);\n                this._sideEffect.add(() => {\n                    collector.onClick = () => {\n                        if (!readonly$.value) {\n                            minimized$.setValue(false);\n                        }\n                    };\n                    return () => collector.destroy();\n                }, \"collect-onClick\");\n            }\n        });\n        readonly$.subscribe((readonly) =>\n            collector$.value?.setReadonly(readonly)\n        );\n        this._darkMode$.subscribe((darkMode) => {\n            collector$.value?.setDarkMode(darkMode);\n        });\n\n        minimized$.subscribe((minimized, _, skipUpdate) => {\n            collector$.value?.setVisible(minimized);\n\n            if (minimized) {\n                if (collector$.value?.$collector) {\n                    const { x, y, width, height } =\n                        collector$.value.$collector.getBoundingClientRect();\n                    const rootRect = this.root.getBoundingClientRect();\n                    this.boxes.forEach((box) => {\n                        box.setCollectorRect(\n                            {\n                                x: x - rootRect.x,\n                                y: y - rootRect.y,\n                                width,\n                                height,\n                            },\n                            true\n                        );\n                    });\n                } else if (import.meta.env.DEV) {\n                    console.warn(\"No collector for minimized boxes.\");\n                }\n            }\n\n            this.boxes.forEach((box) =>\n                box.setMinimized(minimized, skipUpdate)\n            );\n\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.Minimized, minimized);\n            }\n        });\n\n        const checkFocusBox = (ev: MouseEvent | TouchEvent): void => {\n            if (readonly$.value) {\n                return;\n            }\n\n            const target = ev.target as HTMLElement;\n            if (!target.tagName) {\n                return;\n            }\n\n            for (\n                let el: HTMLElement | null = target;\n                el;\n                el = el.parentElement\n            ) {\n                const id = el.dataset?.teleBoxID;\n                if (id) {\n                    const box = this.boxes.find((box) => box.id === id);\n                    if (box) {\n                        this.focusBox({ focus: true, box });\n                        return;\n                    }\n                }\n            }\n        };\n\n        this._sideEffect.addEventListener(\n            window,\n            \"mousedown\",\n            checkFocusBox,\n            true\n        );\n        this._sideEffect.addEventListener(\n            window,\n            \"touchstart\",\n            checkFocusBox,\n            true\n        );\n\n        this.maxTitleBar = new MaxTitleBar({\n            darkMode: this.darkMode,\n            readonly: readonly$.value,\n            namespace: this.namespace,\n            state: state$.value,\n            boxes: this.boxes,\n            focusedBox: this._focusedBox,\n            containerRect: containerRect$.value,\n            onEvent: (event): void => {\n                switch (event.type) {\n                    case TELE_BOX_DELEGATE_EVENT.Maximize: {\n                        maximized$.setValue(!maximized$.value);\n                        break;\n                    }\n                    case TELE_BOX_DELEGATE_EVENT.Minimize: {\n                        minimized$.setValue(true);\n                        break;\n                    }\n                    case TELE_BOX_EVENT.Close: {\n                        const box =\n                            this._focusedBox ??\n                            this.boxes[this.boxes.length - 1];\n                        if (box) {\n                            this.remove(box.id);\n                        }\n                        break;\n                    }\n                    default: {\n                        break;\n                    }\n                }\n            },\n        });\n        readonly$.subscribe((readonly) =>\n            this.maxTitleBar.setReadonly(readonly)\n        );\n        this._darkMode$.subscribe((darkMode) => {\n            this.maxTitleBar.setDarkMode(darkMode);\n        });\n\n        const valConfig: ValConfig = {\n            prefersColorScheme: prefersColorScheme$,\n            containerRect: containerRect$,\n            collector: collector$,\n            readonly: readonly$,\n            fence: fence$,\n            minimized: minimized$,\n            maximized: maximized$,\n        };\n\n        withValueEnhancer(this, valConfig);\n\n        this._state$ = state$;\n\n        this.root.appendChild(this.maxTitleBar.render());\n    }\n\n    public readonly events = new EventEmitter() as TeleBoxManagerEvents;\n\n    protected _sideEffect: SideEffectManager;\n\n    protected root: HTMLElement;\n\n    public readonly namespace: string;\n\n    public zIndex: number;\n\n    public _darkMode$: Val<boolean, boolean>;\n\n    public get darkMode(): boolean {\n        return this._darkMode$.value;\n    }\n\n    public _state$: Val<TeleBoxState, boolean>;\n\n    public get state(): TeleBoxState {\n        return this._state$.value;\n    }\n\n    /** @deprecated use setMaximized and setMinimized instead */\n    public setState(state: TeleBoxState, skipUpdate = false): this {\n        switch (state) {\n            case TELE_BOX_STATE.Maximized: {\n                this.setMinimized(false, skipUpdate);\n                this.setMaximized(true, skipUpdate);\n                break;\n            }\n            case TELE_BOX_STATE.Minimized: {\n                this.setMinimized(true, skipUpdate);\n                this.setMaximized(false, skipUpdate);\n                break;\n            }\n            default: {\n                this.setMinimized(false, skipUpdate);\n                this.setMaximized(false, skipUpdate);\n                break;\n            }\n        }\n        return this;\n    }\n\n    public create(config?: TeleBoxManagerCreateConfig): ReadonlyTeleBox {\n        const box = new TeleBox(this.wrapCreateConfig(config));\n        box.mount(this.root);\n        this.boxes.push(box);\n\n        if (box.focus) {\n            this.focusBox({ focus: true, box, increaseZIndex: false });\n        }\n\n        this.maxTitleBar.setBoxes(this.boxes);\n\n        box._delegateEvents.on(TELE_BOX_DELEGATE_EVENT.Maximize, () => {\n            this.setMaximized(!this.maximized);\n        });\n        box._delegateEvents.on(TELE_BOX_DELEGATE_EVENT.Minimize, () => {\n            this.setMinimized(true);\n        });\n        box._delegateEvents.on(TELE_BOX_DELEGATE_EVENT.Close, () => {\n            this.focusBox({ focus: false, box });\n            this.remove(box.id);\n        });\n        box.events.on(TELE_BOX_EVENT.Move, () => {\n            this.events.emit(TELE_BOX_MANAGER_EVENT.Move, box);\n        });\n        box.events.on(TELE_BOX_EVENT.Resize, () => {\n            this.events.emit(TELE_BOX_MANAGER_EVENT.Resize, box);\n        });\n        box.events.on(TELE_BOX_EVENT.IntrinsicMove, () => {\n            this.events.emit(TELE_BOX_MANAGER_EVENT.IntrinsicMove, box);\n        });\n        box.events.on(TELE_BOX_EVENT.IntrinsicResize, () => {\n            this.events.emit(TELE_BOX_MANAGER_EVENT.IntrinsicResize, box);\n        });\n        box.events.on(TELE_BOX_EVENT.VisualResize, () => {\n            this.events.emit(TELE_BOX_MANAGER_EVENT.VisualResize, box);\n        });\n        this.events.emit(TELE_BOX_MANAGER_EVENT.Created, box);\n\n        return box;\n    }\n\n    public query(config?: TeleBoxManagerQueryConfig): ReadonlyTeleBox[] {\n        return config\n            ? this.boxes.filter(this.teleBoxMatcher(config))\n            : [...this.boxes];\n    }\n\n    public queryOne(\n        config?: TeleBoxManagerQueryConfig\n    ): ReadonlyTeleBox | undefined {\n        return config\n            ? this.boxes.find(this.teleBoxMatcher(config))\n            : this.boxes[0];\n    }\n\n    public update(\n        boxID: string,\n        config: TeleBoxManagerUpdateConfig,\n        skipUpdate = false\n    ): void {\n        const box = this.boxes.find((box) => box.id === boxID);\n        if (box) {\n            return this.updateBox(box, config, skipUpdate);\n        }\n    }\n\n    public updateAll(\n        config: TeleBoxManagerUpdateConfig,\n        skipUpdate = false\n    ): void {\n        this.boxes.forEach((box) => {\n            this.updateBox(box, config, skipUpdate);\n        });\n    }\n\n    public remove(\n        boxID: string,\n        skipUpdate = false\n    ): ReadonlyTeleBox | undefined {\n        const index = this.boxes.findIndex((box) => box.id === boxID);\n        if (index >= 0) {\n            const boxes = this.boxes.splice(index, 1);\n            this.maxTitleBar.setBoxes(this.boxes);\n            const box = boxes[0];\n            this.focusBox({ focus: false, box });\n            box.destroy();\n            if (!skipUpdate) {\n                if (this.boxes.length <= 0) {\n                    this.setMaximized(false);\n                    this.setMinimized(false);\n                }\n                this.events.emit(TELE_BOX_MANAGER_EVENT.Removed, boxes);\n            }\n            return box;\n        }\n        return;\n    }\n\n    public removeAll(skipUpdate = false): ReadonlyTeleBox[] {\n        if (this._focusedBox) {\n            const box = this._focusedBox;\n            this._focusedBox = void 0;\n            if (!skipUpdate) {\n                this.events.emit(\n                    TELE_BOX_MANAGER_EVENT.Focused,\n                    undefined,\n                    box\n                );\n            }\n        }\n        const boxes = this.boxes.splice(0, this.boxes.length);\n        this.maxTitleBar.setBoxes(this.boxes);\n        boxes.forEach((box) => box.destroy());\n        if (!skipUpdate) {\n            if (this.boxes.length <= 0) {\n                this.setMaximized(false);\n                this.setMinimized(false);\n            }\n            this.events.emit(TELE_BOX_MANAGER_EVENT.Removed, boxes);\n        }\n        return boxes;\n    }\n\n    public destroy(skipUpdate = false): void {\n        this.events.removeAllListeners();\n        this._sideEffect.flushAll();\n        this._focusedBox = void 0;\n        this.removeAll(skipUpdate);\n\n        Object.keys(this).forEach((key) => {\n            const value = this[key as keyof this];\n            if (value instanceof Val) {\n                value.destroy();\n            }\n        });\n    }\n\n    public wrapClassName(className: string): string {\n        return `${this.namespace}-${className}`;\n    }\n\n    protected maxTitleBar: MaxTitleBar;\n\n    protected _focusedBox: TeleBox | undefined;\n\n    protected boxes: TeleBox[] = [];\n\n    protected lastState: TeleBoxState | undefined;\n\n    protected teleBoxMatcher(\n        config: TeleBoxManagerQueryConfig\n    ): (box: TeleBox) => boolean {\n        const keys = Object.keys(config) as Array<\n            keyof TeleBoxManagerQueryConfig\n        >;\n        return (box: TeleBox): boolean =>\n            keys.every((key) => config[key] === box[key]);\n    }\n\n    protected updateBox(\n        box: TeleBox,\n        config: TeleBoxManagerUpdateConfig,\n        skipUpdate = false\n    ): void {\n        if (config.x != null || config.y != null) {\n            box.move(\n                config.x == null ? box.intrinsicX : config.x,\n                config.y == null ? box.intrinsicY : config.y,\n                skipUpdate\n            );\n        }\n        if (config.width != null || config.height != null) {\n            box.resize(\n                config.width == null ? box.intrinsicWidth : config.width,\n                config.height == null ? box.intrinsicHeight : config.height,\n                skipUpdate\n            );\n        }\n        if (config.title != null) {\n            box.setTitle(config.title);\n            this.maxTitleBar.updateTitles();\n        }\n        if (config.visible != null) {\n            box.setVisible(config.visible, skipUpdate);\n        }\n        if (config.minHeight != null) {\n            box.setMinHeight(config.minHeight, skipUpdate);\n        }\n        if (config.minWidth != null) {\n            box.setMinWidth(config.minWidth, skipUpdate);\n        }\n        if (config.resizable != null) {\n            box.setResizable(config.resizable);\n        }\n        if (config.draggable != null) {\n            box.setDraggable(config.draggable);\n        }\n        if (config.fixRatio != null) {\n            box.setFixRatio(config.fixRatio, skipUpdate);\n        }\n        if (config.focus != null) {\n            this.focusBox({ focus: config.focus, box, skipUpdate });\n        }\n        if (config.content != null) {\n            box.mountContent(config.content);\n        }\n        if (config.footer != null) {\n            box.mountFooter(config.footer);\n        }\n    }\n\n    protected focusBox({\n        focus,\n        box,\n        skipUpdate = false,\n        increaseZIndex = true,\n    }: {\n        focus: boolean;\n        box: TeleBox;\n        skipUpdate?: boolean;\n        increaseZIndex?: boolean;\n    }): void {\n        box.setFocus(focus, skipUpdate);\n        if (box.focus) {\n            if (this._focusedBox !== box) {\n                const lastFocusedBox = this._focusedBox;\n                if (this._focusedBox) {\n                    this._focusedBox.setFocus(false, skipUpdate);\n                }\n                this._focusedBox = box;\n                if (increaseZIndex) {\n                    box.setZIndex(++this.zIndex);\n                }\n                if (!skipUpdate) {\n                    this.events.emit(\n                        TELE_BOX_MANAGER_EVENT.Focused,\n                        box,\n                        lastFocusedBox\n                    );\n                }\n            }\n        } else {\n            if (this._focusedBox === box) {\n                this._focusedBox = void 0;\n\n                if (!skipUpdate) {\n                    this.events.emit(\n                        TELE_BOX_MANAGER_EVENT.Focused,\n                        undefined,\n                        box\n                    );\n                }\n            }\n        }\n        this.maxTitleBar.focusBox(this._focusedBox);\n    }\n\n    protected getInitialPosition(\n        width: number,\n        height: number\n    ): { x: number; y: number } {\n        const upMostBox =\n            this.boxes.length > 0 &&\n            this.boxes.reduce((box1, box2) =>\n                box1.zIndex > box2.zIndex ? box1 : box2\n            );\n\n        let x = 20;\n        let y = 20;\n\n        if (upMostBox) {\n            x = upMostBox.intrinsicX * this.containerRect.width + 20;\n            y = upMostBox.intrinsicY * this.containerRect.height + 20;\n\n            if (\n                x >\n                    this.containerRect.width -\n                        width * this.containerRect.width ||\n                y >\n                    this.containerRect.height -\n                        height * this.containerRect.height\n            ) {\n                x = 20;\n                y = 20;\n            }\n        }\n\n        return {\n            x: x / this.containerRect.width,\n            y: y / this.containerRect.height,\n        };\n    }\n\n    protected wrapCreateConfig(config: TeleBoxConfig = {}): TeleBoxConfig {\n        let { x, y } = config;\n        const { width = 0.5, height = 0.5 } = config;\n\n        if (x == null || y == null) {\n            const initialPos = this.getInitialPosition(width, height);\n\n            if (x == null) {\n                x = initialPos.x;\n            }\n\n            if (y == null) {\n                y = initialPos.y;\n            }\n        }\n\n        return {\n            ...config,\n            x,\n            y,\n            width,\n            height,\n            darkMode: this.darkMode,\n            prefersColorScheme: this.prefersColorScheme,\n            maximized: this.maximized,\n            minimized: this.minimized,\n            fence: this.fence,\n            zIndex: this.zIndex,\n            namespace: this.namespace,\n            containerRect: this.containerRect,\n            readonly: this.readonly,\n        };\n    }\n}\n","import React, { FC, useState, useEffect } from \"react\";\nimport { TeleBox } from \"../TeleBox\";\nimport { TeleBoxConfig, TeleBoxState } from \"../TeleBox/typings\";\nimport { TELE_BOX_EVENT } from \"../TeleBox/constants\";\nimport { useUpdateEffect } from \"./utils\";\n\nexport type TeleBoxReactProps = TeleBoxConfig & {\n    onResize?: (event: { width: number; height: number }) => void;\n    onMove?: (event: { x: number; y: number }) => void;\n    onClose?: () => void;\n    onFocus?: () => void;\n    onBlur?: () => void;\n    onStateChanged?: (state: TeleBoxState) => void;\n};\n\nexport const TeleBoxReact: FC<TeleBoxReactProps> = (props) => {\n    const [teleBox] = useState(() => new TeleBox(props));\n\n    useUpdateEffect(() => {\n        if (props.prefersColorScheme != null) {\n            teleBox.setPrefersColorScheme(props.prefersColorScheme);\n        }\n    }, [teleBox, props.prefersColorScheme]);\n\n    useUpdateEffect(() => {\n        if (props.minWidth != null) {\n            teleBox.setMinWidth(props.minWidth);\n        }\n    }, [teleBox, props.minWidth]);\n\n    useUpdateEffect(() => {\n        if (props.minHeight != null) {\n            teleBox.setMinHeight(props.minHeight);\n        }\n    }, [teleBox, props.minHeight]);\n\n    useUpdateEffect(() => {\n        teleBox.resize(\n            props.width ?? teleBox.width,\n            props.height ?? teleBox.height,\n            true\n        );\n    }, [teleBox, props.width, props.height]);\n\n    useUpdateEffect(() => {\n        teleBox.move(props.x ?? teleBox.x, props.y ?? teleBox.y, true);\n    }, [teleBox, props.x, props.y]);\n\n    useUpdateEffect(() => {\n        if (props.title != null) {\n            teleBox.setTitle(props.title);\n        }\n    }, [teleBox, props.title]);\n\n    useUpdateEffect(() => {\n        if (props.visible != null) {\n            teleBox.setVisible(props.visible);\n        }\n    }, [teleBox, props.visible]);\n\n    useUpdateEffect(() => {\n        if (props.minimized != null) {\n            teleBox.setMinimized(props.minimized, true);\n        }\n    }, [teleBox, props.minimized]);\n\n    useUpdateEffect(() => {\n        if (props.maximized != null) {\n            teleBox.setMaximized(props.maximized, true);\n        }\n    }, [teleBox, props.maximized]);\n\n    useUpdateEffect(() => {\n        if (props.state != null) {\n            teleBox.setState(props.state, true);\n        }\n    }, [teleBox, props.state]);\n\n    useUpdateEffect(() => {\n        if (props.draggable != null) {\n            teleBox.setDraggable(props.draggable);\n        }\n    }, [teleBox, props.draggable]);\n\n    useUpdateEffect(() => {\n        if (props.resizable != null) {\n            teleBox.setResizable(props.resizable);\n        }\n    }, [teleBox, props.resizable]);\n\n    useUpdateEffect(() => {\n        if (props.fence != null) {\n            teleBox.setFence(props.fence);\n        }\n    }, [teleBox, props.fence]);\n\n    useUpdateEffect(() => {\n        if (props.containerRect != null) {\n            teleBox.setContainerRect(props.containerRect);\n        }\n    }, [teleBox, props.containerRect]);\n\n    useUpdateEffect(() => {\n        if (props.fixRatio != null) {\n            teleBox.setFixRatio(props.fixRatio);\n        }\n    }, [teleBox, props.fixRatio]);\n\n    useEffect(() => {\n        if (props.onResize) {\n            teleBox.events.on(TELE_BOX_EVENT.Resize, props.onResize);\n            return () => {\n                teleBox.events.off(TELE_BOX_EVENT.Resize, props.onResize);\n            };\n        }\n        return;\n    }, [teleBox, props.onResize]);\n\n    useEffect(() => {\n        if (props.onMove) {\n            teleBox.events.on(TELE_BOX_EVENT.Move, props.onMove);\n            return () => {\n                teleBox.events.off(TELE_BOX_EVENT.Move, props.onMove);\n            };\n        }\n        return;\n    }, [teleBox, props.onMove]);\n\n    useEffect(() => {\n        if (props.onClose) {\n            teleBox.events.on(TELE_BOX_EVENT.Close, props.onClose);\n            return () => {\n                teleBox.events.off(TELE_BOX_EVENT.Close, props.onClose);\n            };\n        }\n        return;\n    }, [teleBox, props.onClose]);\n\n    useEffect(() => {\n        if (props.onFocus) {\n            teleBox.events.on(TELE_BOX_EVENT.Focus, props.onFocus);\n            return () => {\n                teleBox.events.off(TELE_BOX_EVENT.Focus, props.onFocus);\n            };\n        }\n        return;\n    }, [teleBox, props.onFocus]);\n\n    useEffect(() => {\n        if (props.onBlur) {\n            teleBox.events.on(TELE_BOX_EVENT.Blur, props.onBlur);\n            return () => {\n                teleBox.events.off(TELE_BOX_EVENT.Blur, props.onBlur);\n            };\n        }\n        return;\n    }, [teleBox, props.onBlur]);\n\n    useEffect(() => {\n        if (props.onStateChanged) {\n            teleBox.events.on(TELE_BOX_EVENT.State, props.onStateChanged);\n            return () => {\n                teleBox.events.off(TELE_BOX_EVENT.State, props.onStateChanged);\n            };\n        }\n        return;\n    }, [teleBox, props.onStateChanged]);\n\n    return (\n        <div\n            ref={(node) => node && teleBox.render(node)}\n            className={teleBox.wrapClassName(\"box\")}\n        />\n    );\n};\n"],"names":["has","Object","prototype","hasOwnProperty","prefix","fn","context","once","emitter","event","TypeError","listener","EE","evt","_events","push","_eventsCount","Events","create","__proto__","eventNames","events","name","names","this","call","slice","getOwnPropertySymbols","concat","listeners","handlers","i2","l","length","ee","Array","listenerCount","emit","a1","a2","a3","a4","a5","args","len","arguments","removeListener","apply","j","on","addListener","removeAllListeners","off","EventEmitter2","prefixed","EventEmitter","__assign","assign","t2","s2","n","p","e2","indexOf","propertyIsEnumerable","prevTime","onNextFrame","window","requestAnimationFrame","callback","timestamp","Date","now","timeToCall","Math","max","defaultElapsed","useDefaultElapsed","willRunNextFrame","isProcessing","frame","delta","stepsOrder","setWillRunNextFrame","willRun","steps","reduce","acc","key","setRunNextFrame","processToRun","processToRunNextFrame","numThisFrame","isProcessing2","cancelled","toKeepAlive","renderStep","WeakSet","cancel","process","indexOfCallback","add","splice","frame2","_a","process_1","schedule","keepAlive","immediate","addToCurrentBuffer","buffer","delete","sync","step","processStep","stepId","processFrame","min","forEach","startLoop","clamp","v","sanitize","Number","toFixed","singleColorRegex","number","test","parse","parseFloat","transform","alpha","scale","default","createUnitType","unit","endsWith","split","degrees","percent","px","progressPercentage","clampRgbUnit","isRgba","red","isHsla","hue","splitColorValues","terms","values","valuesArray","value","substring","lastIndexOf","getValueFromFunctionString","replace","rgbUnit","round","color2","colorType","startsWith","testElement","rgba","isColorString","green","blue","_b","alpha$1","rgbaTemplate","hsla","saturation","lightness","hslaTemplate","hex","r2","g","b","substr","parseInt","color","createStyler","onRead2","onRead","onRender2","onRender","uncachedValues","Set","_c","useCache","_a2","props","__rest","state","changedValues","hasChanged","hasCSSVariable","currentValue","render","styler","get","forceRead","set","forceRender","CAMEL_CASE_PATTERN","camelToDash","str","toLowerCase","camelCache","Map","dashCache","prefixes","numPrefixes","isBrowser","document","setDashPrefix","prefixer","asDashCase","cache2","createElement","noPrefix","prefixedPropertyName","charAt","toUpperCase","style","testPrefix","setServerProperty","axes","transformProps","axesAcc","axesKey","transformPropDictionary","dict","a","transformOriginProps","int","valueTypes","backgroundColor","outlineColor","fill","stroke","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderRadius","radius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","width","maxWidth","height","maxHeight","size","top","right","bottom","left","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","margin","marginTop","marginRight","marginBottom","marginLeft","rotate","rotateX","rotateY","rotateZ","scaleX","scaleY","scaleZ","skew","skewX","skewY","distance","translateX","translateY","translateZ","x","y","z","perspective","opacity","originX","originY","originZ","zIndex","fillOpacity","strokeOpacity","numOctaves","getValueType","getValueAsType","type","scrollKeys","blacklist","translateAlias","enableHardwareAcceleration","styles","transformOrigin","transformKeys","isDashCase","allowTransformNone","transformIsDefault","hasTransform","hasTransformOrigin","valueType","valueAsType","isTransformProp","isTransformOriginProp","isCustomTemplate","transformString","transformHasZ","sort","sortTransformProps","numTransformKeys","trim","buildTransform","_d","_e","cssStyler","options","element","preparseOutput","defaultValueType","domValue","getComputedStyle","getPropertyValue","buildStyles","numChangedValues","setProperty","camelCaseAttributes","progressToPixels","progress","unmeasured","origin","offset","svgStyleConfig","dimensions","totalPathLength","cssBuilder","attrs","createStyleBuilder","attrX","attrY","pathLength","pathSpacing","pathOffset","style2","calcOrigin","calculateSVGTransformOrigin","buildSVGAttrs","svgStyler","getAttribute","buildAttrs","setAttribute","viewport","pageYOffset","pageXOffset","scrollTop","scrollLeft","scrollTo","cache","WeakMap","createDOMStyler","node","HTMLElement","click","isHTMLElement","SVGElement","isSVGElement","getBBox","getBoundingClientRect","getDimensions","getSVGElementDimensions","tagName","isPath","getTotalLength","createAttrBuilder","createCssStyler","nodeOrSelector","getStyler","querySelector","shallowequal","objA","objB","compare","compareContext","ret","keysA","keys","keysB","bHasOwnProperty","bind","idx","valueA","valueB","e","s","t","r","random","join","constructor","disposers","flush","addDisposer","addEventListener","o2","removeEventListener","setTimeout","remove","clearTimeout","setInterval","t3","clearInterval","error","flushAll","clear","defineProperty","require","r3","s3","enumerable","configurable","writable","_value","setValue","_subscribers","reaction","subscribe","derive","addBeforeDestroy","destroy","_beforeDestroys","defineProperties","e3","bindSideEffect","combine","map","u2","e4","t4","i3","c2","createVal","TELE_BOX_COLOR_SCHEME2","TELE_BOX_STATE2","TELE_BOX_EVENT2","TELE_BOX_DELEGATE_EVENT2","TELE_BOX_RESIZE_HANDLE2","TELE_BOX_COLOR_SCHEME","TELE_BOX_STATE","TELE_BOX_EVENT","TELE_BOX_DELEGATE_EVENT","TELE_BOX_RESIZE_HANDLE","ev","stopPropagation","cancelable","preventDefault","touches","toString","defaultBoxCount","Boolean","readonly","title","buttons","onEvent","onDragStart","namespace","Normal","SideEffectManager","button","target","dataset","teleTitleBarNoDblClick","lastTitleBarClick","Maximize","Minimize","iconClassName","wrapClassName","isActive","state2","Maximized","Close","setTitle","$title","textContent","setState","btn","$btns","classList","toggle","setReadonly","$titleBar","className","teleBoxHandle","sideEffect","handleTitleBarClick","passive","$buttonsContainer","teleTitleBarBtnIndex","String","$btn","appendChild","isNaN","dragHandle","id","genUniqueKey","getBoxDefaultName","prefersColorScheme","Light","darkMode","visible","minWidth","minHeight","minimized","maximized","resizable","draggable","fence","fixRatio","focus","titleBar","content","footer","containerRect","innerWidth","innerHeight","collectorRect","_handleTrackStart","_sideEffect","_valSideEffectBinder","createSideEffectBinder","_delegateEvents","prefersColorScheme$","prefersColorScheme2","_","skipUpdate","PrefersColorScheme","darkMode$","prefersDark","matchMedia","matches","handler","noop","darkMode2","DarkMode","containerRect$","collectorRect$","title$","visible$","visible2","readonly$","readonly2","Readonly","resizable$","draggable$","fence$","fixRatio$","zIndex$","focus$","focus2","Focus","Blur","minimized$","minimized2","Minimized","maximized$","maximized2","state$","State","minSize$","intrinsicSize$","minSize","IntrinsicResize","size$","intrinsicSize","Resize","visualSize$","containerRect2","collectorRect2","VisualResize","intrinsicCoord$","coord","IntrinsicMove","coord$","intrinsicCoord","Move","DefaultTitleBar","$userContent$","$userFooter$","$userStyles$","$userContent","$userFooter","$userStyles","_state$","_minSize$","_size$","_intrinsicSize$","_visualSize$","_coord$","_intrinsicCoord$","$box","_darkMode$","setMinimized","setMaximized","setMinWidth","setMinHeight","resize","move","newHeight","intrinsicHeight","intrinsicWidth","intrinsicY","intrinsicX","mount","container","unmount","mountContent","set$userContent","unmountContent","mountFooter","set$userFooter","unmountFooter","getUserStyles","mountStyles","$styles","set$userStyles","unmountStyles","root","_renderSideEffect","bindClassName","el","val","predicate","isTruthy","wrappedClassName","_readonly$","_draggable$","isFalsy","_resizable$","_focus$","minimizedClassName","maximizedClassName","MAXIMIZED_TIMER_ID","_visible$","display","_zIndex$","boxStyler","teleBoxID","absoluteWidth","absoluteHeight","_minimized$","_containerRect$","_collectorRect$","$boxMain","$contentWrap","$content","last$userStyles","_$userStyles$","last$userContent","_$userContent$","$footer","last$userFooter","_$userFooter$","_renderResizeHandlers","$resizeHandles","handleType","$handle","TRACKING_DISPOSER_ID","transformingClassName","$trackMask","trackingHandle","trackStartX","trackStartY","trackStartWidth","trackStartHeight","trackStartPageX","trackStartPageY","handleTracking","pageX","pageY","flattenEvent","offsetX","offsetY","North","South","West","East","NorthWest","NorthEast","SouthEast","SouthWest","xOverflowOffset","yOverflowOffset","handleTrackEnd","handleTrackStart","cursor","Destroyed","useUpdateEffect","effect","deps","isFirst","useRef","current","TELE_BOX_MANAGER_EVENT2","onClick","_readonly","_visible","_darkMode","$collector","setVisible","setDarkMode","setStyles","backgroundImage","handleCollectorClick","TELE_BOX_MANAGER_EVENT","config","boxes","focusedBox","focusBox","box","$titles","children","firstElementChild","$tab","setContainerRect","rect","setBoxes","updateTitles","super","replaceChild","renderTitles","currentTarget","scrollBy","deltaY","behavior","body","collector","prefersDark$","setPrefersColorScheme","prefersDark2","maxTitleBar","fence2","setFence","collector$","TeleBoxCollector","collector2","rootRect","setCollectorRect","checkFocusBox","parentElement","find","box2","MaxTitleBar","_focusedBox","TeleBox","wrapCreateConfig","increaseZIndex","Created","query","filter","teleBoxMatcher","queryOne","update","boxID","updateBox","updateAll","index2","findIndex","Removed","removeAll","Focused","Val","every","setResizable","setDraggable","setFixRatio","setFocus","lastFocusedBox","setZIndex","getInitialPosition","upMostBox","box1","initialPos","teleBox","useState","onResize","onMove","onClose","onFocus","onBlur","onStateChanged","ref"],"mappings":"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"}