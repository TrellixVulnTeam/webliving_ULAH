"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports[Symbol.toStringTag]="Module";const e="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=e.length,s=Array(20),r=()=>{for(let r=0;r<20;r++)s[r]=e.charAt(Math.random()*t);return s.join("")};exports.SideEffectManager=class{constructor(){this.disposers=new Map}add(e,t=r()){return this.flush(t),this.disposers.set(t,e()),t}addDisposer(e,t=r()){return this.flush(t),this.disposers.set(t,e),t}addEventListener(e,t,s,o,i=r()){return this.add((()=>(e.addEventListener(t,s,o),()=>e.removeEventListener(t,s,o))),i),i}setTimeout(e,t,s=r()){return this.add((()=>{const r=window.setTimeout((()=>{this.remove(s),e()}),t);return()=>window.clearTimeout(r)}),s)}setInterval(e,t,s=r()){return this.add((()=>{const s=window.setInterval(e,t);return()=>window.clearInterval(s)}),s)}remove(e){const t=this.disposers.get(e);return this.disposers.delete(e),t}flush(e){const t=this.remove(e);if(t)try{t()}catch(s){console.error(s)}}flushAll(){this.disposers.forEach((e=>{try{e()}catch(t){console.error(t)}})),this.disposers.clear()}},exports.genUID=r;
//# sourceMappingURL=side-effect-manager.cjs.js.map
