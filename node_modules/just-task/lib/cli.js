"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const undertaker_1 = require("./undertaker");
const JustTaskRegistry_1 = require("./JustTaskRegistry");
const yargs_1 = __importDefault(require("yargs"));
const originalEmitWarning = process.emitWarning;
process.emitWarning = function emitWarning(_warning, _type, code, _ctor) {
    if (code === 'DEP0097') {
        // Undertaker uses a deprecated approach that causes NodeJS 10 to print
        // this warning to stderr:
        //
        // "Using a domain property in MakeCallback is deprecated. Use the  async_context
        // variant of MakeCallback or the AsyncResource class instead."
        // Suppress the warning!
        return;
    }
    return originalEmitWarning.apply(this, arguments);
};
yargs_1.default
    .option({ config: { describe: 'path to a just-task.js file (includes the file name)' } })
    .usage('$0 <cmd> [options]')
    .updateStrings({
    'Commands:': 'Tasks:\n'
});
const registry = new JustTaskRegistry_1.JustTaskRegistry();
undertaker_1.undertaker.registry(registry);
yargs_1.default.parse();
